<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:57:06 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>XShm</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">XShm</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNTAX">SYNTAX</a><br/>
<a href="#STRUCTURES">STRUCTURES</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">XShmQueryExtension,
XShmQueryVersion, XShmPixmapFormat, XShmAttach, XShmDetach
XShmCreateImage, XShmPutImage, XShmGetImage,
XShmCreatePixmap, XShmGetEventBase - X Shared Memory
extension functions</p>
<h2>SYNTAX
<a name="SYNTAX"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">#include
&lt;X11/Xlib.h&gt; <br/>
#include &lt;sys/ipc.h&gt; <br/>
#include &lt;sys/shm.h&gt; <br/>
#include &lt;X11/extensions/XShm.h&gt;</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="-3%"></td>
<td width="7%">
<p>Bool</p></td>
<td width="87%">
<p>XShmQueryExtension(</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="-3%"></td>
<td width="7%"></td>
<td width="87%">
<p>Display *display);</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Bool
XShmQueryVersion(</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Display *display;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>int *major, *minor;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Bool *pixmaps);</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">int
XShmPixmapFormat(</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Display *display);</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Bool
XShmAttach(</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Display *display;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>XShmSegmentInfo *shminfo);</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Bool
XShmDetach(</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Display *display;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>XShmSegmentInfo *shminfo);</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">XImage
*XShmCreateImage (</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Display *display;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Visual *visual;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>unsigned int depth;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>int format;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>char *data;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>XShmSegmentInfo *shminfo;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>unsigned int width, height);</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Bool
XShmPutImage(</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Display *display;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Drawable d;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>GC gc;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>XImage *image;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>int src_x, src_y, dest_x, dest_y;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>unsigned int width, height;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>bool send_event);</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Bool
XShmGetImage (</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Display *display;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Drawable d;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>XImage *image;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>int x, y;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>unsigned long plane_mask);</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Pixmap
XShmCreatePixmap( <br/>
Display *display; <br/>
Drawable d; <br/>
char *data;</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>XShmSegmentInfo *shminfo;</p></td></tr>
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>unsigned int width, height, depth);</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Status
XShmGetEventBase(</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="6%"></td>
<td width="94%">
<p>Display *display);</p></td></tr>
</table>
<h2>STRUCTURES
<a name="STRUCTURES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><i>Events:</i>
<br/>
typedef struct { <br/>
int type; /* of event */ <br/>
unsigned long serial; /* # of last request processed by
server*/ <br/>
Bool send_event; /* true if this came from a SendEvent
request*/ <br/>
Display *display; /* Display the event was read from */ <br/>
Drawable drawable; /* drawable of request */ <br/>
int major_code; /* ShmReqCode */ <br/>
int minor_code; /* X_ShmPutImage */ <br/>
ShmSeg shmseg; /* the ShmSeg used in the request*/ <br/>
unsigned long offset; /* the offset into ShmSeg used in the
request*/ <br/>
} XShmCompletionEvent;</p>
<p style="margin-left:9%; margin-top: 1em"><i>a structure
of type XShmSegmentInfo :</i></p>
<p style="margin-left:9%; margin-top: 1em">typedef struct {
<br/>
ShmSeg shmseg; /* resource id */ <br/>
int shmid; /* kernel id */ <br/>
char *shmaddr; /* address in client */ <br/>
Bool readOnly; /* how the server should attach it */ <br/>
} XShmSegmentInfo;</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><i>XShmQueryExtension</i>
checks to see if the shared memory extensions are available
for the specified display.</p>
<p style="margin-left:9%; margin-top: 1em"><i>XShmQueryVersion</i>
returns the version numbers of the extension implementation.
Shared memory pixmaps are supported if the pixmaps argument
returns true.</p>
<p style="margin-left:9%; margin-top: 1em"><i>XShmAttach</i>
tells the server to attach to your shared memory segment. If
all goes well, you will get a non-zero status, back and your
XImage is ready for use.</p>
<p style="margin-left:9%; margin-top: 1em"><i>XShmDetach</i>
tells the server to detach from your shared memory
segment.</p>
<p style="margin-left:9%; margin-top: 1em"><i>XShmPutImage</i>
combines an image in memory with a shape of the specified
drawable. If XYBitmap format is used, the depth must be one,
or a ‘‘BadMatch’’ error results. The
foreground pixel in the GC defines the source for the one
bits in the image, and the background pixel defines the
source for the zero bits. For XYPixmap and ZPixmap, the
depth must match the depth of the drawable, or a
‘‘BadMatch’’ error results.</p>
<p style="margin-left:9%; margin-top: 1em"><i>XShmGetImage</i>
reads image data into a shared memory XImage where display
is the display of interest, drawable is the source drawable,
image is the destination XImage, x and y are offsets within
the drawable, and plane_mask defines which planes are to be
read.</p>
<p style="margin-left:9%; margin-top: 1em"><i>XShmCreateImage</i>
allocates the memory needed for an XImage structure for the
specified display but does not allocate space for the image
itself.</p>
<p style="margin-left:9%; margin-top: 1em"><i>XShmPixmapFormat</i>
gets the format for the server. If your application can deal
with the server pixmap data format, a shared memory segment
and shminfo structure are created.</p>
<p style="margin-left:9%; margin-top: 1em"><i>XShmCreatePixmap</i>
points to a pixmap which you can manipulate in all of the
usual ways, with the added bonus of being able to edit its
contents directly through the shared memory segment.</p>
<p style="margin-left:9%; margin-top: 1em"><i>XShmGetEventBase</i>
gets the completion event value.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><i>MIT-SHM - The
MIT Shared Memory Extension</i></p>
<hr/>
</body>
</html>
