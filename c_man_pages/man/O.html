<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:46:38 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>O</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">O</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#CONVENTIONS">CONVENTIONS</a><br/>
<a href="#IMPLEMENTATION">IMPLEMENTATION</a><br/>
<a href="#BUGS">BUGS</a><br/>
<a href="#AUTHOR">AUTHOR</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">O −
Generic interface to Perl Compiler backends</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">perl
−MO=[−q,]Backend[,OPTIONS] foo.pl</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">This is the
module that is used as a frontend to the Perl Compiler.</p>
<p style="margin-left:9%; margin-top: 1em">If you pass the
"−q" option to the module, then the STDOUT
filehandle will be redirected into the variable
$O::BEGIN_output during compilation. This has the effect
that any output printed to STDOUT by BEGIN blocks or
use’d modules will be stored in this variable rather
than printed. It’s useful with those backends which
produce output themselves ("Deparse",
"Concise" etc), so that their output is not
confused with that generated by the code being compiled.</p>
<p style="margin-left:9%; margin-top: 1em">The
"−qq" option behaves like
"−q", except that it also closes STDERR
after deparsing has finished. This suppresses the
"Syntax OK" message normally produced by perl.</p>
<h2>CONVENTIONS
<a name="CONVENTIONS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Most compiler
backends use the following conventions: OPTIONS consists of
a comma-separated list of words (no white-space). The
"−v" option usually puts the backend into
verbose mode. The "−ofile" option generates
output to <b>file</b> instead of stdout. The
"−D" option followed by various letters
turns on various internal debugging flags. See the
documentation for the desired backend (named
"B::Backend" for the example above) to find out
about that backend.</p>
<h2>IMPLEMENTATION
<a name="IMPLEMENTATION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">This section is
only necessary for those who want to write a compiler
backend module that can be used via this module.</p>
<p style="margin-left:9%; margin-top: 1em">The command-line
mentioned in the SYNOPSIS section corresponds to the Perl
code</p>
<p style="margin-left:9%; margin-top: 1em">use O
("Backend", OPTIONS);</p>
<p style="margin-left:9%; margin-top: 1em">The
"O::import" function loads the appropriate
"B::Backend" module and calls its
"compile" function, passing it OPTIONS. That
function is expected to return a sub reference which
we’ll call CALLBACK. Next, the
"compile-only" flag is switched on (equivalent to
the command-line option "−c") and a CHECK
block is registered which calls CALLBACK. Thus the main Perl
program mentioned on the command-line is read in, parsed and
compiled into internal syntax tree form. Since the
"−c" flag is set, the program does not start
running (excepting BEGIN blocks of course) but the CALLBACK
function registered by the compiler backend is called.</p>
<p style="margin-left:9%; margin-top: 1em">In summary, a
compiler backend module should be called "B::Foo"
for some foo and live in the appropriate directory for that
name. It should define a function called
"compile". When the user types</p>
<p style="margin-left:9%; margin-top: 1em">perl
−MO=Foo,OPTIONS foo.pl</p>
<p style="margin-left:9%; margin-top: 1em">that function is
called and is passed those OPTIONS (split on commas). It
should return a sub ref to the main compilation function.
After the user’s program is loaded and parsed, that
returned sub ref is invoked which can then go ahead and do
the compilation, usually by making use of the "B"
module’s functionality.</p>
<h2>BUGS
<a name="BUGS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
"−q" and "−qq" options
don’t work correctly if perl isn’t compiled with
PerlIO support : STDOUT will be closed instead of being
redirected to $O::BEGIN_output.</p>
<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Malcolm Beattie,
"mbeattie@sable.ox.ac.uk"</p>
<hr/>
</body>
</html>
