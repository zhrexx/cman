<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:42:15 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>COMP_CTX_NEW</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">COMP_CTX_NEW</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#RETURN VALUES">RETURN VALUES</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#COPYRIGHT">COPYRIGHT</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">COMP_CTX_new,
COMP_CTX_get_method, COMP_CTX_get_type, COMP_get_type,
COMP_get_name, COMP_CTX_free, COMP_compress_block,
COMP_expand_block, COMP_zlib, COMP_zlib_oneshot,
COMP_brotli, COMP_brotli_oneshot, COMP_zstd,
COMP_zstd_oneshot, BIO_f_zlib, BIO_f_brotli, BIO_f_zstd
− Compression support</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">#include
&lt;openssl/comp.h&gt; <br/>
COMP_CTX *COMP_CTX_new(COMP_METHOD *meth); <br/>
void COMP_CTX_free(COMP_CTX *ctx); <br/>
const COMP_METHOD *COMP_CTX_get_method(const COMP_CTX *ctx);
<br/>
int COMP_CTX_get_type(const COMP_CTX* comp); <br/>
int COMP_get_type(const COMP_METHOD *meth); <br/>
const char *COMP_get_name(const COMP_METHOD *meth); <br/>
int COMP_compress_block(COMP_CTX *ctx, unsigned char *out,
int olen, <br/>
unsigned char *in, int ilen); <br/>
int COMP_expand_block(COMP_CTX *ctx, unsigned char *out, int
olen, <br/>
unsigned char *in, int ilen); <br/>
COMP_METHOD *COMP_zlib(void); <br/>
COMP_METHOD *COMP_zlib_oneshot(void); <br/>
COMP_METHOD *COMP_brotli(void); <br/>
COMP_METHOD *COMP_brotli_oneshot(void); <br/>
COMP_METHOD *COMP_zstd(void); <br/>
COMP_METHOD *COMP_zstd_oneshot(void); <br/>
const BIO_METHOD *BIO_f_zlib(void); <br/>
const BIO_METHOD *BIO_f_brotli(void); <br/>
const BIO_METHOD *BIO_f_zstd(void);</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">These functions
provide compression support for OpenSSL. Compression is used
within the OpenSSL library to support TLS record and
certificate compression.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_CTX_new()</b>
is used to create a new <b>COMP_CTX</b> structure used to
compress data.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_CTX_free()</b>
is used to free the returned <b>COMP_CTX</b>. If the
argument is NULL, nothing is done.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_CTX_get_method()</b>
returns the <b>COMP_METHOD</b> of the given <i>ctx</i>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_CTX_get_type()</b>
and <b>COMP_get_type()</b> return the NID for the
<b>COMP_CTX</b> and <b>COMP_METHOD</b>, respectively.
<b>COMP_get_name()</b> returns the name of the algorithm of
the given <b>COMP_METHOD</b>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_compress_block()</b>
compresses b&lt;ilen&gt; bytes from the buffer <i>in</i>
into the buffer b&lt;out&gt; of size <i>olen</i> using the
algorithm specified by <i>ctx</i>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_expand_block()</b>
expands <i>ilen</i> bytes from the buffer <i>in</i> into the
buffer <i>out</i> of size <i>olen</i> using the algorithm
specified by <i>ctx</i>.</p>
<p style="margin-left:9%; margin-top: 1em">Methods
(<b>COMP_METHOD</b>) may be specified by one of these
functions. These functions will be available even if their
corresponding compression algorithm is not configured into
the OpenSSL library. In such a case, NULL will be
returned.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="82%">
<p><b>COMP_zlib()</b> returns a <b>COMP_METHOD</b> for
stream−based ZLIB compression.</p></td>
<td width="4%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="82%">
<p><b>COMP_zlib_oneshot()</b> returns a <b>COMP_METHOD</b>
for one−shot ZLIB compression.</p></td>
<td width="4%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="82%">
<p><b>COMP_brotli()</b> returns a <b>COMP_METHOD</b> for
stream−based Brotli compression.</p></td>
<td width="4%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="82%">
<p><b>COMP_brotli_oneshot()</b> returns a
<b>COMP_METHOD</b> for one−shot Brotli
compression.</p> </td>
<td width="4%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="82%">
<p><b>COMP_zstd()</b> returns a <b>COMP_METHOD</b> for
stream−based Zstandard compression.</p></td>
<td width="4%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="82%">
<p><b>COMP_zstd_oneshot()</b> returns a <b>COMP_METHOD</b>
for one−shot Zstandard compression.</p></td>
<td width="4%">
</td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em"><b>BIO_f_zlib()</b>,
<b>BIO_f_brotli() BIO_f_zstd()</b> each return a
<b>BIO_METHOD</b> that may be used to create a <b>BIO</b>
via <b>BIO_new(3)</b> to read and write compressed files or
streams. The functions are only available if the
corresponding algorithm is compiled into the OpenSSL
library. NULL may be returned if the algorithm fails to load
dynamically.</p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">While
compressing non−compressible data, the output may be
larger than the input. Care should be taken to size output
buffers appropriate for both compression and expansion.</p>
<p style="margin-left:9%; margin-top: 1em">Compression
support and compression algorithms must be enabled and built
into the library before use. Refer to the INSTALL.md file
when configuring OpenSSL.</p>
<p style="margin-left:9%; margin-top: 1em">ZLIB may be
found at &lt;https://zlib.net&gt;</p>
<p style="margin-left:9%; margin-top: 1em">Brotli may be
found at &lt;https://github.com/google/brotli&gt;.</p>
<p style="margin-left:9%; margin-top: 1em">Zstandard may be
found at &lt;https://github.com/facebook/zstd&gt;.</p>
<p style="margin-left:9%; margin-top: 1em">Compression of
SSL/TLS records is not recommended, as it has been shown to
lead to the CRIME attack
&lt;https://en.wikipedia.org/wiki/CRIME&gt;. It is disabled
by default, and may be enabled by clearing the
SSL_OP_NO_COMPRESSION option and setting the security level
as appropriate. See the documentation for the
<b>SSL_CTX_set_options</b>(3) and <b>SSL_set_options</b>(3)
functions.</p>
<p style="margin-left:9%; margin-top: 1em">Compression is
also used to support certificate compression as described in
RFC8879
&lt;https://datatracker.ietf.org/doc/html/rfc8879&gt;. It
may be disabled via the SSL_OP_NO_TX_CERTIFICATE_COMPRESSION
and SSL_OP_NO_RX_CERTIFICATE_COMPRESSION options of the
<b>SSL_CTX_set_options</b>(3) or <b>SSL_set_options</b>(3)
functions.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_zlib()</b>,
<b>COMP_brotli()</b> and <b>COMP_zstd()</b> are
stream−based compression methods. Internal state
(including compression dictionary) is maintained between
calls. If an error is returned, the stream is corrupted, and
should be closed.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_zlib_oneshot()</b>,
<b>COMP_brotli_oneshot()</b> and <b>COMP_zstd_oneshot()</b>
are not stream−based. These methods do not maintain
state between calls. An error in one call does not affect
future calls.</p>
<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_CTX_new()</b>
returns a <b>COMP_CTX</b> on success, or NULL on
failure.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_CTX_get_method()</b>,
<b>COMP_zlib()</b>, <b>COMP_zlib_oneshot()</b>,
<b>COMP_brotli()</b>, <b>COMP_brotli_oneshot()</b>,
<b>COMP_zstd()</b>, and <b>COMP_zstd_oneshot()</b> return a
<b>COMP_METHOD</b> on success, or NULL on failure.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_CTX_get_type()</b>
and <b>COMP_get_type()</b> return a NID value. On failure,
NID_undef is returned.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_compress_block()</b>
and <b>COMP_expand_block()</b> return the number of bytes
stored in the output buffer <i>out</i>. This may be 0. On
failure, −1 is returned.</p>
<p style="margin-left:9%; margin-top: 1em"><b>COMP_get_name()</b>
returns a <b>const char *</b> that must not be freed on
success, or NULL on failure.</p>
<p style="margin-left:9%; margin-top: 1em"><b>BIO_f_zlib()</b>,
<b>BIO_f_brotli()</b> and <b>BIO_f_zstd()</b> return NULL on
error, and a <b>BIO_METHOD</b> on success.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>BIO_new</b>(3),
<b>SSL_CTX_set_options</b>(3), <b>SSL_set_options</b>(3)</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Brotli and
Zstandard functions were added in OpenSSL 3.2.</p>
<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Copyright
2022−2024 The OpenSSL Project Authors. All Rights
Reserved.</p>
<p style="margin-left:9%; margin-top: 1em">Licensed under
the Apache License 2.0 (the "License"). You may
not use this file except in compliance with the License. You
can obtain a copy in the file LICENSE in the source
distribution or at
&lt;https://www.openssl.org/source/license.html&gt;.</p>
<hr/>
</body>
</html>
