<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:41:47 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>encode.h</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">encode.h</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#Macros">Macros</a><br/>
<a href="#Typedefs">Typedefs</a><br/>
<a href="#Enumerations">Enumerations</a><br/>
<a href="#Functions">Functions</a><br/>
<a href="#Detailed Description">Detailed Description</a><br/>
<a href="#Macro Definition Documentation">Macro Definition Documentation</a><br/>
<a href="##define BROTLI_DEFAULT_MODE BROTLI_MODE_GENERIC">#define BROTLI_DEFAULT_MODE BROTLI_MODE_GENERIC</a><br/>
<a href="##define BROTLI_DEFAULT_QUALITY 11">#define BROTLI_DEFAULT_QUALITY 11</a><br/>
<a href="##define BROTLI_DEFAULT_WINDOW 22">#define BROTLI_DEFAULT_WINDOW 22</a><br/>
<a href="##define BROTLI_MAX_INPUT_BLOCK_BITS 24">#define BROTLI_MAX_INPUT_BLOCK_BITS 24</a><br/>
<a href="##define BROTLI_MAX_QUALITY 11">#define BROTLI_MAX_QUALITY 11</a><br/>
<a href="##define BROTLI_MAX_WINDOW_BITS 24">#define BROTLI_MAX_WINDOW_BITS 24</a><br/>
<a href="##define BROTLI_MIN_INPUT_BLOCK_BITS 16">#define BROTLI_MIN_INPUT_BLOCK_BITS 16</a><br/>
<a href="##define BROTLI_MIN_QUALITY 0">#define BROTLI_MIN_QUALITY 0</a><br/>
<a href="##define BROTLI_MIN_WINDOW_BITS 10">#define BROTLI_MIN_WINDOW_BITS 10</a><br/>
<a href="#Typedef Documentation">Typedef Documentation</a><br/>
<a href="#typedef enum BrotliEncoderMode BrotliEncoderMode">typedef enum BrotliEncoderMode BrotliEncoderMode</a><br/>
<a href="#typedef enum BrotliEncoderOperation BrotliEncoderOperation">typedef enum BrotliEncoderOperation BrotliEncoderOperation</a><br/>
<a href="#typedef enum BrotliEncoderParameter BrotliEncoderParameter">typedef enum BrotliEncoderParameter BrotliEncoderParameter</a><br/>
<a href="#typedef struct BrotliEncoderStateStruct BrotliEncoderState">typedef struct BrotliEncoderStateStruct BrotliEncoderState</a><br/>
<a href="#Enumeration Type Documentation">Enumeration Type Documentation</a><br/>
<a href="#enum BrotliEncoderMode">enum BrotliEncoderMode</a><br/>
<a href="#enum BrotliEncoderOperation">enum BrotliEncoderOperation</a><br/>
<a href="#enum BrotliEncoderParameter">enum BrotliEncoderParameter</a><br/>
<a href="#Function Documentation">Function Documentation</a><br/>
<a href="#BROTLI_BOOL BrotliEncoderAttachPreparedDictionary (BrotliEncoderState *state, const BrotliEncoderPreparedDictionary * dictionary)">BROTLI_BOOL BrotliEncoderAttachPreparedDictionary (BrotliEncoderState *state, const BrotliEncoderPreparedDictionary * dictionary)</a><br/>
<a href="#BROTLI_BOOL BrotliEncoderCompress (int quality, int lgwin,BrotliEncoderMode mode, size_t input_size, const uint8_tinput_buffer[input_size], size_t * encoded_size, uint8_tencoded_buffer[*encoded_size])">BROTLI_BOOL BrotliEncoderCompress (int quality, int lgwin,BrotliEncoderMode mode, size_t input_size, const uint8_tinput_buffer[input_size], size_t * encoded_size, uint8_tencoded_buffer[*encoded_size])</a><br/>
<a href="#BROTLI_BOOL BrotliEncoderCompressStream (BrotliEncoderState * state,BrotliEncoderOperation op, size_t * available_in, const uint8_t **next_in, size_t * available_out, uint8_t ** next_out, size_t *total_out)">BROTLI_BOOL BrotliEncoderCompressStream (BrotliEncoderState * state,BrotliEncoderOperation op, size_t * available_in, const uint8_t **next_in, size_t * available_out, uint8_t ** next_out, size_t *total_out)</a><br/>
<a href="#BrotliEncoderState* BrotliEncoderCreateInstance (brotli_alloc_funcalloc_func, brotli_free_func free_func, void * opaque)">BrotliEncoderState* BrotliEncoderCreateInstance (brotli_alloc_funcalloc_func, brotli_free_func free_func, void * opaque)</a><br/>
<a href="#void BrotliEncoderDestroyInstance (BrotliEncoderState * state)">void BrotliEncoderDestroyInstance (BrotliEncoderState * state)</a><br/>
<a href="#BROTLI_BOOL BrotliEncoderHasMoreOutput (BrotliEncoderState * state)">BROTLI_BOOL BrotliEncoderHasMoreOutput (BrotliEncoderState * state)</a><br/>
<a href="#BROTLI_BOOL BrotliEncoderIsFinished (BrotliEncoderState * state)">BROTLI_BOOL BrotliEncoderIsFinished (BrotliEncoderState * state)</a><br/>
<a href="#size_t BrotliEncoderMaxCompressedSize (size_t input_size)">size_t BrotliEncoderMaxCompressedSize (size_t input_size)</a><br/>
<a href="#BrotliEncoderPreparedDictionary* BrotliEncoderPrepareDictionary(BrotliSharedDictionaryType type, size_t data_size, const uint8_tdata[data_size], int quality, brotli_alloc_func alloc_func,brotli_free_func free_func, void * opaque)">BrotliEncoderPreparedDictionary* BrotliEncoderPrepareDictionary(BrotliSharedDictionaryType type, size_t data_size, const uint8_tdata[data_size], int quality, brotli_alloc_func alloc_func,brotli_free_func free_func, void * opaque)</a><br/>
<a href="#BROTLI_BOOL BrotliEncoderSetParameter (BrotliEncoderState * state,BrotliEncoderParameter param, uint32_t value)">BROTLI_BOOL BrotliEncoderSetParameter (BrotliEncoderState * state,BrotliEncoderParameter param, uint32_t value)</a><br/>
<a href="#const uint8_t* BrotliEncoderTakeOutput (BrotliEncoderState * state, size_t* size)">const uint8_t* BrotliEncoderTakeOutput (BrotliEncoderState * state, size_t* size)</a><br/>
<a href="#uint32_t BrotliEncoderVersion (void)">uint32_t BrotliEncoderVersion (void)</a><br/>
<a href="#Author">Author</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">encode.h −
API for Brotli compression.</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<h3>Macros
<a name="Macros"></a>
</h3>
<p style="margin-left:14%; margin-top: 1em">#define
<b>BROTLI_DEFAULT_MODE BROTLI_MODE_GENERIC</b> <i><br/>
Default value for</i> <b>BROTLI_PARAM_MODE</b>
<i>parameter.</i> <br/>
#define <b>BROTLI_DEFAULT_QUALITY</b> 11 <i><br/>
Default value for</i> <b>BROTLI_PARAM_QUALITY</b>
<i>parameter.</i> <br/>
#define <b>BROTLI_DEFAULT_WINDOW</b> 22 <i><br/>
Default value for</i> <b>BROTLI_PARAM_LGWIN</b>
<i>parameter.</i> <br/>
#define <b>BROTLI_LARGE_MAX_WINDOW_BITS</b> 30 <i><br/>
Maximal value for</i> <b>BROTLI_PARAM_LGWIN</b> <i>parameter
in ’Large Window Brotli’ (32-bit).</i> <br/>
#define <b>BROTLI_MAX_INPUT_BLOCK_BITS</b> 24 <i><br/>
Maximal value for</i> <b>BROTLI_PARAM_LGBLOCK</b>
<i>parameter.</i> <br/>
#define <b>BROTLI_MAX_QUALITY</b> 11 <i><br/>
Maximal value for</i> <b>BROTLI_PARAM_QUALITY</b>
<i>parameter.</i> <br/>
#define <b>BROTLI_MAX_WINDOW_BITS</b> 24 <i><br/>
Maximal value for</i> <b>BROTLI_PARAM_LGWIN</b>
<i>parameter.</i> <br/>
#define <b>BROTLI_MIN_INPUT_BLOCK_BITS</b> 16 <i><br/>
Minimal value for</i> <b>BROTLI_PARAM_LGBLOCK</b>
<i>parameter.</i> <br/>
#define <b>BROTLI_MIN_QUALITY</b> 0 <i><br/>
Minimal value for</i> <b>BROTLI_PARAM_QUALITY</b>
<i>parameter.</i> <br/>
#define <b>BROTLI_MIN_WINDOW_BITS</b> 10 <i><br/>
Minimal value for</i> <b>BROTLI_PARAM_LGWIN</b>
<i>parameter.</i></p>
<h3>Typedefs
<a name="Typedefs"></a>
</h3>
<p style="margin-left:14%; margin-top: 1em">typedef enum
<b>BrotliEncoderMode BrotliEncoderMode</b> <i><br/>
Options for</i> <b>BROTLI_PARAM_MODE</b> <i>parameter.</i>
<br/>
typedef enum <b>BrotliEncoderOperation
BrotliEncoderOperation</b> <i><br/>
Operations that can be performed by streaming encoder.</i>
<br/>
typedef enum <b>BrotliEncoderParameter
BrotliEncoderParameter</b> <i><br/>
Options to be used with</i>
<b>BrotliEncoderSetParameter</b><i>.</i> <br/>
typedef struct BrotliEncoderStateStruct
<b>BrotliEncoderState</b> <i><br/>
Opaque structure that holds encoder state.</i></p>
<h3>Enumerations
<a name="Enumerations"></a>
</h3>
<h3>Functions
<a name="Functions"></a>
</h3>
<p style="margin-left:14%; margin-top: 1em"><i><b>BROTLI_BOOL
BrotliEncoderAttachPreparedDictionary</b></i>
(<b>BrotliEncoderState</b> *state, const
BrotliEncoderPreparedDictionary *dictionary) <i><br/>
Attaches a prepared dictionary of any type to the
encoder.</i> <b><br/>
BROTLI_BOOL BrotliEncoderCompress</b> (int quality, int
lgwin, <b>BrotliEncoderMode</b> mode, size_t input_size,
const uint8_t input_buffer[input_size], size_t
*encoded_size, uint8_t encoded_buffer[*encoded_size])
<i><br/>
Performs one-shot memory-to-memory compression.</i> <b><br/>
BROTLI_BOOL BrotliEncoderCompressStream</b>
(<b>BrotliEncoderState</b> *state,
<b>BrotliEncoderOperation</b> op, size_t *available_in,
const uint8_t **next_in, size_t *available_out, uint8_t
**next_out, size_t *total_out) <i><br/>
Compresses input stream to output stream.</i> <b><br/>
BrotliEncoderState</b> * <b>BrotliEncoderCreateInstance</b>
(<b>brotli_alloc_func</b> alloc_func,
<b>brotli_free_func</b> free_func, void *opaque) <i><br/>
Creates an instance of</i> <b>BrotliEncoderState</b> <i>and
initializes it.</i> <br/>
void <b>BrotliEncoderDestroyInstance</b>
(<b>BrotliEncoderState</b> *state) <i><br/>
Deinitializes and frees</i> <b>BrotliEncoderState</b>
<i>instance.</i> <b><br/>
BROTLI_BOOL BrotliEncoderHasMoreOutput</b>
(<b>BrotliEncoderState</b> *state) <i><br/>
Checks if encoder has more output.</i> <b><br/>
BROTLI_BOOL BrotliEncoderIsFinished</b>
(<b>BrotliEncoderState</b> *state) <i><br/>
Checks if encoder instance reached the final state.</i> <br/>
size_t <b>BrotliEncoderMaxCompressedSize</b> (size_t
input_size) <i><br/>
Calculates the output size bound for the given</i>
<tt>input_size</tt><i>.</i> <br/>
BrotliEncoderPreparedDictionary *
<b>BrotliEncoderPrepareDictionary</b>
(BrotliSharedDictionaryType type, size_t data_size, const
uint8_t data[data_size], int quality,
<b>brotli_alloc_func</b> alloc_func, <b>brotli_free_func</b>
free_func, void *opaque) <i><br/>
Prepares a shared dictionary from the given file format for
the encoder.</i> <b><br/>
BROTLI_BOOL BrotliEncoderSetParameter</b>
(<b>BrotliEncoderState</b> *state,
<b>BrotliEncoderParameter</b> param, uint32_t value) <i><br/>
Sets the specified parameter to the given encoder
instance.</i> <br/>
const uint8_t * <b>BrotliEncoderTakeOutput</b>
(<b>BrotliEncoderState</b> *state, size_t *size) <i><br/>
Acquires pointer to internal output buffer.</i> <br/>
uint32_t <b>BrotliEncoderVersion</b> (void) <i><br/>
Gets an encoder library version.</i></p>
<h2>Detailed Description
<a name="Detailed Description"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">API for Brotli
compression.</p>
<h2>Macro Definition Documentation
<a name="Macro Definition Documentation"></a>
</h2>
<h3>#define BROTLI_DEFAULT_MODE BROTLI_MODE_GENERIC
<a name="#define BROTLI_DEFAULT_MODE BROTLI_MODE_GENERIC"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Default value
for <b>BROTLI_PARAM_MODE</b> parameter.</p>
<h3>#define BROTLI_DEFAULT_QUALITY 11
<a name="#define BROTLI_DEFAULT_QUALITY 11"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Default value
for <b>BROTLI_PARAM_QUALITY</b> parameter.</p>
<h3>#define BROTLI_DEFAULT_WINDOW 22
<a name="#define BROTLI_DEFAULT_WINDOW 22"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Default value
for <b>BROTLI_PARAM_LGWIN</b> parameter.</p>
<h3>#define BROTLI_MAX_INPUT_BLOCK_BITS 24
<a name="#define BROTLI_MAX_INPUT_BLOCK_BITS 24"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Maximal value
for <b>BROTLI_PARAM_LGBLOCK</b> parameter.</p>
<h3>#define BROTLI_MAX_QUALITY 11
<a name="#define BROTLI_MAX_QUALITY 11"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Maximal value
for <b>BROTLI_PARAM_QUALITY</b> parameter.</p>
<h3>#define BROTLI_MAX_WINDOW_BITS 24
<a name="#define BROTLI_MAX_WINDOW_BITS 24"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Maximal value
for <b>BROTLI_PARAM_LGWIN</b> parameter.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Note:</b></p>
<p style="margin-left:14%;">equal to
<tt>BROTLI_MAX_DISTANCE_BITS</tt> constant.</p>
<h3>#define BROTLI_MIN_INPUT_BLOCK_BITS 16
<a name="#define BROTLI_MIN_INPUT_BLOCK_BITS 16"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Minimal value
for <b>BROTLI_PARAM_LGBLOCK</b> parameter.</p>
<h3>#define BROTLI_MIN_QUALITY 0
<a name="#define BROTLI_MIN_QUALITY 0"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Minimal value
for <b>BROTLI_PARAM_QUALITY</b> parameter.</p>
<h3>#define BROTLI_MIN_WINDOW_BITS 10
<a name="#define BROTLI_MIN_WINDOW_BITS 10"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Minimal value
for <b>BROTLI_PARAM_LGWIN</b> parameter.</p>
<h2>Typedef Documentation
<a name="Typedef Documentation"></a>
</h2>
<h3>typedef enum BrotliEncoderMode BrotliEncoderMode
<a name="typedef enum BrotliEncoderMode BrotliEncoderMode"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Options for
<b>BROTLI_PARAM_MODE</b> parameter.</p>
<h3>typedef enum BrotliEncoderOperation BrotliEncoderOperation
<a name="typedef enum BrotliEncoderOperation BrotliEncoderOperation"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Operations that
can be performed by streaming encoder.</p>
<h3>typedef enum BrotliEncoderParameter BrotliEncoderParameter
<a name="typedef enum BrotliEncoderParameter BrotliEncoderParameter"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Options to be
used with <b>BrotliEncoderSetParameter</b>.</p>
<h3>typedef struct BrotliEncoderStateStruct BrotliEncoderState
<a name="typedef struct BrotliEncoderStateStruct BrotliEncoderState"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Opaque structure
that holds encoder state. Allocated and initialized with
<b>BrotliEncoderCreateInstance</b>. Cleaned up and
deallocated with <b>BrotliEncoderDestroyInstance</b>.</p>
<h2>Enumeration Type Documentation
<a name="Enumeration Type Documentation"></a>
</h2>
<h3>enum BrotliEncoderMode
<a name="enum BrotliEncoderMode"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Options for
<b>BROTLI_PARAM_MODE</b> parameter.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Enumerator</b>
<i><br/>
BROTLI_MODE_GENERIC</i></p>
<p style="margin-left:18%;">Default compression mode. In
this mode compressor does not know anything in advance about
the properties of the input.</p>
<p style="margin-left:9%;"><i>BROTLI_MODE_TEXT</i></p>
<p style="margin-left:18%;">Compression mode for UTF-8
formatted text input.</p>
<p style="margin-left:9%;"><i>BROTLI_MODE_FONT</i></p>
<p style="margin-left:18%;">Compression mode used in WOFF
2.0.</p>
<h3>enum BrotliEncoderOperation
<a name="enum BrotliEncoderOperation"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Operations that
can be performed by streaming encoder.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Enumerator</b>
<i><br/>
BROTLI_OPERATION_PROCESS</i></p>
<p style="margin-left:18%;">Process input. Encoder may
postpone producing output, until it has processed enough
input.</p>
<p style="margin-left:9%;"><i>BROTLI_OPERATION_FLUSH</i></p>
<p style="margin-left:18%;">Produce output for all
processed input. Actual flush is performed when input stream
is depleted and there is enough space in output stream. This
means that client should repeat
<b>BROTLI_OPERATION_FLUSH</b> operation until
<tt>available_in</tt> becomes <tt>0</tt>, and
<b>BrotliEncoderHasMoreOutput</b> returns
<b>BROTLI_FALSE</b>. If output is acquired via
<b>BrotliEncoderTakeOutput</b>, then operation should be
repeated after output buffer is drained.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Warning:</b></p>
<p style="margin-left:14%;">Until flush is complete, client
<b>SHOULD NOT</b> swap, reduce or extend input stream.</p>
<p style="margin-left:9%; margin-top: 1em">When flush is
complete, output data will be sufficient for decoder to
reproduce all the given input. <i><br/>
BROTLI_OPERATION_FINISH</i></p>
<p style="margin-left:18%;">Finalize the stream. Actual
finalization is performed when input stream is depleted and
there is enough space in output stream. This means that
client should repeat <b>BROTLI_OPERATION_FINISH</b>
operation until <tt>available_in</tt> becomes <tt>0</tt>,
and <b>BrotliEncoderHasMoreOutput</b> returns
<b>BROTLI_FALSE</b>. If output is acquired via
<b>BrotliEncoderTakeOutput</b>, then operation should be
repeated after output buffer is drained.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Warning:</b></p>
<p style="margin-left:14%;">Until finalization is complete,
client <b>SHOULD NOT</b> swap, reduce or extend input
stream.</p>
<p style="margin-left:9%; margin-top: 1em">Helper function
<b>BrotliEncoderIsFinished</b> checks if stream is finalized
and output fully dumped.</p>
<p style="margin-left:9%; margin-top: 1em">Adding more
input data to finalized stream is impossible. <i><br/>
BROTLI_OPERATION_EMIT_METADATA</i></p>
<p style="margin-left:18%;">Emit metadata block to stream.
Metadata is opaque to Brotli: neither encoder, nor decoder
processes this data or relies on it. It may be used to pass
some extra information from encoder client to decoder client
without interfering with main data stream.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Note:</b></p>
<p style="margin-left:14%;">Encoder may emit empty metadata
blocks internally, to pad encoded stream to byte
boundary.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Warning:</b></p>
<p style="margin-left:14%;">Until emitting metadata is
complete client <b>SHOULD NOT</b> swap, reduce or extend
input stream.</p>
<p style="margin-left:14%; margin-top: 1em">The whole
content of input buffer is considered to be the content of
metadata block. Do <b>NOT</b> <i>append</i> metadata to
input stream, before it is depleted with other
operations.</p>
<p style="margin-left:9%; margin-top: 1em">Stream is
soft-flushed before metadata block is emitted. Metadata
block <b>MUST</b> be no longer than than 16MiB.</p>
<h3>enum BrotliEncoderParameter
<a name="enum BrotliEncoderParameter"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Options to be
used with <b>BrotliEncoderSetParameter</b>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Enumerator</b>
<i><br/>
BROTLI_PARAM_MODE</i></p>
<p style="margin-left:18%;">Tune encoder for specific
input. <b>BrotliEncoderMode</b> enumerates all available
values.</p>
<p style="margin-left:9%;"><i>BROTLI_PARAM_QUALITY</i></p>
<p style="margin-left:18%;">The main compression
speed-density lever. The higher the quality, the slower the
compression. Range is from <b>BROTLI_MIN_QUALITY</b> to
<b>BROTLI_MAX_QUALITY</b>.</p>
<p style="margin-left:9%;"><i>BROTLI_PARAM_LGWIN</i></p>
<p style="margin-left:18%;">Recommended sliding LZ77 window
size. Encoder may reduce this value, e.g. if input is much
smaller than window size.</p>
<p style="margin-left:9%; margin-top: 1em">Window size is
<tt>(1 &lt;&lt; value) - 16</tt>.</p>
<p style="margin-left:9%; margin-top: 1em">Range is from
<b>BROTLI_MIN_WINDOW_BITS</b> to
<b>BROTLI_MAX_WINDOW_BITS</b>. <i><br/>
BROTLI_PARAM_LGBLOCK</i></p>
<p style="margin-left:18%;">Recommended input block size.
Encoder may reduce this value, e.g. if input is much smaller
than input block size.</p>
<p style="margin-left:9%; margin-top: 1em">Range is from
<b>BROTLI_MIN_INPUT_BLOCK_BITS</b> to
<b>BROTLI_MAX_INPUT_BLOCK_BITS</b>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Note:</b></p>
<p style="margin-left:14%;">Bigger input block size allows
better compression, but consumes more memory. <br/>
The rough formula of memory used for temporary input storage
is <tt>3 &lt;&lt; lgBlock</tt>.</p>
<p style="margin-left:9%;"><i>BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING</i></p>
<p style="margin-left:18%;">Flag that affects usage of
’literal context modeling’ format feature. This
flag is a ’decoding-speed vs compression ratio’
trade-off.</p>
<p style="margin-left:9%;"><i>BROTLI_PARAM_SIZE_HINT</i></p>
<p style="margin-left:18%;">Estimated total input size for
all <b>BrotliEncoderCompressStream</b> calls. The default
value is 0, which means that the total input size is
unknown.</p>
<p style="margin-left:9%;"><i>BROTLI_PARAM_LARGE_WINDOW</i></p>
<p style="margin-left:18%;">Flag that determines if
’Large Window Brotli’ is used.</p>
<p style="margin-left:9%;"><i>BROTLI_PARAM_NPOSTFIX</i></p>
<p style="margin-left:18%;">Recommended number of postfix
bits (NPOSTFIX). Encoder may change this value.</p>
<p style="margin-left:9%; margin-top: 1em">Range is from 0
to <b>BROTLI_MAX_NPOSTFIX</b>. <i><br/>
BROTLI_PARAM_NDIRECT</i></p>
<p style="margin-left:18%;">Recommended number of direct
distance codes (NDIRECT). Encoder may change this value.</p>
<p style="margin-left:9%; margin-top: 1em">Range is from 0
to (15 &lt;&lt; NPOSTFIX) in steps of (1 &lt;&lt; NPOSTFIX).
<i><br/>
BROTLI_PARAM_STREAM_OFFSET</i></p>
<p style="margin-left:18%;">Number of bytes of input stream
already processed by a different instance.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Note:</b></p>
<p style="margin-left:14%;">It is important to configure
all the encoder instances with same parameters (except this
one) in order to allow all the encoded parts obey the same
restrictions implied by header.</p>
<p style="margin-left:9%; margin-top: 1em">If offset is not
0, then stream header is omitted. In any case output start
is byte aligned, so for proper streams stitching
’predecessor’ stream must be flushed.</p>
<p style="margin-left:9%; margin-top: 1em">Range is not
artificially limited, but all the values greater or equal to
maximal window size have the same effect. Values greater
than 2**30 are not allowed.</p>
<h2>Function Documentation
<a name="Function Documentation"></a>
</h2>
<h3>BROTLI_BOOL BrotliEncoderAttachPreparedDictionary (BrotliEncoderState *state, const BrotliEncoderPreparedDictionary * dictionary)
<a name="BROTLI_BOOL BrotliEncoderAttachPreparedDictionary (BrotliEncoderState *state, const BrotliEncoderPreparedDictionary * dictionary)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Attaches a
prepared dictionary of any type to the encoder. Can be used
multiple times to attach multiple dictionaries. The
dictionary type was determined by
BrotliEncoderPrepareDictionary. Multiple raw prefix
dictionaries and/or max 1 serialized dictionary with custom
words can be attached.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Returns:</b></p>
<p style="margin-left:14%;"><b>BROTLI_FALSE</b> in case of
error</p>
<p style="margin-left:14%; margin-top: 1em"><b>BROTLI_TRUE</b>
otherwise</p>
<h3>BROTLI_BOOL BrotliEncoderCompress (int quality, int lgwin,BrotliEncoderMode mode, size_t input_size, const uint8_tinput_buffer[input_size], size_t * encoded_size, uint8_tencoded_buffer[*encoded_size])
<a name="BROTLI_BOOL BrotliEncoderCompress (int quality, int lgwin,BrotliEncoderMode mode, size_t input_size, const uint8_tinput_buffer[input_size], size_t * encoded_size, uint8_tencoded_buffer[*encoded_size])"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Performs
one-shot memory-to-memory compression. Compresses the data
in <tt>input_buffer</tt> into <tt>encoded_buffer</tt>, and
sets <tt>*encoded_size</tt> to the compressed length.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Note:</b></p>
<p style="margin-left:14%;">If
<b>BrotliEncoderMaxCompressedSize</b>(<tt>input_size</tt>)
returns non-zero value, then output is guaranteed to be no
longer than that.</p>
<p style="margin-left:14%; margin-top: 1em">If
<tt>lgwin</tt> is greater than <b>BROTLI_MAX_WINDOW_BITS</b>
then resulting stream might be incompatible with RFC 7932;
to decode such streams, decoder should be configured with
<b>BROTLI_DECODER_PARAM_LARGE_WINDOW</b> = <tt>1</tt></p>
<p style="margin-left:9%; margin-top: 1em"><b>Parameters:</b></p>
<p style="margin-left:14%;"><i>quality</i> quality
parameter value, e.g. <b>BROTLI_DEFAULT_QUALITY</b> <i><br/>
lgwin</i> lgwin parameter value, e.g.
<b>BROTLI_DEFAULT_WINDOW</b> <i><br/>
mode</i> mode parameter value, e.g.
<b>BROTLI_DEFAULT_MODE</b> <i><br/>
input_size</i> size of <tt>input_buffer</tt> <i><br/>
input_buffer</i> input data buffer with at least
<tt>input_size</tt> addressable bytes <i><br/>
encoded_size</i> <b>in:</b> size of <tt>encoded_buffer</tt>;
<b><br/>
out:</b> length of compressed data written to
<tt>encoded_buffer</tt>, or <tt>0</tt> if compression fails
<i><br/>
encoded_buffer</i> compressed data destination buffer</p>
<p style="margin-left:9%; margin-top: 1em"><b>Returns:</b></p>
<p style="margin-left:14%;"><b>BROTLI_FALSE</b> in case of
compression error</p>
<p style="margin-left:14%; margin-top: 1em"><b>BROTLI_FALSE</b>
if output buffer is too small</p>
<p style="margin-left:14%; margin-top: 1em"><b>BROTLI_TRUE</b>
otherwise</p>
<h3>BROTLI_BOOL BrotliEncoderCompressStream (BrotliEncoderState * state,BrotliEncoderOperation op, size_t * available_in, const uint8_t **next_in, size_t * available_out, uint8_t ** next_out, size_t *total_out)
<a name="BROTLI_BOOL BrotliEncoderCompressStream (BrotliEncoderState * state,BrotliEncoderOperation op, size_t * available_in, const uint8_t **next_in, size_t * available_out, uint8_t ** next_out, size_t *total_out)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Compresses input
stream to output stream. The values <tt>*available_in</tt>
and <tt>*available_out</tt> must specify the number of bytes
addressable at <tt>*next_in</tt> and <tt>*next_out</tt>
respectively. When <tt>*available_out</tt> is <tt>0</tt>,
<tt>next_out</tt> is allowed to be <tt>NULL</tt>.</p>
<p style="margin-left:9%; margin-top: 1em">After each call,
<tt>*available_in</tt> will be decremented by the amount of
input bytes consumed, and the <tt>*next_in</tt> pointer will
be incremented by that amount. Similarly,
<tt>*available_out</tt> will be decremented by the amount of
output bytes written, and the <tt>*next_out</tt> pointer
will be incremented by that amount.</p>
<p style="margin-left:9%; margin-top: 1em"><tt>total_out</tt>,
if it is not a null-pointer, will be set to the number of
bytes compressed since the last <tt>state</tt>
initialization.</p>
<p style="margin-left:9%; margin-top: 1em">Internally
workflow consists of 3 tasks:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>1.</p></td>
<td width="2%"></td>
<td width="86%">
<p>(optionally) copy input data to internal buffer</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>2.</p></td>
<td width="2%"></td>
<td width="86%">
<p>actually compress data and (optionally) store it to
internal buffer</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>3.</p></td>
<td width="2%"></td>
<td width="86%">
<p>(optionally) copy compressed bytes from internal buffer
to output stream</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Whenever all 3
tasks can’t move forward anymore, or error occurs,
this method returns the control flow to caller.</p>
<p style="margin-left:9%; margin-top: 1em"><tt>op</tt> is
used to perform flush, finish the stream, or inject metadata
block. See <b>BrotliEncoderOperation</b> for more
information.</p>
<p style="margin-left:9%; margin-top: 1em">Flushing the
stream means forcing encoding of all input passed to encoder
and completing the current output block, so it could be
fully decoded by stream decoder. To perform flush set
<tt>op</tt> to <b>BROTLI_OPERATION_FLUSH</b>. Under some
circumstances (e.g. lack of output stream capacity) this
operation would require several calls to
<b>BrotliEncoderCompressStream</b>. The method must be
called again until both input stream is depleted and encoder
has no more output (see <b>BrotliEncoderHasMoreOutput</b>)
after the method is called.</p>
<p style="margin-left:9%; margin-top: 1em">Finishing the
stream means encoding of all input passed to encoder and
adding specific ’final’ marks, so stream decoder
could determine that stream is complete. To perform finish
set <tt>op</tt> to <b>BROTLI_OPERATION_FINISH</b>. Under
some circumstances (e.g. lack of output stream capacity)
this operation would require several calls to
<b>BrotliEncoderCompressStream</b>. The method must be
called again until both input stream is depleted and encoder
has no more output (see <b>BrotliEncoderHasMoreOutput</b>)
after the method is called.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Warning:</b></p>
<p style="margin-left:14%;">When flushing and finishing,
<tt>op</tt> should not change until operation is complete;
input stream should not be swapped, reduced or extended as
well.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Parameters:</b></p>
<p style="margin-left:14%;"><i>state</i> encoder instance
<i><br/>
op</i> requested operation <i><br/>
available_in</i> <b>in:</b> amount of available input;
<b><br/>
out:</b> amount of unused input <i><br/>
next_in</i> pointer to the next input byte <i><br/>
available_out</i> <b>in:</b> length of output buffer;
<b><br/>
out:</b> remaining size of output buffer <i><br/>
next_out</i> compressed output buffer cursor; can be
<tt>NULL</tt> if <tt>available_out</tt> is <tt>0</tt>
<i><br/>
total_out</i> number of bytes produced so far; can be
<tt>NULL</tt></p>
<p style="margin-left:9%; margin-top: 1em"><b>Returns:</b></p>
<p style="margin-left:14%;"><b>BROTLI_FALSE</b> if there
was an error</p>
<p style="margin-left:14%; margin-top: 1em"><b>BROTLI_TRUE</b>
otherwise</p>
<h3>BrotliEncoderState* BrotliEncoderCreateInstance (brotli_alloc_funcalloc_func, brotli_free_func free_func, void * opaque)
<a name="BrotliEncoderState* BrotliEncoderCreateInstance (brotli_alloc_funcalloc_func, brotli_free_func free_func, void * opaque)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Creates an
instance of <b>BrotliEncoderState</b> and initializes it.
<tt>alloc_func</tt> and <tt>free_func</tt> <b>MUST</b> be
both zero or both non-zero. In the case they are both zero,
default memory allocators are used. <tt>opaque</tt> is
passed to <tt>alloc_func</tt> and <tt>free_func</tt> when
they are called. <tt>free_func</tt> has to return without
doing anything when asked to free a NULL pointer.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Parameters:</b></p>
<p style="margin-left:14%;"><i>alloc_func</i> custom memory
allocation function <i><br/>
free_func</i> custom memory free function <i><br/>
opaque</i> custom memory manager handle</p>
<p style="margin-left:9%; margin-top: 1em"><b>Returns:</b></p>
<p style="margin-left:14%;"><tt>0</tt> if instance can not
be allocated or initialized</p>
<p style="margin-left:14%; margin-top: 1em">pointer to
initialized <b>BrotliEncoderState</b> otherwise</p>
<h3>void BrotliEncoderDestroyInstance (BrotliEncoderState * state)
<a name="void BrotliEncoderDestroyInstance (BrotliEncoderState * state)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Deinitializes
and frees <b>BrotliEncoderState</b> instance.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Parameters:</b></p>
<p style="margin-left:14%;"><i>state</i> decoder instance
to be cleaned up and deallocated</p>
<h3>BROTLI_BOOL BrotliEncoderHasMoreOutput (BrotliEncoderState * state)
<a name="BROTLI_BOOL BrotliEncoderHasMoreOutput (BrotliEncoderState * state)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Checks if
encoder has more output.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Parameters:</b></p>
<p style="margin-left:14%;"><i>state</i> encoder
instance</p>
<p style="margin-left:9%; margin-top: 1em"><b>Returns:</b></p>
<p style="margin-left:14%;"><b>BROTLI_TRUE</b>, if encoder
has some unconsumed output</p>
<p style="margin-left:14%; margin-top: 1em"><b>BROTLI_FALSE</b>
otherwise</p>
<h3>BROTLI_BOOL BrotliEncoderIsFinished (BrotliEncoderState * state)
<a name="BROTLI_BOOL BrotliEncoderIsFinished (BrotliEncoderState * state)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Checks if
encoder instance reached the final state.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Parameters:</b></p>
<p style="margin-left:14%;"><i>state</i> encoder
instance</p>
<p style="margin-left:9%; margin-top: 1em"><b>Returns:</b></p>
<p style="margin-left:14%;"><b>BROTLI_TRUE</b> if encoder
is in a state where it reached the end of the input and
produced all of the output</p>
<p style="margin-left:14%; margin-top: 1em"><b>BROTLI_FALSE</b>
otherwise</p>
<h3>size_t BrotliEncoderMaxCompressedSize (size_t input_size)
<a name="size_t BrotliEncoderMaxCompressedSize (size_t input_size)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Calculates the
output size bound for the given <tt>input_size</tt>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Warning:</b></p>
<p style="margin-left:14%;">Result is only valid if quality
is at least <tt>2</tt> and, in case
<b>BrotliEncoderCompressStream</b> was used, no flushes
(<b>BROTLI_OPERATION_FLUSH</b>) were performed.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Parameters:</b></p>
<p style="margin-left:14%;"><i>input_size</i> size of
projected input</p>
<p style="margin-left:9%; margin-top: 1em"><b>Returns:</b></p>
<p style="margin-left:14%;"><tt>0</tt> if result does not
fit <tt>size_t</tt></p>
<h3>BrotliEncoderPreparedDictionary* BrotliEncoderPrepareDictionary(BrotliSharedDictionaryType type, size_t data_size, const uint8_tdata[data_size], int quality, brotli_alloc_func alloc_func,brotli_free_func free_func, void * opaque)
<a name="BrotliEncoderPreparedDictionary* BrotliEncoderPrepareDictionary(BrotliSharedDictionaryType type, size_t data_size, const uint8_tdata[data_size], int quality, brotli_alloc_func alloc_func,brotli_free_func free_func, void * opaque)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Prepares a
shared dictionary from the given file format for the
encoder. <tt>alloc_func</tt> and <tt>free_func</tt>
<b>MUST</b> be both zero or both non-zero. In the case they
are both zero, default memory allocators are used.
<tt>opaque</tt> is passed to <tt>alloc_func</tt> and
<tt>free_func</tt> when they are called. <tt>free_func</tt>
has to return without doing anything when asked to free a
NULL pointer.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Parameters:</b></p>
<p style="margin-left:14%;"><i>type</i> type of dictionary
stored in data <i><br/>
data_size</i> size of <tt>data</tt> buffer <i><br/>
data</i> pointer to the dictionary data <i><br/>
quality</i> the maximum Brotli quality to prepare the
dictionary for, use BROTLI_MAX_QUALITY by default <i><br/>
alloc_func</i> custom memory allocation function <i><br/>
free_func</i> custom memory free function <i><br/>
opaque</i> custom memory manager handle</p>
<h3>BROTLI_BOOL BrotliEncoderSetParameter (BrotliEncoderState * state,BrotliEncoderParameter param, uint32_t value)
<a name="BROTLI_BOOL BrotliEncoderSetParameter (BrotliEncoderState * state,BrotliEncoderParameter param, uint32_t value)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Sets the
specified parameter to the given encoder instance.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Parameters:</b></p>
<p style="margin-left:14%;"><i>state</i> encoder instance
<i><br/>
param</i> parameter to set <i><br/>
value</i> new parameter value</p>
<p style="margin-left:9%; margin-top: 1em"><b>Returns:</b></p>
<p style="margin-left:14%;"><b>BROTLI_FALSE</b> if
parameter is unrecognized, or value is invalid</p>
<p style="margin-left:14%; margin-top: 1em"><b>BROTLI_FALSE</b>
if value of parameter can not be changed at current encoder
state (e.g. when encoding is started, window size might be
already encoded and therefore it is impossible to change
it)</p>
<p style="margin-left:14%; margin-top: 1em"><b>BROTLI_TRUE</b>
if value is accepted</p>
<p style="margin-left:9%; margin-top: 1em"><b>Warning:</b></p>
<p style="margin-left:14%;">invalid values might be
accepted in case they would not break encoding process.</p>
<h3>const uint8_t* BrotliEncoderTakeOutput (BrotliEncoderState * state, size_t* size)
<a name="const uint8_t* BrotliEncoderTakeOutput (BrotliEncoderState * state, size_t* size)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Acquires pointer
to internal output buffer. This method is used to make
language bindings easier and more efficient:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p style="margin-top: 1em">1.</p></td>
<td width="2%"></td>
<td width="86%">
<p style="margin-top: 1em">push data to
<b>BrotliEncoderCompressStream</b>, until
<b>BrotliEncoderHasMoreOutput</b> returns BROTLI_TRUE</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>2.</p></td>
<td width="2%"></td>
<td width="86%">
<p>use <b>BrotliEncoderTakeOutput</b> to peek bytes and
copy to language-specific entity</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Also this could
be useful if there is an output stream that is able to
consume all the provided data (e.g. when data is saved to
file system).</p>
<p style="margin-left:9%; margin-top: 1em"><b>Attention:</b></p>
<p style="margin-left:14%;">After every call to
<b>BrotliEncoderTakeOutput</b> <tt>*size</tt> bytes of
output are considered consumed for all consecutive calls to
the instance methods; returned pointer becomes invalidated
as well.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Note:</b></p>
<p style="margin-left:14%;">Encoder output is not
guaranteed to be contiguous. This means that after the
size-unrestricted call to <b>BrotliEncoderTakeOutput</b>,
immediate next call to <b>BrotliEncoderTakeOutput</b> may
return more data.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Parameters:</b></p>
<p style="margin-left:14%;"><i>state</i> encoder instance
<i><br/>
size</i> <b>in:</b> number of bytes caller is ready to take,
<tt>0</tt> if any amount could be handled; <b><br/>
out:</b> amount of data pointed by returned pointer and
considered consumed; <br/>
out value is never greater than in value, unless it is
<tt>0</tt></p>
<p style="margin-left:9%; margin-top: 1em"><b>Returns:</b></p>
<p style="margin-left:14%;">pointer to output data</p>
<h3>uint32_t BrotliEncoderVersion (void)
<a name="uint32_t BrotliEncoderVersion (void)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Gets an encoder
library version. Look at BROTLI_MAKE_HEX_VERSION for more
information.</p>
<h2>Author
<a name="Author"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Generated
automatically by Doxygen for Brotli from the source
code.</p>
<hr/>
</body>
</html>
