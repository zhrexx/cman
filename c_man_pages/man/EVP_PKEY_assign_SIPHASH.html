<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:42:34 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>EVP_PKEY_SET1_RSA</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">EVP_PKEY_SET1_RSA</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#WARNINGS">WARNINGS</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#RETURN VALUES">RETURN VALUES</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#COPYRIGHT">COPYRIGHT</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">EVP_PKEY_set1_RSA,
EVP_PKEY_set1_DSA, EVP_PKEY_set1_DH, EVP_PKEY_set1_EC_KEY,
EVP_PKEY_get1_RSA, EVP_PKEY_get1_DSA, EVP_PKEY_get1_DH,
EVP_PKEY_get1_EC_KEY, EVP_PKEY_get0_RSA, EVP_PKEY_get0_DSA,
EVP_PKEY_get0_DH, EVP_PKEY_get0_EC_KEY, EVP_PKEY_assign_RSA,
EVP_PKEY_assign_DSA, EVP_PKEY_assign_DH,
EVP_PKEY_assign_EC_KEY, EVP_PKEY_assign_POLY1305,
EVP_PKEY_assign_SIPHASH, EVP_PKEY_get0_hmac,
EVP_PKEY_get0_poly1305, EVP_PKEY_get0_siphash,
EVP_PKEY_get0, EVP_PKEY_type, EVP_PKEY_get_id,
EVP_PKEY_get_base_id, EVP_PKEY_set1_engine,
EVP_PKEY_get0_engine, EVP_PKEY_id, EVP_PKEY_base_id −
EVP_PKEY assignment functions</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">#include
&lt;openssl/evp.h&gt; <br/>
int EVP_PKEY_get_id(const EVP_PKEY *pkey); <br/>
int EVP_PKEY_get_base_id(const EVP_PKEY *pkey); <br/>
int EVP_PKEY_type(int type); <br/>
#define EVP_PKEY_id EVP_PKEY_get_id <br/>
#define EVP_PKEY_base_id EVP_PKEY_get_base_id</p>
<p style="margin-left:9%; margin-top: 1em">The following
functions have been deprecated since OpenSSL 3.0, and can be
hidden entirely by defining <b>OPENSSL_API_COMPAT</b> with a
suitable version value, see
<b>openssl_user_macros</b>(7):</p>
<p style="margin-left:9%; margin-top: 1em">int
EVP_PKEY_set1_RSA(EVP_PKEY *pkey, RSA *key); <br/>
int EVP_PKEY_set1_DSA(EVP_PKEY *pkey, DSA *key); <br/>
int EVP_PKEY_set1_DH(EVP_PKEY *pkey, DH *key); <br/>
int EVP_PKEY_set1_EC_KEY(EVP_PKEY *pkey, EC_KEY *key); <br/>
RSA *EVP_PKEY_get1_RSA(EVP_PKEY *pkey); <br/>
DSA *EVP_PKEY_get1_DSA(EVP_PKEY *pkey); <br/>
DH *EVP_PKEY_get1_DH(EVP_PKEY *pkey); <br/>
EC_KEY *EVP_PKEY_get1_EC_KEY(EVP_PKEY *pkey); <br/>
const unsigned char *EVP_PKEY_get0_hmac(const EVP_PKEY
*pkey, size_t *len); <br/>
const unsigned char *EVP_PKEY_get0_poly1305(const EVP_PKEY
*pkey, size_t *len); <br/>
const unsigned char *EVP_PKEY_get0_siphash(const EVP_PKEY
*pkey, size_t *len); <br/>
const RSA *EVP_PKEY_get0_RSA(const EVP_PKEY *pkey); <br/>
const DSA *EVP_PKEY_get0_DSA(const EVP_PKEY *pkey); <br/>
const DH *EVP_PKEY_get0_DH(const EVP_PKEY *pkey); <br/>
const EC_KEY *EVP_PKEY_get0_EC_KEY(const EVP_PKEY *pkey);
<br/>
void *EVP_PKEY_get0(const EVP_PKEY *pkey); <br/>
int EVP_PKEY_assign_RSA(EVP_PKEY *pkey, RSA *key); <br/>
int EVP_PKEY_assign_DSA(EVP_PKEY *pkey, DSA *key); <br/>
int EVP_PKEY_assign_DH(EVP_PKEY *pkey, DH *key); <br/>
int EVP_PKEY_assign_EC_KEY(EVP_PKEY *pkey, EC_KEY *key);
<br/>
int EVP_PKEY_assign_POLY1305(EVP_PKEY *pkey,
ASN1_OCTET_STRING *key); <br/>
int EVP_PKEY_assign_SIPHASH(EVP_PKEY *pkey,
ASN1_OCTET_STRING *key); <br/>
ENGINE *EVP_PKEY_get0_engine(const EVP_PKEY *pkey); <br/>
int EVP_PKEY_set1_engine(EVP_PKEY *pkey, ENGINE
*engine);</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_get_base_id()</b>
returns the type of <i>pkey</i>. For example an RSA key will
return <b>EVP_PKEY_RSA</b>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_get_id()</b>
returns the actual NID associated with <i>pkey</i> only if
the <i>pkey</i> type isn't implemented just in a
<b>provider</b>(7). Historically keys using the same
algorithm could use different NIDs. For example an RSA key
could use the NIDs corresponding to the NIDs
<b>NID_rsaEncryption</b> (equivalent to <b>EVP_PKEY_RSA</b>)
or <b>NID_rsa</b> (equivalent to <b>EVP_PKEY_RSA2</b>). The
use of alternative non−standard NIDs is now rare so
<b>EVP_PKEY_RSA2</b> et al are not often seen in practice.
<b>EVP_PKEY_get_id()</b> returns −1
(<b>EVP_PKEY_KEYMGMT</b>) if the <i>pkey</i> is only
implemented in a <b>provider</b>(7).</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_type()</b>
returns the underlying type of the NID <i>type</i>. For
example EVP_PKEY_type(EVP_PKEY_RSA2) will return
<b>EVP_PKEY_RSA</b>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_set1_RSA()</b>,
<b>EVP_PKEY_set1_DSA()</b>, <b>EVP_PKEY_set1_DH()</b> and
<b>EVP_PKEY_set1_EC_KEY()</b> set the key referenced by
<i>pkey</i> to <i>key</i>. These functions are deprecated.
Applications should instead use
<b>EVP_PKEY_fromdata</b>(3).</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_assign_RSA()</b>,
<b>EVP_PKEY_assign_DSA()</b>, <b>EVP_PKEY_assign_DH()</b>,
<b>EVP_PKEY_assign_EC_KEY()</b>,
<b>EVP_PKEY_assign_POLY1305()</b> and
<b>EVP_PKEY_assign_SIPHASH()</b> set the referenced key to
<i>key</i> however these use the supplied <i>key</i>
internally and so <i>key</i> will be freed when the parent
<i>pkey</i> is freed. These macros are deprecated.
Applications should instead read an EVP_PKEY directly using
the OSSL_DECODER APIs (see
<b>OSSL_DECODER_CTX_new_for_pkey</b>(3)), or construct an
EVP_PKEY from data using <b>EVP_PKEY_fromdata</b>(3).</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_get1_RSA()</b>,
<b>EVP_PKEY_get1_DSA()</b>, <b>EVP_PKEY_get1_DH()</b> and
<b>EVP_PKEY_get1_EC_KEY()</b> return the referenced key in
<i>pkey</i> or NULL if the key is not of the correct type.
The returned key must be freed after use. These functions
are deprecated. Applications should instead use the EVP_PKEY
directly where possible. If access to the low level key
parameters is required then applications should use
<b>EVP_PKEY_get_params</b>(3) and other similar functions.
To write an EVP_PKEY out use the OSSL_ENCODER APIs (see
<b>OSSL_ENCODER_CTX_new_for_pkey</b>(3)).</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_get0_hmac()</b>,
<b>EVP_PKEY_get0_poly1305()</b>,
<b>EVP_PKEY_get0_siphash()</b>, <b>EVP_PKEY_get0_RSA()</b>,
<b>EVP_PKEY_get0_DSA()</b>, <b>EVP_PKEY_get0_DH()</b> and
<b>EVP_PKEY_get0_EC_KEY()</b> return the referenced key in
<i>pkey</i> or NULL if the key is not of the correct type.
The reference count of the returned key is <b>not</b>
incremented and so the key must not be freed after use.
These functions are deprecated. Applications should instead
use the EVP_PKEY directly where possible. If access to the
low level key parameters is required then applications
should use <b>EVP_PKEY_get_params</b>(3) and other similar
functions. To write an EVP_PKEY out use the OSSL_ENCODER
APIs (see <b>OSSL_ENCODER_CTX_new_for_pkey</b>(3)).
<b>EVP_PKEY_get0()</b> returns a pointer to the legacy key
or NULL if the key is not legacy.</p>
<p style="margin-left:9%; margin-top: 1em">Note that if an
EVP_PKEY was not constructed using one of the deprecated
functions such as <b>EVP_PKEY_set1_RSA()</b>,
<b>EVP_PKEY_set1_DSA()</b>, <b>EVP_PKEY_set1_DH()</b> or
<b>EVP_PKEY_set1_EC_KEY()</b>, or via the similarly named
<b>EVP_PKEY_assign</b> macros described above then the
internal key will be managed by a provider (see
<b>provider</b>(7)). In that case the key returned by
<b>EVP_PKEY_get1_RSA()</b>, <b>EVP_PKEY_get1_DSA()</b>,
<b>EVP_PKEY_get1_DH()</b>, <b>EVP_PKEY_get1_EC_KEY()</b>,
<b>EVP_PKEY_get0_hmac()</b>,
<b>EVP_PKEY_get0_poly1305()</b>,
<b>EVP_PKEY_get0_siphash()</b>, <b>EVP_PKEY_get0_RSA()</b>,
<b>EVP_PKEY_get0_DSA()</b>, <b>EVP_PKEY_get0_DH()</b> or
<b>EVP_PKEY_get0_EC_KEY()</b> will be a cached copy of the
provider's key. Subsequent updates to the provider's key
will not be reflected back in the cached copy, and updates
made by an application to the returned key will not be
reflected back in the provider's key. Subsequent calls to
<b>EVP_PKEY_get1_RSA()</b>, <b>EVP_PKEY_get1_DSA()</b>,
<b>EVP_PKEY_get1_DH()</b> and <b>EVP_PKEY_get1_EC_KEY()</b>
will always return the cached copy returned by the first
call.</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_get0_engine()</b>
returns a reference to the ENGINE handling <i>pkey</i>. This
function is deprecated. Applications should use providers
instead of engines (see <b>provider</b>(7) for details).</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_set1_engine()</b>
sets the ENGINE handling <i>pkey</i> to <i>engine</i>. It
must be called after the key algorithm and components are
set up. If <i>engine</i> does not include an
<b>EVP_PKEY_METHOD</b> for <i>pkey</i> an error occurs. This
function is deprecated. Applications should use providers
instead of engines (see <b>provider</b>(7) for details).</p>
<h2>WARNINGS
<a name="WARNINGS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The following
functions are only reliable with <b>EVP_PKEY</b>s that have
been assigned an internal key with EVP_PKEY_assign_*():</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_get_id()</b>,
<b>EVP_PKEY_get_base_id()</b>, <b>EVP_PKEY_type()</b></p>
<p style="margin-left:9%; margin-top: 1em">For EVP_PKEY key
type checking purposes, <b>EVP_PKEY_is_a</b>(3) is more
generic.</p>
<p style="margin-left:9%; margin-top: 1em">For purposes of
retrieving the name of the <b>EVP_PKEY</b> the function
<b>EVP_PKEY_get0_type_name</b>(3) is more generally
useful.</p>
<p style="margin-left:9%; margin-top: 1em">The keys
returned from the functions <b>EVP_PKEY_get0_RSA()</b>,
<b>EVP_PKEY_get0_DSA()</b>, <b>EVP_PKEY_get0_DH()</b> and
<b>EVP_PKEY_get0_EC_KEY()</b> were changed to have a
"const" return type in OpenSSL 3.0. As described
above the keys returned may be cached copies of the key held
in a provider. Due to this, and unlike in earlier versions
of OpenSSL, they should be considered read−only copies
of the key. Updates to these keys will not be reflected back
in the provider side key. The <b>EVP_PKEY_get1_RSA()</b>,
<b>EVP_PKEY_get1_DSA()</b>, <b>EVP_PKEY_get1_DH()</b> and
<b>EVP_PKEY_get1_EC_KEY()</b> functions were not changed to
have a "const" return type in order that
applications can "free" the return value. However
applications should still consider them as read−only
copies.</p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">In accordance
with the OpenSSL naming convention the key obtained from or
assigned to the <i>pkey</i> using the <b>1</b> functions
must be freed as well as <i>pkey</i>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_assign_RSA()</b>,
<b>EVP_PKEY_assign_DSA()</b>, <b>EVP_PKEY_assign_DH()</b>,
<b>EVP_PKEY_assign_EC_KEY()</b>,
<b>EVP_PKEY_assign_POLY1305()</b> and
<b>EVP_PKEY_assign_SIPHASH()</b> are implemented as
macros.</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_assign_EC_KEY()</b>
looks at the curve name id to determine if the passed
<b>EC_KEY</b> is an <b>SM2</b>(7) key, and will set the
<b>EVP_PKEY</b> type to <b>EVP_PKEY_SM2</b> in that case,
instead of <b>EVP_PKEY_EC</b>.</p>
<p style="margin-left:9%; margin-top: 1em">Most
applications wishing to know a key type will simply call
<b>EVP_PKEY_get_base_id()</b> and will not care about the
actual type: which will be identical in almost all
cases.</p>
<p style="margin-left:9%; margin-top: 1em">Previous
versions of this document suggested using
EVP_PKEY_type(pkey−&gt;type) to determine the type of
a key. Since <b>EVP_PKEY</b> is now opaque this is no longer
possible: the equivalent is EVP_PKEY_get_base_id(pkey).</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_set1_engine()</b>
is typically used by an ENGINE returning an HSM key as part
of its routine to load a private key.</p>
<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_set1_RSA()</b>,
<b>EVP_PKEY_set1_DSA()</b>, <b>EVP_PKEY_set1_DH()</b> and
<b>EVP_PKEY_set1_EC_KEY()</b> return 1 for success or 0 for
failure.</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_get1_RSA()</b>,
<b>EVP_PKEY_get1_DSA()</b>, <b>EVP_PKEY_get1_DH()</b> and
<b>EVP_PKEY_get1_EC_KEY()</b> return the referenced key or
NULL if an error occurred.</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_assign_RSA()</b>,
<b>EVP_PKEY_assign_DSA()</b>, <b>EVP_PKEY_assign_DH()</b>,
<b>EVP_PKEY_assign_EC_KEY()</b>,
<b>EVP_PKEY_assign_POLY1305()</b> and
<b>EVP_PKEY_assign_SIPHASH()</b> return 1 for success and 0
for failure.</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_get_base_id()</b>,
<b>EVP_PKEY_get_id()</b> and <b>EVP_PKEY_type()</b> return a
key type or <b>NID_undef</b> (equivalently
<b>EVP_PKEY_NONE</b>) on error.</p>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_set1_engine()</b>
returns 1 for success and 0 for failure.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>EVP_PKEY_new</b>(3),
<b>SM2</b>(7)</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
<b>EVP_PKEY_id()</b> and <b>EVP_PKEY_base_id()</b> functions
were renamed to include "get" in their names in
OpenSSL 3.0, respectively. The old names are kept as
non−deprecated alias macros.</p>
<p style="margin-left:9%; margin-top: 1em">EVP_PKEY_set1_RSA,
EVP_PKEY_set1_DSA, EVP_PKEY_set1_DH, EVP_PKEY_set1_EC_KEY,
EVP_PKEY_get1_RSA, EVP_PKEY_get1_DSA, EVP_PKEY_get1_DH,
EVP_PKEY_get1_EC_KEY, EVP_PKEY_get0_RSA, EVP_PKEY_get0_DSA,
EVP_PKEY_get0_DH, EVP_PKEY_get0_EC_KEY, EVP_PKEY_assign_RSA,
EVP_PKEY_assign_DSA, EVP_PKEY_assign_DH,
EVP_PKEY_assign_EC_KEY, EVP_PKEY_assign_POLY1305,
EVP_PKEY_assign_SIPHASH, EVP_PKEY_get0_hmac,
EVP_PKEY_get0_poly1305, EVP_PKEY_get0_siphash,
EVP_PKEY_set1_engine and EVP_PKEY_get0_engine were
deprecated in OpenSSL 3.0.</p>
<p style="margin-left:9%; margin-top: 1em">The return value
from EVP_PKEY_get0_RSA, EVP_PKEY_get0_DSA, EVP_PKEY_get0_DH,
EVP_PKEY_get0_EC_KEY were made const in OpenSSL 3.0.</p>
<p style="margin-left:9%; margin-top: 1em">The function
<b>EVP_PKEY_set_alias_type()</b> was previously documented
on this page. It was removed in OpenSSL 3.0.</p>
<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Copyright
2002−2023 The OpenSSL Project Authors. All Rights
Reserved.</p>
<p style="margin-left:9%; margin-top: 1em">Licensed under
the Apache License 2.0 (the "License"). You may
not use this file except in compliance with the License. You
can obtain a copy in the file LICENSE in the source
distribution or at
&lt;https://www.openssl.org/source/license.html&gt;.</p>
<hr/>
</body>
</html>
