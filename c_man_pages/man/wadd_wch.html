<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:52:31 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>curs_add_wch</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">curs_add_wch</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#wadd_wch">wadd_wch</a><br/>
<a href="#wecho_wchar">wecho_wchar</a><br/>
<a href="#Forms-Drawing Characters">Forms-Drawing Characters</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#EXTENSIONS">EXTENSIONS</a><br/>
<a href="#TABSIZE">TABSIZE</a><br/>
<a href="#PORTABILITY">PORTABILITY</a><br/>
<a href="#Complex Characters">Complex Characters</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>add_wch</b>,
<b>wadd_wch</b>, <b>mvadd_wch</b>, <b>mvwadd_wch</b>,
<b>echo_wchar</b>, <b>wecho_wchar</b> − add a
<i>curses</i> complex character to a window, possibly
advancing the cursor</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;curses.h&gt;</b></p>
<p style="margin-left:9%; margin-top: 1em"><b>int
add_wch(const cchar_t *</b><i>wch</i><b>); <br/>
int wadd_wch(WINDOW *</b><i>win</i><b>, const cchar_t
*</b><i>wch</i><b>); <br/>
int mvadd_wch(int</b> <i>y</i><b>, int</b> <i>x</i><b>,
const cchar_t *</b><i>wch</i><b>); <br/>
int mvwadd_wch(WINDOW *</b><i>win</i><b>, int</b>
<i>y</i><b>, int</b> <i>x</i><b>, const cchar_t
*</b><i>wch</i><b>);</b></p>
<p style="margin-left:9%; margin-top: 1em"><b>int
echo_wchar(const cchar_t *</b><i>wch</i><b>); <br/>
int wecho_wchar(WINDOW *</b><i>win</i><b>, const cchar_t
*</b><i>wch</i><b>);</b></p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<h3>wadd_wch
<a name="wadd_wch"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em"><b>wadd_wch</b>
writes the complex character <i>wch</i> to the window
<i>win</i>, then may advance the cursor position,
analogously to the standard C library’s
<i>putwchar</i>(3). <b>ncurses</b>(3X) describes the
variants of this function.</p>
<p style="margin-left:9%; margin-top: 1em">Much behavior
depends on whether the wide characters in <i>wch</i> are
spacing or non-spacing; see subsection “Complex
Characters” below.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>If <i>wch</i> contains a spacing character, then any
character at the cursor is first removed. The complex
character <i>wch</i>, with its attributes and color pair
identifier, becomes the <i>base</i> of the <i>active complex
character</i>.</p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>If <i>wch</i> contains only non-spacing characters, they
are combined with the active complex character.
<i>curses</i> ignores its attributes and color pair
identifier, and does not advance the cursor.</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Further
non-spacing characters added with <b>wadd_wch</b> are not
written at the new cursor position but combine with the
active complex character until another spacing character is
written to the window or the cursor is moved.</p>
<p style="margin-left:9%; margin-top: 1em">If advancement
occurs at the right margin,</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em">the cursor automatically wraps
to the beginning of the next line, then,</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>if it was at the bottom of the scrolling region, and if
<b>scrollok</b>(3X) is enabled for <i>win</i>, the scrolling
region scrolls up one line.</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">If <i>wch</i> is
a backspace, carriage return, line feed, or tab, the cursor
moves appropriately within the window.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em">Backspace moves the cursor one
character left; at the left margin of a window, it does
nothing.</p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>Carriage return moves the cursor to the left margin on
the current line of the window.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>Line feed does a <b>clrtoeol</b>(3X), then advances as
if from the right margin.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>Tab advances the cursor to the next tab stop (possibly
on the next line); these are placed at every eighth column
by default. Alter the tab interval with the <b>TABSIZE</b>
extension; see <b>curs_variables</b>(3X).</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">If <i>wch</i> is
any other nonprintable character, it is drawn in printable
form using the same convention as <b>wunctrl</b>(3X).
Calling <b>win_wch</b>(3X) on the location of a nonprintable
character does not return the character itself, but its
<b>wunctrl</b>(3X) representation.</p>
<p style="margin-left:9%; margin-top: 1em">A <i>cchar_t</i>
can be copied from place to place using <b>win_wch</b>(3X)
and <b>wadd_wch</b>.</p>
<h3>wecho_wchar
<a name="wecho_wchar"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em"><b>echo_wchar</b>
and <b>wecho_wchar</b> are equivalent to calling
(<b>w</b>)<b>add_wch</b> followed by
(<b>w</b>)<b>refresh</b>. <i>curses</i> interprets these
functions as a hint that only a single (complex) character
is being output; for non-control characters, a considerable
performance gain may be enjoyed by employing them.</p>
<h3>Forms-Drawing Characters
<a name="Forms-Drawing Characters"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em"><i>curses</i>
defines macros starting with <b>WACS_</b> that can be used
with <b>wadd_wch</b> to write line-drawing and other special
characters to the screen. <i>ncurses</i> terms these
<i>forms-drawing characters.</i> The ACS default listed
below is used if the <b>acs_chars</b> (<b>acsc</b>)
<i>terminfo</i> capability does not define a
terminal-specific replacement for it, or if the terminal and
locale configuration requires Unicode to access these
characters but the library is unable to use Unicode. The
“acsc char” column corresponds to how the
characters are specified in the <b>acs_chars</b>
(<b>acsc</b>) string capability, and the characters in it
may appear on the screen if the terminal type’s
database entry incorrectly advertises ACS support. The name
“ACS” originates in the Alternate Character Set
feature of the DEC VT100 terminal.</p>
<p style="margin-left:9%; margin-top: 1em">The
wide-character configuration of <i>ncurses</i> also defines
symbols for thick lines (<b>acsc</b> “J” to
“V”):</p>
<p style="margin-left:9%; margin-top: 1em">and for
double-lines (<b>acsc</b> “A” to
“I”):</p>
<p style="margin-left:9%; margin-top: 1em">Unicode’s
descriptions for these characters differs slightly from
<i>ncurses</i>, by introducing the term “light”
(along with less important details). Here are its
descriptions for the normal, thick, and double horizontal
lines:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="48%">
<p style="margin-top: 1em">U+2500 BOX DRAWINGS LIGHT
HORIZONTAL</p> </td>
<td width="38%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="48%">
<p>U+2501 BOX DRAWINGS HEAVY HORIZONTAL</p></td>
<td width="38%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="48%">
<p>U+2550 BOX DRAWINGS DOUBLE HORIZONTAL</p></td>
<td width="38%">
</td></tr>
</table>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">These functions
return <b>OK</b> on success and <b>ERR</b> on failure. In
<i>ncurses</i>, <b>wadd_wch</b> returns <b>ERR</b> if</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em"><i>win</i> is <b>NULL</b>,</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>wrapping to a new line is impossible because
<b>scrollok</b>(3X) has not been called on <i>win</i> when
writing to its bottom right location is attempted, or</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>it is not possible to add a complete character at the
cursor position.</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Functions
prefixed with “mv” first perform cursor movement
and fail if the position (<i>y</i>, <i>x</i>) is outside the
window boundaries.</p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>add_wch</b>,
<b>mvadd_wch</b>, <b>mvwadd_wch</b>, and <b>echo_wchar</b>
may be implemented as macros.</p>
<h2>EXTENSIONS
<a name="EXTENSIONS"></a>
</h2>
<h3>TABSIZE
<a name="TABSIZE"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">The
<b>TABSIZE</b> variable is implemented in SVr4 and other
versions of <i>curses</i>, but is not specified by X/Open
Curses (see <b>curs_variables</b>(3X)).</p>
<h2>PORTABILITY
<a name="PORTABILITY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">These functions
are described in X/Open Curses, Issue 4. It specifies no
error conditions for them.</p>
<p style="margin-left:9%; margin-top: 1em">The defaults
specified for forms-drawing characters apply in the POSIX
locale. X/Open Curses makes it clear that the WACS_ symbols
should be defined as a pointer to <b>cchar_t</b> data, e.g.,
in the discussion of <b>border_set</b>. A few
implementations are problematic:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em">NetBSD curses defines the
symbols as a <b>wchar_t</b> within a <b>cchar_t</b>.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>HP-UX curses equates some of the <b>ACS_</b> symbols to
the analogous <b>WACS_</b> symbols as if the <b>ACS_</b>
symbols were wide characters. The misdefined symbols are the
arrows and other symbols which are not used for
line-drawing.</p> </td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">X/Open Curses
does not specify symbols for thick- or double-lines. SVr4
curses implementations defined their line-drawing symbols in
terms of intermediate symbols. This implementation extends
those symbols, providing new definitions which are not in
the SVr4 implementations.</p>
<p style="margin-left:9%; margin-top: 1em">Not all
Unicode-capable terminals provide support for VT100-style
alternate character sets (i.e., the <b>acsc</b> capability),
with their corresponding line-drawing characters. X/Open
Curses did not address the aspect of integrating Unicode
with line-drawing characters. Existing implementations of
Unix curses (AIX, HP-UX, Solaris) use only the <b>acsc</b>
character-mapping to provide this feature. As a result,
those implementations can only use single-byte line-drawing
characters. <i>ncurses</i> 5.3 (2002) provided a table of
Unicode values to solve these problems. NetBSD curses
incorporated that table in 2010.</p>
<p style="margin-left:9%; margin-top: 1em">In this
implementation, the Unicode values are used instead of the
terminal description’s <b>acsc</b> mapping as
discussed in <b>ncurses</b>(3X) for the environment variable
<i>NCURSES_NO_UTF8_ACS</i>. In contrast, for the same cases,
the line-drawing characters described in <b>addch</b>(3X)
will use only the ASCII default values.</p>
<p style="margin-left:9%; margin-top: 1em">Having Unicode
available does not solve all of the problems with
line-drawing for curses:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em">The closest Unicode equivalents
to the VT100 graphics <i>S1</i>, <i>S3</i>, <i>S7</i> and
<i>S9</i> frequently are not displayed at the regular
intervals which the terminal used.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>The <i>lantern</i> is a special case. It originated with
the AT&amp;T 4410 terminal in the early 1980s. There is no
accessible documentation depicting the lantern symbol on the
AT&amp;T terminal.</p></td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">Lacking
documentation, most readers assume that a <i>storm
lantern</i> was intended. But there are several
possibilities, all with problems.</p>
<p style="margin-left:14%; margin-top: 1em">Unicode 6.0
(2010) does provide two lantern symbols: U+1F383 and
U+1F3EE. Those were not available in 2002, and are
irrelevant since they lie outside the BMP and as a result
are not generally available in terminals. They are not storm
lanterns, in any case.</p>
<p style="margin-left:14%; margin-top: 1em">Most <i>storm
lanterns</i> have a tapering glass chimney (to guard against
tipping); some have a wire grid protecting the chimney.</p>
<p style="margin-left:14%; margin-top: 1em">For the
tapering appearance, ☃ U+2603 was adequate. In use on
a terminal, no one can tell what the image represents.
Unicode calls it a snowman.</p>
<p style="margin-left:14%; margin-top: 1em">Others have
suggested these alternatives: § U+00A7 (section mark),
Θ U+0398 (theta), Φ U+03A6 (phi), δ U+03B4
(delta), ⌧ U+2327 (x in a rectangle), ╬ U+256C
(forms double vertical and horizontal), and ☒ U+2612
(ballot box with x).</p>
<h3>Complex Characters
<a name="Complex Characters"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">The complex
character type <i>cchar_t</i> can store more than one wide
character (<i>wchar_t</i>). X/Open Curses does not mention
this possibility, specifying behavior only where <i>wch</i>
is a single character, either spacing or non-spacing.</p>
<p style="margin-left:9%; margin-top: 1em"><i>ncurses</i>
assumes that <i>wch</i> is constructed using
<b>setcchar</b>(3X), and in turn that the result</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em">contains at most one spacing
character at the beginning of its list of wide characters,
and zero or more non-spacing characters, or</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>holds one non-spacing character.</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">In the latter
case, <i>ncurses</i> adds the non-spacing character to the
active complex character.</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">These functions
were initially specified by X/Open Curses, Issue 4. The
System V Interface Definition, Version 4 (1995),
specified functions named <i>waddwch</i> and
<i>wechowchar</i> (and the usual variants). These were later
additions to SVr4.<i>x</i>, not appearing in the first SVr4
(1989). They differed from X/Open’s <i>wadd_wch</i>
and <i>wecho_wchar</i> in that they each took an argument of
type <i>wchar_t</i> instead of <i>cchar_t</i>.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>curs_addch</b>(3X)
describes comparable functions of the <i>ncurses</i> library
in its non-wide-character configuration.</p>
<p style="margin-left:9%; margin-top: 1em"><b>curses</b>(3X),
<b>curs_addwstr</b>(3X), <b>curs_add_wchstr</b>(3X),
<b>curs_attr</b>(3X), <b>curs_clear</b>(3X),
<b>curs_getcchar</b>(3X), <b>curs_outopts</b>(3X),
<b>curs_refresh</b>(3X), <b>curs_variables</b>(3X),
<b>putwc</b>(3)</p>
<hr/>
</body>
</html>
