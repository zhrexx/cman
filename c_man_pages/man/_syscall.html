<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:40:38 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>_syscall</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">_syscall</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#FILES">FILES</a><br/>
<a href="#STANDARDS">STANDARDS</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#EXAMPLES">EXAMPLES</a><br/>
<a href="#Sample output">Sample output</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">_syscall −
invoking a system call without library support
(OBSOLETE)</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;linux/unistd.h&gt;</b></p>
<p style="margin-left:9%; margin-top: 1em">A _syscall
macro</p>
<p style="margin-left:9%; margin-top: 1em">desired system
call</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The important
thing to know about a system call is its prototype. You need
to know how many arguments, their types, and the function
return type. There are seven macros that make the actual
call into the system easier. They have the form:</p>
<p style="margin-left:14%; margin-top: 1em">_syscall<i>X</i>(<i>type</i>,<i>name</i>,<i>type1</i>,<i>arg1</i>,<i>type2</i>,<i>arg2</i>,...)</p>
<p style="margin-left:9%; margin-top: 1em">where</p>
<p style="margin-left:18%; margin-top: 1em"><i>X</i> is
0–6, which are the number of arguments taken by the
system call</p>
<p style="margin-left:18%; margin-top: 1em"><i>type</i> is
the return type of the system call</p>
<p style="margin-left:18%; margin-top: 1em"><i>name</i> is
the name of the system call</p>
<p style="margin-left:18%; margin-top: 1em"><i>typeN</i> is
the Nth argument’s type</p>
<p style="margin-left:18%; margin-top: 1em"><i>argN</i> is
the name of the Nth argument</p>
<p style="margin-left:9%; margin-top: 1em">These macros
create a function called <i>name</i> with the arguments you
specify. Once you include the _syscall() in your source
file, you call the system call by <i>name</i>.</p>
<h2>FILES
<a name="FILES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><i>/usr/include/linux/unistd.h</i></p>
<h2>STANDARDS
<a name="STANDARDS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Linux.</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Starting around
Linux 2.6.18, the _syscall macros were removed from header
files supplied to user space. Use <b>syscall</b>(2) instead.
(Some architectures, notably ia64, never provided the
_syscall macros; on those architectures, <b>syscall</b>(2)
was always required.)</p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The _syscall()
macros <i>do not</i> produce a prototype. You may have to
create one, especially for C++ users.</p>
<p style="margin-left:9%; margin-top: 1em">System calls are
not required to return only positive or negative error
codes. You need to read the source to be sure how it will
return errors. Usually, it is the negative of a standard
error code, for example, −<i>EPERM</i>. The _syscall()
macros will return the result <i>r</i> of the system call
when <i>r</i> is nonnegative, but will return −1 and
set the variable <i>errno</i> to −<i>r</i> when
<i>r</i> is negative. For the error codes, see
<b>errno</b>(3).</p>
<p style="margin-left:9%; margin-top: 1em">When defining a
system call, the argument types <i>must</i> be passed
by-value or by-pointer (for aggregates like structs).</p>
<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">#include
&lt;stdio.h&gt; <br/>
#include &lt;stdlib.h&gt; <br/>
#include &lt;errno.h&gt; <br/>
#include &lt;linux/unistd.h&gt; /* for _syscallX
macros/related stuff */ <br/>
#include &lt;linux/kernel.h&gt; /* for struct sysinfo */
<br/>
_syscall1(int, sysinfo, struct sysinfo *, info); <br/>
int <br/>
main(void) <br/>
{ <br/>
struct sysinfo s_info; <br/>
int error; <br/>
error = sysinfo(&amp;s_info); <br/>
printf("code error = %d\n", error); <br/>
printf("Uptime = %lds\nLoad: 1 min %lu / 5 min %lu / 15
min %lu\n" <br/>
"RAM: total %lu / free %lu / shared %lu\n" <br/>
"Memory in buffers = %lu\nSwap: total %lu / free
%lu\n" <br/>
"Number of processes = %d\n", <br/>
s_info.uptime, s_info.loads[0], <br/>
s_info.loads[1], s_info.loads[2], <br/>
s_info.totalram, s_info.freeram, <br/>
s_info.sharedram, s_info.bufferram, <br/>
s_info.totalswap, s_info.freeswap, <br/>
s_info.procs); <br/>
exit(EXIT_SUCCESS); <br/>
}</p>
<h3>Sample output
<a name="Sample output"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">code error = 0
<br/>
uptime = 502034s <br/>
Load: 1 min 13376 / 5 min 5504 / 15 min 1152 <br/>
RAM: total 15343616 / free 827392 / shared 8237056 <br/>
Memory in buffers = 5066752 <br/>
Swap: total 27881472 / free 24698880 <br/>
Number of processes = 40</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>intro</b>(2),
<b>syscall</b>(2), <b>errno</b>(3)</p>
<hr/>
</body>
</html>
