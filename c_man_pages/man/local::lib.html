<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:48:03 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>local::lib</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">local::lib</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#The bootstrapping technique">The bootstrapping technique</a><br/>
<a href="#Differences when using this module under Win32">Differences when using this module under Win32</a><br/>
<a href="#RATIONALE">RATIONALE</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#CREATING A SELF−CONTAINED SET OF MODULES">CREATING A SELF−CONTAINED SET OF MODULES</a><br/>
<a href="#IMPORT OPTIONS">IMPORT OPTIONS</a><br/>
<a href="#−−deactivate">−−deactivate</a><br/>
<a href="#−−deactivate−all">−−deactivate−all</a><br/>
<a href="#−−quiet">−−quiet</a><br/>
<a href="#−−always">−−always</a><br/>
<a href="#−−shelltype">−−shelltype</a><br/>
<a href="#−−no−create">−−no−create</a><br/>
<a href="#CLASS METHODS">CLASS METHODS</a><br/>
<a href="#ensure_dir_structure_for">ensure_dir_structure_for</a><br/>
<a href="#print_environment_vars_for">print_environment_vars_for</a><br/>
<a href="#build_environment_vars_for">build_environment_vars_for</a><br/>
<a href="#setup_env_hash_for">setup_env_hash_for</a><br/>
<a href="#active_paths">active_paths</a><br/>
<a href="#install_base_perl_path">install_base_perl_path</a><br/>
<a href="#lib_paths_for">lib_paths_for</a><br/>
<a href="#install_base_bin_path">install_base_bin_path</a><br/>
<a href="#installer_options_for">installer_options_for</a><br/>
<a href="#resolve_empty_path">resolve_empty_path</a><br/>
<a href="#resolve_home_path">resolve_home_path</a><br/>
<a href="#resolve_relative_path">resolve_relative_path</a><br/>
<a href="#resolve_path">resolve_path</a><br/>
<a href="#OBJECT INTERFACE">OBJECT INTERFACE</a><br/>
<a href="#new">new</a><br/>
<a href="#ATTRIBUTES">ATTRIBUTES</a><br/>
<a href="#roots">roots</a><br/>
<a href="#inc">inc</a><br/>
<a href="#libs">libs</a><br/>
<a href="#bins">bins</a><br/>
<a href="#extra">extra</a><br/>
<a href="#no_create">no_create</a><br/>
<a href="#OBJECT METHODS">OBJECT METHODS</a><br/>
<a href="#clone">clone</a><br/>
<a href="#activate">activate</a><br/>
<a href="#deactivate">deactivate</a><br/>
<a href="#deactivate_all">deactivate_all</a><br/>
<a href="#environment_vars_string">environment_vars_string</a><br/>
<a href="#build_environment_vars">build_environment_vars</a><br/>
<a href="#setup_env_hash">setup_env_hash</a><br/>
<a href="#setup_local_lib">setup_local_lib</a><br/>
<a href="#A WARNING ABOUT UNINST=1">A WARNING ABOUT UNINST=1</a><br/>
<a href="#LIMITATIONS">LIMITATIONS</a><br/>
<a href="#TROUBLESHOOTING">TROUBLESHOOTING</a><br/>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<a href="#SUPPORT">SUPPORT</a><br/>
<a href="#AUTHOR">AUTHOR</a><br/>
<a href="#CONTRIBUTORS">CONTRIBUTORS</a><br/>
<a href="#COPYRIGHT">COPYRIGHT</a><br/>
<a href="#LICENSE">LICENSE</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">local::lib
− create and use a local lib/ for perl modules with
PERL5LIB</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">In code
−</p>
<p style="margin-left:9%; margin-top: 1em">use local::lib;
# sets up a local lib at ˜/perl5 <br/>
use local::lib '˜/foo'; # same, but ˜/foo <br/>
# Or... <br/>
use FindBin; <br/>
use local::lib "$FindBin::Bin/../support"; #
app−local support library</p>
<p style="margin-left:9%; margin-top: 1em">From the shell
−</p>
<p style="margin-left:9%; margin-top: 1em"># Install LWP
and its missing dependencies to the '˜/perl5' directory
<br/>
perl −MCPAN −Mlocal::lib −e
'CPAN::install(LWP)' <br/>
# Just print out useful shell commands <br/>
$ perl −Mlocal::lib <br/>
PERL_MB_OPT='−−install_base
/home/username/perl5'; export PERL_MB_OPT; <br/>
PERL_MM_OPT='INSTALL_BASE=/home/username/perl5'; export
PERL_MM_OPT; <br/>
PERL5LIB="/home/username/perl5/lib/perl5"; export
PERL5LIB; <br/>
PATH="/home/username/perl5/bin:$PATH"; export
PATH; <br/>

PERL_LOCAL_LIB_ROOT="/home/usename/perl5:$PERL_LOCAL_LIB_ROOT";
export PERL_LOCAL_LIB_ROOT;</p>
<p style="margin-left:9%; margin-top: 1em">From a
<i>.bash_profile</i> or <i>.bashrc</i> file −</p>
<p style="margin-left:9%; margin-top: 1em">eval
"$(perl −I$HOME/perl5/lib/perl5
−Mlocal::lib)"</p>
<h3>The bootstrapping technique
<a name="The bootstrapping technique"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">A typical way to
install local::lib is using what is known as the
"bootstrapping" technique. You would do this if
your system administrator hasn't already installed
local::lib. In this case, you'll need to install local::lib
in your home directory.</p>
<p style="margin-left:9%; margin-top: 1em">Even if you do
have administrative privileges, you will still want to set
up your environment variables, as discussed in step 4.
Without this, you would still install the modules into the
system CPAN installation and also your Perl scripts will not
use the lib/ path you bootstrapped with local::lib.</p>
<p style="margin-left:9%; margin-top: 1em">By default
local::lib installs itself and the CPAN modules into
˜/perl5.</p>
<p style="margin-left:9%; margin-top: 1em">Windows users
must also see "Differences when using this module under
Win32".</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>1.</p></td>
<td width="2%"></td>
<td width="82%">
<p>Download and unpack the local::lib tarball from CPAN
(search for "Download" on the CPAN page about
local::lib). Do this as an ordinary user, not as root or
administrator. Unpack the file in your home directory or in
any other convenient location.</p></td>
<td width="4%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>2.</p></td>
<td width="2%"></td>
<td width="82%">
<p>Run this:</p></td>
<td width="4%">
</td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">perl
Makefile.PL −−bootstrap</p>
<p style="margin-left:14%; margin-top: 1em">If the system
asks you whether it should automatically configure as much
as possible, you would typically answer yes.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p style="margin-top: 1em">3.</p></td>
<td width="2%"></td>
<td width="78%">
<p style="margin-top: 1em">Run this: (local::lib assumes
you have make installed on your system)</p></td>
<td width="8%">
</td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">make test
&amp;&amp; make install</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p style="margin-top: 1em">4.</p></td>
<td width="2%"></td>
<td width="86%">
<p style="margin-top: 1em">Now we need to setup the
appropriate environment variables, so that Perl starts using
our newly generated lib/ directory. If you are using bash or
any other Bourne shells, you can add this to your shell
startup script this way:</p></td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">echo 'eval
"$(perl −I$HOME/perl5/lib/perl5
−Mlocal::lib)"' &gt;&gt;˜/.bashrc</p>
<p style="margin-left:14%; margin-top: 1em">If you are
using C shell, you can do this as follows:</p>
<p style="margin-left:14%; margin-top: 1em">% echo $SHELL
<br/>
/bin/csh <br/>
$ echo 'eval `perl −I$HOME/perl5/lib/perl5
−Mlocal::lib`' &gt;&gt; ˜/.cshrc</p>
<p style="margin-left:14%; margin-top: 1em">After writing
your shell configuration file, be sure to re−read it
to get the changed settings into your current shell's
environment. Bourne shells use ". ˜/.bashrc"
for this, whereas C shells use "source
˜/.cshrc".</p>
<p style="margin-left:9%; margin-top: 1em"><i>Bootstrapping
into an alternate directory</i></p>
<p style="margin-left:9%; margin-top: 1em">In order to
install local::lib into a directory other than the default,
you need to specify the name of the directory when you call
bootstrap. Then, when setting up the environment variables,
both perl and local::lib must be told the location of the
bootstrap directory. The setup process would look as
follows:</p>
<p style="margin-left:9%; margin-top: 1em">perl Makefile.PL
−−bootstrap=˜/foo <br/>
make test &amp;&amp; make install <br/>
echo 'eval "$(perl −I$HOME/foo/lib/perl5
−Mlocal::lib=$HOME/foo)"' &gt;&gt;˜/.bashrc
<br/>
. ˜/.bashrc</p>
<p style="margin-left:9%; margin-top: 1em"><i>Other
bootstrapping options</i></p>
<p style="margin-left:9%; margin-top: 1em">If you're on a
slower machine, or are operating under draconian disk space
limitations, you can disable the automatic generation of
manpages from POD when installing modules by using the
"−−no−manpages" argument when
bootstrapping:</p>
<p style="margin-left:9%; margin-top: 1em">perl Makefile.PL
−−bootstrap −−no−manpages</p>
<p style="margin-left:9%; margin-top: 1em">To avoid doing
several bootstrap for several Perl module environments on
the same account, for example if you use it for several
different deployed applications independently, you can use
one bootstrapped local::lib installation to install modules
in different directories directly this way:</p>
<p style="margin-left:9%; margin-top: 1em">cd ˜/mydir1
<br/>
perl −Mlocal::lib=./ <br/>
eval $(perl −Mlocal::lib=./) ### To set the
environment for this shell alone <br/>
printenv ### You will see that ˜/mydir1 is in the
PERL5LIB <br/>
perl −MCPAN −e install ... ### whatever modules
you want <br/>
cd ../mydir2 <br/>
... REPEAT ...</p>
<p style="margin-left:9%; margin-top: 1em">If you use
<i>.bashrc</i> to activate a local::lib automatically, the
local::lib will be re−enabled in any sub−shells
used, overriding adjustments you may have made in the parent
shell. To avoid this, you can initialize the local::lib in
<i>.bash_profile</i> rather than <i>.bashrc</i>, or protect
the local::lib invocation with a $SHLVL check:</p>
<p style="margin-left:9%; margin-top: 1em">[ $SHLVL
−eq 1 ] &amp;&amp; eval "$(perl
−I$HOME/perl5/lib/perl5 −Mlocal::lib)"</p>
<p style="margin-left:9%; margin-top: 1em">If you are
working with several "local::lib" environments,
you may want to remove some of them from the current
environment without disturbing the others. You can
deactivate one environment like this (using bourne sh):</p>
<p style="margin-left:9%; margin-top: 1em">eval $(perl
−Mlocal::lib=−−deactivate,˜/path)</p>
<p style="margin-left:9%; margin-top: 1em">which will
generate and run the commands needed to remove
"˜/path" from your various search paths.
Whichever environment was <b>activated most recently</b>
will remain the target for module installations. That is, if
you activate "˜/path_A" and then you activate
"˜/path_B", new modules you install will go
in "˜/path_B". If you deactivate
"˜/path_B" then modules will be installed
into "˜/pathA" −− but if you
deactivate "˜/path_A" then they will still be
installed in "˜/pathB" because pathB was
activated later.</p>
<p style="margin-left:9%; margin-top: 1em">You can also ask
"local::lib" to clean itself completely out of the
current shell's environment with the
"−−deactivate−all" option. For
multiple environments for multiple apps you may need to
include a modified version of the "use FindBin"
instructions in the "In code" sample above. If you
did something like the above, you have a set of Perl modules
at "˜/mydir1/lib". If you have a script at
"˜/mydir1/scripts/myscript.pl", you need to
tell it where to find the modules you installed for it at
"˜/mydir1/lib".</p>
<p style="margin-left:9%; margin-top: 1em">In
"˜/mydir1/scripts/myscript.pl":</p>
<p style="margin-left:9%; margin-top: 1em">use strict; <br/>
use warnings; <br/>
use local::lib "$FindBin::Bin/.."; ### points to
˜/mydir1 and local::lib finds lib <br/>
use lib "$FindBin::Bin/../lib"; ### points to
˜/mydir1/lib</p>
<p style="margin-left:9%; margin-top: 1em">Put this before
any BEGIN { ... } blocks that require the modules you
installed.</p>
<h3>Differences when using this module under Win32
<a name="Differences when using this module under Win32"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">To set up the
proper environment variables for your current session of
"CMD.exe", you can use this:</p>
<p style="margin-left:9%; margin-top: 1em">C:\&gt;perl
−Mlocal::lib <br/>
set PERL_MB_OPT=−−install_base
C:\DOCUME˜1\ADMINI˜1\perl5 <br/>
set
PERL_MM_OPT=INSTALL_BASE=C:\DOCUME˜1\ADMINI˜1\perl5
<br/>
set PERL5LIB=C:\DOCUME˜1\ADMINI˜1\perl5\lib\perl5
<br/>
set PATH=C:\DOCUME˜1\ADMINI˜1\perl5\bin;%PATH%
<br/>
### To set the environment for this shell alone <br/>
C:\&gt;perl −Mlocal::lib &gt; %TEMP%\tmp.bat
&amp;&amp; %TEMP%\tmp.bat &amp;&amp; del %TEMP%\tmp.bat <br/>
### instead of $(perl −Mlocal::lib=./)</p>
<p style="margin-left:9%; margin-top: 1em">If you want the
environment entries to persist, you'll need to add them to
the Control Panel's System applet yourself or use
App::local::lib::Win32Helper.</p>
<p style="margin-left:9%; margin-top: 1em">The
"˜" is translated to the user's profile
directory (the directory named for the user under
"Documents and Settings" (Windows XP or earlier)
or "Users" (Windows Vista or later)) unless
$ENV{HOME} exists. After that, the home directory is
translated to a short name (which means the directory must
exist) and the subdirectories are created.</p>
<p style="margin-left:9%; margin-top: 1em"><i>PowerShell</i></p>
<p style="margin-left:9%; margin-top: 1em">local::lib also
supports PowerShell, and can be used with the
"Invoke−Expression" cmdlet.</p>
<p style="margin-left:9%; margin-top: 1em">Invoke−Expression
"$(perl −Mlocal::lib)"</p>
<h2>RATIONALE
<a name="RATIONALE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The version of a
Perl package on your machine is not always the version you
need. Obviously, the best thing to do would be to update to
the version you need. However, you might be in a situation
where you're prevented from doing this. Perhaps you don't
have system administrator privileges; or perhaps you are
using a package management system such as Debian, and nobody
has yet gotten around to packaging up the version you
need.</p>
<p style="margin-left:9%; margin-top: 1em">local::lib
solves this problem by allowing you to create your own
directory of Perl packages downloaded from CPAN (in a
multi−user system, this would typically be within your
own home directory). The existing system Perl installation
is not affected; you simply invoke Perl with special options
so that Perl uses the packages in your own local package
directory rather than the system packages. local::lib
arranges things so that your locally installed version of
the Perl packages takes precedence over the system
installation.</p>
<p style="margin-left:9%; margin-top: 1em">If you are using
a package management system (such as Debian), you don't need
to worry about Debian and CPAN stepping on each other's
toes. Your local version of the packages will be written to
an entirely separate directory from those installed by
Debian.</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">This module
provides a quick, convenient way of bootstrapping a
user−local Perl module library located within the
user's home directory. It also constructs and prints out for
the user the list of environment variables using the syntax
appropriate for the user's current shell (as specified by
the "SHELL" environment variable), suitable for
directly adding to one's shell configuration file.</p>
<p style="margin-left:9%; margin-top: 1em">More generally,
local::lib allows for the bootstrapping and usage of a
directory containing Perl modules outside of Perl's @INC.
This makes it easier to ship an application with an
app−specific copy of a Perl module, or collection of
modules. Useful in cases like when an upstream maintainer
hasn't applied a patch to a module of theirs that you need
for your application.</p>
<p style="margin-left:9%; margin-top: 1em">On import,
local::lib sets the following environment variables to
appropriate values: <br/>
PERL_MB_OPT <br/>
PERL_MM_OPT <br/>
PERL5LIB <br/>
PATH <br/>
PERL_LOCAL_LIB_ROOT</p>
<p style="margin-left:9%; margin-top: 1em">When possible,
these will be appended to instead of overwritten
entirely.</p>
<p style="margin-left:9%; margin-top: 1em">These values are
then available for reference by any code after import.</p>
<h2>CREATING A SELF−CONTAINED SET OF MODULES
<a name="CREATING A SELF−CONTAINED SET OF MODULES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">See
lib::core::only for one way to do this − but note that
there are a number of caveats, and the best approach is
always to perform a build against a clean perl (i.e. site
and vendor as close to empty as possible).</p>
<h2>IMPORT OPTIONS
<a name="IMPORT OPTIONS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Options are
values that can be passed to the "local::lib"
import besides the directory to use. They are specified as
"use local::lib '−−option'[, path];"
or "perl
−Mlocal::lib=−−option[,path]".</p>
<h3>−−deactivate
<a name="−−deactivate"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Remove the
chosen path (or the default path) from the module search
paths if it was added by "local::lib", instead of
adding it.</p>
<h3>−−deactivate−all
<a name="−−deactivate−all"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Remove all
directories that were added to search paths by
"local::lib" from the search paths.</p>
<h3>−−quiet
<a name="−−quiet"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Don't output any
messages about directories being created.</p>
<h3>−−always
<a name="−−always"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Always add
directories to environment variables, ignoring if they are
already included.</p>
<h3>−−shelltype
<a name="−−shelltype"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Specify the
shell type to use for output. By default, the shell will be
detected based on the environment. Should be one of:
"bourne", "csh", "cmd", or
"powershell".</p>
<h3>−−no−create
<a name="−−no−create"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Prevents
"local::lib" from creating directories when
activating dirs. This is likely to cause issues on Win32
systems.</p>
<h2>CLASS METHODS
<a name="CLASS METHODS"></a>
</h2>
<h3>ensure_dir_structure_for
<a name="ensure_dir_structure_for"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: None</p>
<p style="margin-left:9%; margin-top: 1em">Attempts to
create a local::lib directory, including subdirectories and
all required parent directories. Throws an exception on
failure.</p>
<h3>print_environment_vars_for
<a name="print_environment_vars_for"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: None</p>
<p style="margin-left:9%; margin-top: 1em">Prints to
standard output the variables listed above, properly set to
use the given path as the base directory.</p>
<h3>build_environment_vars_for
<a name="build_environment_vars_for"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: %environment_vars</p>
<p style="margin-left:9%; margin-top: 1em">Returns a hash
with the variables listed above, properly set to use the
given path as the base directory.</p>
<h3>setup_env_hash_for
<a name="setup_env_hash_for"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: None</p>
<p style="margin-left:9%; margin-top: 1em">Constructs the
%ENV keys for the given path, by calling
"build_environment_vars_for".</p>
<h3>active_paths
<a name="active_paths"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: None
<br/>
Return value: @paths</p>
<p style="margin-left:9%; margin-top: 1em">Returns a list
of active "local::lib" paths, according to the
"PERL_LOCAL_LIB_ROOT" environment variable and
verified against what is really in @INC.</p>
<h3>install_base_perl_path
<a name="install_base_perl_path"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: $install_base_perl_path</p>
<p style="margin-left:9%; margin-top: 1em">Returns a path
describing where to install the Perl modules for this local
library installation. Appends the directories
"lib" and "perl5" to the given path.</p>
<h3>lib_paths_for
<a name="lib_paths_for"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: @lib_paths</p>
<p style="margin-left:9%; margin-top: 1em">Returns the list
of paths perl will search for libraries, given a base path.
This includes the base path itself, the architecture
specific subdirectory, and perl version specific
subdirectories. These paths may not all exist.</p>
<h3>install_base_bin_path
<a name="install_base_bin_path"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: $install_base_bin_path</p>
<p style="margin-left:9%; margin-top: 1em">Returns a path
describing where to install the executable programs for this
local library installation. Appends the directory
"bin" to the given path.</p>
<h3>installer_options_for
<a name="installer_options_for"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: %installer_env_vars</p>
<p style="margin-left:9%; margin-top: 1em">Returns a hash
of environment variables that should be set to cause
installation into the given path.</p>
<h3>resolve_empty_path
<a name="resolve_empty_path"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: $base_path</p>
<p style="margin-left:9%; margin-top: 1em">Builds and
returns the base path into which to set up the local module
installation. Defaults to "˜/perl5".</p>
<h3>resolve_home_path
<a name="resolve_home_path"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: $home_path</p>
<p style="margin-left:9%; margin-top: 1em">Attempts to find
the user's home directory. If no definite answer is
available, throws an exception.</p>
<h3>resolve_relative_path
<a name="resolve_relative_path"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: $absolute_path</p>
<p style="margin-left:9%; margin-top: 1em">Translates the
given path into an absolute path.</p>
<h3>resolve_path
<a name="resolve_path"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: $absolute_path</p>
<p style="margin-left:9%; margin-top: 1em">Calls the
following in a pipeline, passing the result from the
previous to the next, in an attempt to find where to
configure the environment for a local library installation:
"resolve_empty_path",
"resolve_home_path",
"resolve_relative_path". Passes the given path
argument to "resolve_empty_path" which then
returns a result that is passed to
"resolve_home_path", which then has its result
passed to "resolve_relative_path". The result of
this final call is returned from
"resolve_path".</p>
<h2>OBJECT INTERFACE
<a name="OBJECT INTERFACE"></a>
</h2>
<h3>new
<a name="new"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments:
%attributes <br/>
Return value: $local_lib</p>
<p style="margin-left:9%; margin-top: 1em">Constructs a new
"local::lib" object, representing the current
state of @INC and the relevant environment variables.</p>
<h2>ATTRIBUTES
<a name="ATTRIBUTES"></a>
</h2>
<h3>roots
<a name="roots"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">An arrayref
representing active "local::lib" directories.</p>
<h3>inc
<a name="inc"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">An arrayref
representing @INC.</p>
<h3>libs
<a name="libs"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">An arrayref
representing the PERL5LIB environment variable.</p>
<h3>bins
<a name="bins"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">An arrayref
representing the PATH environment variable.</p>
<h3>extra
<a name="extra"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">A hashref of
extra environment variables (e.g. "PERL_MM_OPT"
and "PERL_MB_OPT")</p>
<h3>no_create
<a name="no_create"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">If set,
"local::lib" will not try to create directories
when activating them.</p>
<h2>OBJECT METHODS
<a name="OBJECT METHODS"></a>
</h2>
<h3>clone
<a name="clone"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments:
%attributes <br/>
Return value: $local_lib</p>
<p style="margin-left:9%; margin-top: 1em">Constructs a new
"local::lib" object based on the existing one,
overriding the specified attributes.</p>
<h3>activate
<a name="activate"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: $new_local_lib</p>
<p style="margin-left:9%; margin-top: 1em">Constructs a new
instance with the specified path active.</p>
<h3>deactivate
<a name="deactivate"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: $path
<br/>
Return value: $new_local_lib</p>
<p style="margin-left:9%; margin-top: 1em">Constructs a new
instance with the specified path deactivated.</p>
<h3>deactivate_all
<a name="deactivate_all"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: None
<br/>
Return value: $new_local_lib</p>
<p style="margin-left:9%; margin-top: 1em">Constructs a new
instance with all "local::lib" directories
deactivated.</p>
<h3>environment_vars_string
<a name="environment_vars_string"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: [
$shelltype ] <br/>
Return value: $shell_env_string</p>
<p style="margin-left:9%; margin-top: 1em">Returns a string
to set up the "local::lib", meant to be run by a
shell.</p>
<h3>build_environment_vars
<a name="build_environment_vars"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: None
<br/>
Return value: %environment_vars</p>
<p style="margin-left:9%; margin-top: 1em">Returns a hash
with the variables listed above, properly set to use the
given path as the base directory.</p>
<h3>setup_env_hash
<a name="setup_env_hash"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Arguments: None
<br/>
Return value: None</p>
<p style="margin-left:9%; margin-top: 1em">Constructs the
%ENV keys for the given path, by calling
"build_environment_vars".</p>
<h3>setup_local_lib
<a name="setup_local_lib"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Constructs the
%ENV hash using "setup_env_hash", and set up
@INC.</p>
<h2>A WARNING ABOUT UNINST=1
<a name="A WARNING ABOUT UNINST=1"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Be careful about
using local::lib in combination with "make install
UNINST=1". The idea of this feature is that will
uninstall an old version of a module before installing a new
one. However it lacks a safety check that the old version
and the new version will go in the same directory. Used in
combination with local::lib, you can potentially delete a
globally accessible version of a module while installing the
new version in a local place. Only combine "make
install UNINST=1" and local::lib if you understand
these possible consequences.</p>
<h2>LIMITATIONS
<a name="LIMITATIONS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em">Directory names with spaces in
them are not well supported by the perl toolchain and the
programs it uses. Pure−perl distributions should
support spaces, but problems are more likely with dists that
require compilation. A workaround you can do is moving your
local::lib to a directory with spaces <b>after</b> you
installed all modules inside your local::lib bootstrap. But
be aware that you can't update or install CPAN modules after
the move.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>Rather basic shell detection. Right now anything with
csh in its name is assumed to be a C shell or something
compatible, and everything else is assumed to be Bourne,
except on Win32 systems. If the "SHELL"
environment variable is not set, a Bourne−compatible
shell is assumed.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>Kills any existing PERL_MM_OPT or PERL_MB_OPT.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>Should probably auto−fixup CPAN config if not
already done.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>On VMS and MacOS Classic (pre−OS X), local::lib
loads File::Spec. This means any File::Spec version
installed in the local::lib will be ignored by scripts using
local::lib. A workaround for this is using "use lib
"$local_lib/lib/perl5";" instead of using
"local::lib" directly.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>Conflicts with ExtUtils::MakeMaker's "PREFIX"
option. "local::lib" uses the
"INSTALL_BASE" option, as it has more predictable
and sane behavior. If something attempts to use the
"PREFIX" option when running a <i>Makefile.PL</i>,
ExtUtils::MakeMaker will refuse to run, as the two options
conflict. This can be worked around by temporarily unsetting
the "PERL_MM_OPT" environment variable.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>Conflicts with Module::Build's
"−−prefix" option. Similar to the
previous limitation, but any
"−−prefix" option specified will be
ignored. This can be worked around by temporarily unsetting
the "PERL_MB_OPT" environment variable.</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">Patches very
much welcome for any of the above.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="81%">
<p style="margin-top: 1em">On Win32 systems, does not have
a way to write the created environment variables to the
registry, so that they can persist through a reboot.</p></td>
<td width="5%">
</td></tr>
</table>
<h2>TROUBLESHOOTING
<a name="TROUBLESHOOTING"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">If you've
configured local::lib to install CPAN modules somewhere in
to your home directory, and at some point later you try to
install a module with "cpan −i Foo::Bar",
but it fails with an error like: "Warning: You do not
have permissions to install into
/usr/lib64/perl5/site_perl/5.8.8/x86_64−linux at
/usr/lib64/perl5/5.8.8/Foo/Bar.pm" and buried within
the install log is an error saying "'INSTALL_BASE' is
not a known MakeMaker parameter name", then you've
somehow lost your updated ExtUtils::MakeMaker module.</p>
<p style="margin-left:9%; margin-top: 1em">To remedy this
situation, rerun the bootstrapping procedure documented
above.</p>
<p style="margin-left:9%; margin-top: 1em">Then, run
"rm −r
˜/.cpan/build/Foo−Bar*"</p>
<p style="margin-left:9%; margin-top: 1em">Finally,
re−run "cpan −i Foo::Bar" and it
should install without problems.</p>
<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">SHELL <br/>
COMSPEC</p>
<p style="margin-left:14%;">local::lib looks at the user's
"SHELL" environment variable when printing out
commands to add to the shell configuration file.</p>
<p style="margin-left:14%; margin-top: 1em">On Win32
systems, "COMSPEC" is also examined.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="57%">
<p style="margin-top: 1em">Perl Advent article, 2011
&lt;http://perladvent.org/2011/2011-12-01.html&gt;</p> </td>
<td width="29%">
</td></tr>
</table>
<h2>SUPPORT
<a name="SUPPORT"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">IRC:</p>
<p style="margin-left:9%; margin-top: 1em">Join #toolchain
on irc.perl.org.</p>
<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Matt S Trout
&lt;mst@shadowcat.co.uk&gt; http://www.shadowcat.co.uk/</p>
<p style="margin-left:9%; margin-top: 1em">auto_install
fixes kindly sponsored by http://www.takkle.com/</p>
<h2>CONTRIBUTORS
<a name="CONTRIBUTORS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Patches to
correctly output commands for csh style shells, as well as
some documentation additions, contributed by Christopher
Nehren &lt;apeiron@cpan.org&gt;.</p>
<p style="margin-left:9%; margin-top: 1em">Doc patches for
a custom local::lib directory, more cleanups in the english
documentation and a german documentation contributed by
Torsten Raudssus &lt;torsten@raudssus.de&gt;.</p>
<p style="margin-left:9%; margin-top: 1em">Hans Dieter
Pearcey &lt;hdp@cpan.org&gt; sent in some additional tests
for ensuring things will install properly, submitted a fix
for the bug causing problems with writing Makefiles during
bootstrapping, contributed an example program, and submitted
yet another fix to ensure that local::lib can install and
bootstrap properly. Many, many thanks!</p>
<p style="margin-left:9%; margin-top: 1em">pattern of
Freenode IRC contributed the beginnings of the
Troubleshooting section. Many thanks!</p>
<p style="margin-left:9%; margin-top: 1em">Patch to add
Win32 support contributed by Curtis Jewell
&lt;csjewell@cpan.org&gt;.</p>
<p style="margin-left:9%; margin-top: 1em">Warnings for
missing PATH/PERL5LIB (as when not running interactively)
silenced by a patch from Marco Emilio Poleggi.</p>
<p style="margin-left:9%; margin-top: 1em">Mark Stosberg
&lt;mark@summersault.com&gt; provided the code for the now
deleted '−−self−contained' option.</p>
<p style="margin-left:9%; margin-top: 1em">Documentation
patches to make win32 usage clearer by David Mertens
&lt;dcmertens.perl@gmail.com&gt; (run4flat).</p>
<p style="margin-left:9%; margin-top: 1em">Brazilian
portuguese translation and minor doc patches contributed by
Breno G. de Oliveira &lt;garu@cpan.org&gt;.</p>
<p style="margin-left:9%; margin-top: 1em">Improvements to
stacking multiple local::lib dirs and removing them from the
environment later on contributed by Andrew Rodland
&lt;arodland@cpan.org&gt;.</p>
<p style="margin-left:9%; margin-top: 1em">Patch for Carp
version mismatch contributed by Hakim Cassimally
&lt;osfameron@cpan.org&gt;.</p>
<p style="margin-left:9%; margin-top: 1em">Rewrite of
internals and numerous bug fixes and added features
contributed by Graham Knop &lt;haarg@haarg.org&gt;.</p>
<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Copyright (c)
2007 − 2013 the local::lib "AUTHOR" and
"CONTRIBUTORS" as listed above.</p>
<h2>LICENSE
<a name="LICENSE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">This is free
software; you can redistribute it and/or modify it under the
same terms as the Perl 5 programming language system
itself.</p>
<hr/>
</body>
</html>
