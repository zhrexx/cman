<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:40:24 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<hr/>
<p><i>CRYPT_GENSALT</i>(3) Library Functions Manual
<i>CRYPT_GENSALT</i>(3)</p>
<p style="margin-top: 1em"><b>NAME</b></p>
<p style="margin-left:9%;">crypt_gensalt, crypt_gensalt_rn,
crypt_gensalt_ra — encode settings for passphrase
hashing</p>
<p style="margin-top: 1em"><b>LIBRARY</b></p>
<p style="margin-left:9%;">Crypt Library (libcrypt,
−lcrypt)</p>
<p style="margin-top: 1em"><b>SYNOPSIS</b></p>
<p style="margin-left:9%;"><b>#include
&lt;crypt.h&gt;</b></p>
<p style="margin-left:9%; margin-top: 1em"><i>char
*</i></p>
<p><b>crypt_gensalt</b>(<i>const char *prefix</i>,
<i>unsigned long count</i>,
<i>const char *rbytes</i>,
<i>int nrbytes</i>);</p>
<p style="margin-left:9%; margin-top: 1em"><i>char
*</i></p>
<p><b>crypt_gensalt_rn</b>(<i>const char * prefix</i>,
<i>unsigned long count</i>,
<i>const char *rbytes</i>,
<i>int nrbytes</i>, <i>char * output</i>,
<i>int output_size</i>);</p>
<p style="margin-left:9%; margin-top: 1em"><i>char
*</i></p>
<p><b>crypt_gensalt_ra</b>(<i>const char *prefix</i>,
<i>unsigned long count</i>,
<i>const char *rbytes</i>,
<i>int nrbytes</i>);</p>
<p style="margin-top: 1em"><b>DESCRIPTION</b></p>
<p style="margin-left:9%;">The <b>crypt_gensalt</b>,
<b>crypt_gensalt_rn</b>, and <b>crypt_gensalt_ra</b>
functions compile a string for use as the <i>setting</i>
argument to <b>crypt</b>, <b>crypt_r</b>, <b>crypt_rn</b>,
and <b>crypt_ra</b>. <i>prefix</i> selects the hashing
method to use. <i>count</i> controls the processing cost of
the hash; the valid range and exact meaning of <i>count</i>
depend on the hashing method, but larger numbers correspond
to more costly hashes in terms of CPU time and possibly
memory usage. <i>rbytes</i> should point to <i>nrbytes</i>
cryptographically random bytes for use as
“salt.”</p>
<p style="margin-left:9%; margin-top: 1em">If <i>prefix</i>
is a null pointer, the best available hashing method will be
selected. (</p>
<p><b>CAUTION</b>: if <i>prefix</i> is an empty string, the
“traditional” DES-based hashing method will be
selected; this method is unacceptably weak by modern
standards. ) If <i>count</i> is 0, a low default cost will
be selected. If <i>rbytes</i> is a null pointer, an
appropriate number of random bytes will be obtained from the
operating system, and <i>nrbytes</i> is ignored.</p>
<p style="margin-left:9%; margin-top: 1em">See
<i>crypt</i>(5) for other strings that can be used as
<i>prefix</i>, and valid values of <i>count</i> for
each.</p>
<p style="margin-top: 1em"><b>RETURN VALUES</b></p>
<p style="margin-left:9%;"><b>crypt_gensalt</b>,
<b>crypt_gensalt_rn</b>, and <b>crypt_gensalt_ra</b> return
a pointer to an encoded setting string. This string will be
entirely printable ASCII, and will not contain whitespace or
the characters ‘<b>:</b>’,
‘<b>;</b>’, ‘<b>*</b>’,
‘<b>!</b>’, or ‘<b>\</b>’. See
<i>crypt</i>(5) for more detail on the format of this
string. Upon error, they return a null pointer and set
<i>errno</i> to an appropriate error code. When the
functions succeed, the value of <i>errno</i> is unspecified
and must not be relied upon.</p>
<p style="margin-left:9%; margin-top: 1em"><b>crypt_gensalt</b>
places its result in a static storage area, which will be
overwritten by subsequent calls to <b>crypt_gensalt</b>. In
this version of libcrypt, the static storage area is
allocated separately for each thread, but portable code
should not call <b>crypt_gensalt</b> from multiple threads
simultaneously. However, it <i>is</i> safe to pass the
string returned by <b>crypt_gensalt</b> directly to
<b>crypt</b> without copying it; each function has its own
static storage area.</p>
<p style="margin-left:9%; margin-top: 1em"><b>crypt_gensalt_rn</b>
places its result in the supplied <i>output</i> buffer,
which has <i>output_size</i> bytes of storage available.
<i>output_size</i> should be greater than or equal to
CRYPT_GENSALT_OUTPUT_SIZE.</p>
<p style="margin-left:9%; margin-top: 1em"><b>crypt_gensalt_ra</b>
allocates memory for its result using <i>malloc</i>(3). It
should be freed with <i>free</i>(3) after use.</p>
<p style="margin-left:9%; margin-top: 1em">Upon error, in
addition to returning a null pointer, <b>crypt_gensalt</b>
and <b>crypt_gensalt_rn</b> will write an invalid setting
string to their output buffer, if there is enough space;
this string will begin with a ‘<b>*</b>’ and
will not be equal to <i>prefix</i>.</p>
<p style="margin-top: 1em"><b>ERRORS</b> <br/>
EINVAL</p>
<p style="margin-left:33%; margin-top: 1em"><i>prefix</i>
is invalid or not supported by this implementation;
<i>count</i> is invalid for the requested <i>prefix</i>; the
input <i>nrbytes</i> is insufficient for the smallest valid
salt with the requested <i>prefix</i>.</p>
<p style="margin-top: 1em">ERANGE</p>
<p style="margin-left:33%; margin-top: 1em"><b>crypt_gensalt_rn</b>
only: <i>output_size</i> is too small to hold the compiled
<i>setting</i> string.</p>
<p style="margin-top: 1em">ENOMEM</p>
<p style="margin-left:33%; margin-top: 1em">Failed to
allocate internal scratch memory. <b><br/>
crypt_gensalt_ra</b> only: failed to allocate memory for the
compiled <i>setting</i> string.</p>
<p style="margin-top: 1em">ENOSYS, EACCES, EIO, etc.</p>
<p style="margin-left:33%;">Obtaining random bytes from the
operating system failed. This can only happen when
<i>rbytes</i> is a null pointer.</p>
<p style="margin-top: 1em"><b>FEATURE TEST MACROS</b></p>
<p style="margin-left:9%;">The following macros are defined
by &lt;<i>crypt.h</i>&gt;:</p>
<p style="margin-top: 1em">CRYPT_GENSALT_IMPLEMENTS_DEFAULT_PREFIX</p>
<p style="margin-left:19%;">A null pointer can be specified
as the <i>prefix</i> argument.</p>
<p style="margin-top: 1em">CRYPT_GENSALT_IMPLEMENTS_AUTO_ENTROPY</p>
<p style="margin-left:19%;">A null pointer can be specified
as the <i>rbytes</i> argument.</p>
<p style="margin-top: 1em"><b>PORTABILITY NOTES</b></p>
<p style="margin-left:9%;">The functions
<b>crypt_gensalt</b>, <b>crypt_gensalt_rn</b>, and
<b>crypt_gensalt_ra</b> are not part of any standard. They
originate with the Openwall project. A function with the
name <b>crypt_gensalt</b> also exists on Solaris 10 and
newer, but its prototype and semantics differ.</p>
<p style="margin-left:9%; margin-top: 1em">Some
implementations of <b>crypt_gensalt</b> use a single storage
area for all callers, even in the presence of threads. This
library uses per-thread storage areas, but portable code
should avoid calling <b>crypt_gensalt</b> from multiple
threads simultaneously; instead it is strongly advised to
allocate thread-specific buffers of
CRYPT_GENSALT_OUTPUT_SIZE length from within each thread
itself, and to use these buffers with the re-entrant
interface provided through <b>crypt_gensalt_rn</b>, or
<b>crypt_gensalt_ra</b>.</p>
<p style="margin-left:9%; margin-top: 1em">The default
prefix and auto entropy features are available since
libxcrypt version 4.0.0. Portable software can use feature
test macros to find out whether null pointers can be used
for the <i>prefix</i> and <i>rbytes</i> arguments.</p>
<p style="margin-left:9%; margin-top: 1em">The set of
supported hashing methods varies considerably from system to
system.</p>
<p style="margin-top: 1em"><b>ATTRIBUTES</b></p>
<p style="margin-left:9%;">For an explanation of the terms
used in this section, see <i>attributes</i>(7). <br/>
* In this implementation. Do NOT rely on this to be portable
behavior. See “PORTABILITY NOTES”.</p>
<p style="margin-top: 1em"><b>SEE ALSO</b></p>
<p style="margin-left:9%;"><i>crypt</i>(3),
<i>getpass</i>(3), <i>getpwent</i>(3), <i>shadow</i>(3),
<i>login</i>(1), <i>passwd</i>(1), <i>crypt</i>(5),
<i>passwd</i>(5), <i>shadow</i>(5), <i>pam</i>(8) Openwall
Project March 27, 2024 <i>CRYPT_GENSALT</i>(3)</p>
<hr/>
</body>
</html>
