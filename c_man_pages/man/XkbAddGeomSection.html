<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:54:32 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>XkbAddGeomSection</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">XkbAddGeomSection</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#ARGUMENTS">ARGUMENTS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#STRUCTURES">STRUCTURES</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">XkbAddGeomSection
− Add one section to an existing keyboard geometry</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="41%">
<p style="margin-top: 1em"><b>XkbSectionPtr
XkbAddGeomSection</b></p> </td>
<td width="3%"></td>
<td width="47%">
<p style="margin-top: 1em"><b>(XkbGeometryPtr</b>
<i>geom</i><b>, Atom</b> <i>name</i><b>, int</b></p></td></tr>
</table>
<p style="margin-left:9%;"><i>sz_rows</i><b>, int</b>
<i>sz_doodads</i><b>, int</b>
<i>sz_overlays</i><b>);</b></p>
<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="5%">
<p style="margin-top: 1em"><b><i>geom</i></b></p></td>
<td width="4%"></td>
<td width="29%">
<p style="margin-top: 1em">geometry to be updated</p></td>
<td width="53%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="5%">
<p><i>name</i></p></td>
<td width="4%"></td>
<td width="29%">
<p>name of the new section</p></td>
<td width="53%">
</td></tr>
</table>
<p style="margin-left:9%;"><i>sz_rows</i></p>
<p style="margin-left:18%;">number of rows to reserve in
the section</p>
<p style="margin-left:9%;"><i>sz_doodads</i></p>
<p style="margin-left:18%;">number of doodads to reserve in
the section</p>
<p style="margin-left:9%;"><i>sz_overlays</i></p>
<p style="margin-left:18%;">number of overlays to reserve
in the section</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Xkb provides
functions to add a single new element to the top-level
keyboard geometry. In each case the <i>num_ *</i> fields of
the corresponding structure is incremented by 1. These
functions do not change <i>sz_*</i> unless there is no more
room in the array. Some of these functions fill in the
values of the element’s structure from the arguments.
For other functions, you must explicitly write code to fill
the structure’s elements.</p>
<p style="margin-left:9%; margin-top: 1em">The top-level
geometry description includes a list of <i>geometry
properties.</i> A geometry property associates an arbitrary
string with an equally arbitrary name. Programs that display
images of keyboards can use geometry properties as hints,
but they are not interpreted by Xkb. No other geometry
structures refer to geometry properties.</p>
<p style="margin-left:9%; margin-top: 1em">A keyboard
geometry contains an arbitrary number of sections.
<i>XkbAddGeomSection</i> adds one section to an existing
keyboard geometry <i>geom.</i> The new section contains
space for the number of rows, doodads, and overlays
specified by <i>sz_rows, sz_doodads,</i> and
<i>sz_overlays.</i> The new section is allocated and zeroed
and given the name specified by <i>name.</i> If a section
with name <i>name</i> already exists in the geometry, a
pointer to the existing section is returned.
<i>XkbAddGeomSection</i> returns NULL if any of the
parameters is empty or if it was not able to allocate space
for the section. To allocate space for an arbitrary number
of sections to a geometry, use
<i>XkbAllocGeomSections.</i></p>
<h2>STRUCTURES
<a name="STRUCTURES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">typedef struct
_XkbSection { <br/>
Atom name; /* section name */ <br/>
unsigned char priority; /* drawing priority, 0=&gt;highest,
255=&gt;lowest */ <br/>
short top; /* top coordinate of section origin */ <br/>
short left; /* left coordinate of row origin */ <br/>
unsigned short width; /* section width, in mm/10 */ <br/>
unsigned short height; /* section height, in mm/10 */ <br/>
short angle; /* angle of section rotation, counterclockwise
*/ <br/>
unsigned short num_rows; /* number of rows in the rows array
*/ <br/>
unsigned short num_doodads; /* number of doodads in the
doodads array */ <br/>
unsigned short num_overlays; /* number of overlays in the
overlays array */ <br/>
unsigned short sz_rows; /* size of the rows array */ <br/>
unsigned short sz_doodads; /* size of the doodads array */
<br/>
unsigned short sz_overlays; /* size of the overlays array */
<br/>
XkbRowPtr rows; /* section rows array */ <br/>
XkbDoodadPtr doodads; /* section doodads array */ <br/>
XkbBoundsRec bounds; /* bounding box for the section, before
rotation*/ <br/>
XkbOverlayPtr overlays; /* section overlays array */ <br/>
} XkbSectionRec, *XkbSectionPtr;</p>
<p style="margin-left:9%; margin-top: 1em"><i>top</i> and
<i>left</i> are the origin of the section, relative to the
origin of the keyboard, in mm/10. angle is in 1/10
degrees.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>XkbAllocGeomSections</b>(3)</p>
<hr/>
</body>
</html>
