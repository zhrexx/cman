<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:55:04 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>X509_LOOKUP_METH_NEW</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">X509_LOOKUP_METH_NEW</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUES">RETURN VALUES</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#COPYRIGHT">COPYRIGHT</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">X509_LOOKUP_METHOD,
X509_LOOKUP_meth_new, X509_LOOKUP_meth_free,
X509_LOOKUP_meth_set_new_item,
X509_LOOKUP_meth_get_new_item, X509_LOOKUP_meth_set_free,
X509_LOOKUP_meth_get_free, X509_LOOKUP_meth_set_init,
X509_LOOKUP_meth_get_init, X509_LOOKUP_meth_set_shutdown,
X509_LOOKUP_meth_get_shutdown, X509_LOOKUP_ctrl_fn,
X509_LOOKUP_meth_set_ctrl, X509_LOOKUP_meth_get_ctrl,
X509_LOOKUP_get_by_subject_fn,
X509_LOOKUP_meth_set_get_by_subject,
X509_LOOKUP_meth_get_get_by_subject,
X509_LOOKUP_get_by_issuer_serial_fn,
X509_LOOKUP_meth_set_get_by_issuer_serial,
X509_LOOKUP_meth_get_get_by_issuer_serial,
X509_LOOKUP_get_by_fingerprint_fn,
X509_LOOKUP_meth_set_get_by_fingerprint,
X509_LOOKUP_meth_get_get_by_fingerprint,
X509_LOOKUP_get_by_alias_fn,
X509_LOOKUP_meth_set_get_by_alias,
X509_LOOKUP_meth_get_get_by_alias, X509_OBJECT_set1_X509,
X509_OBJECT_set1_X509_CRL − Routines to build up
X509_LOOKUP methods</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">#include
&lt;openssl/x509_vfy.h&gt; <br/>
typedef x509_lookup_method_st X509_LOOKUP_METHOD; <br/>
X509_LOOKUP_METHOD *X509_LOOKUP_meth_new(const char *name);
<br/>
void X509_LOOKUP_meth_free(X509_LOOKUP_METHOD *method); <br/>
int X509_LOOKUP_meth_set_new_item(X509_LOOKUP_METHOD
*method, <br/>
int (*new_item) (X509_LOOKUP *ctx)); <br/>
int (*X509_LOOKUP_meth_get_new_item(const
X509_LOOKUP_METHOD* method)) <br/>
(X509_LOOKUP *ctx); <br/>
int X509_LOOKUP_meth_set_free(X509_LOOKUP_METHOD *method,
<br/>
void (*free) (X509_LOOKUP *ctx)); <br/>
void (*X509_LOOKUP_meth_get_free(const X509_LOOKUP_METHOD*
method)) <br/>
(X509_LOOKUP *ctx); <br/>
int X509_LOOKUP_meth_set_init(X509_LOOKUP_METHOD *method,
<br/>
int (*init) (X509_LOOKUP *ctx)); <br/>
int (*X509_LOOKUP_meth_get_init(const X509_LOOKUP_METHOD*
method)) <br/>
(X509_LOOKUP *ctx); <br/>
int X509_LOOKUP_meth_set_shutdown(X509_LOOKUP_METHOD
*method, <br/>
int (*shutdown) (X509_LOOKUP *ctx)); <br/>
int (*X509_LOOKUP_meth_get_shutdown(const
X509_LOOKUP_METHOD* method)) <br/>
(X509_LOOKUP *ctx); <br/>
typedef int (*X509_LOOKUP_ctrl_fn)(X509_LOOKUP *ctx, int
cmd, const char *argc, <br/>
long argl, char **ret); <br/>
int X509_LOOKUP_meth_set_ctrl(X509_LOOKUP_METHOD *method,
<br/>
X509_LOOKUP_ctrl_fn ctrl_fn); <br/>
X509_LOOKUP_ctrl_fn X509_LOOKUP_meth_get_ctrl(const
X509_LOOKUP_METHOD *method); <br/>
typedef int (*X509_LOOKUP_get_by_subject_fn)(X509_LOOKUP
*ctx, <br/>
X509_LOOKUP_TYPE type, <br/>
const X509_NAME *name, <br/>
X509_OBJECT *ret); <br/>
int X509_LOOKUP_meth_set_get_by_subject(X509_LOOKUP_METHOD
*method, <br/>
X509_LOOKUP_get_by_subject_fn fn); <br/>
X509_LOOKUP_get_by_subject_fn
X509_LOOKUP_meth_get_get_by_subject( <br/>
const X509_LOOKUP_METHOD *method); <br/>
typedef int
(*X509_LOOKUP_get_by_issuer_serial_fn)(X509_LOOKUP *ctx,
<br/>
X509_LOOKUP_TYPE type, <br/>
const X509_NAME *name, <br/>
const ASN1_INTEGER *serial, <br/>
X509_OBJECT *ret); <br/>
int X509_LOOKUP_meth_set_get_by_issuer_serial( <br/>
X509_LOOKUP_METHOD *method,
X509_LOOKUP_get_by_issuer_serial_fn fn); <br/>
X509_LOOKUP_get_by_issuer_serial_fn
X509_LOOKUP_meth_get_get_by_issuer_serial( <br/>
const X509_LOOKUP_METHOD *method); <br/>
typedef int (*X509_LOOKUP_get_by_fingerprint_fn)(X509_LOOKUP
*ctx, <br/>
X509_LOOKUP_TYPE type, <br/>
const unsigned char* bytes, <br/>
int len, <br/>
X509_OBJECT *ret); <br/>
int
X509_LOOKUP_meth_set_get_by_fingerprint(X509_LOOKUP_METHOD
*method, <br/>
X509_LOOKUP_get_by_fingerprint_fn fn); <br/>
X509_LOOKUP_get_by_fingerprint_fn
X509_LOOKUP_meth_get_get_by_fingerprint( <br/>
const X509_LOOKUP_METHOD *method); <br/>
typedef int (*X509_LOOKUP_get_by_alias_fn)(X509_LOOKUP *ctx,
<br/>
X509_LOOKUP_TYPE type, <br/>
const char *str, <br/>
int len, <br/>
X509_OBJECT *ret); <br/>
int X509_LOOKUP_meth_set_get_by_alias(X509_LOOKUP_METHOD
*method, <br/>
X509_LOOKUP_get_by_alias_fn fn); <br/>
X509_LOOKUP_get_by_alias_fn
X509_LOOKUP_meth_get_get_by_alias( <br/>
const X509_LOOKUP_METHOD *method); <br/>
int X509_OBJECT_set1_X509(X509_OBJECT *a, X509 *obj); <br/>
int X509_OBJECT_set1_X509_CRL(X509_OBJECT *a, X509_CRL
*obj);</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
<b>X509_LOOKUP_METHOD</b> type is a structure used for the
implementation of new X509_LOOKUP types. It provides a set
of functions used by OpenSSL for the implementation of
various X509 and X509_CRL lookup capabilities. One instance
of an X509_LOOKUP_METHOD can be associated to many
instantiations of an <b>X509_LOOKUP</b> structure.</p>
<p style="margin-left:9%; margin-top: 1em"><b>X509_LOOKUP_meth_new()</b>
creates a new <b>X509_LOOKUP_METHOD</b> structure. It should
be given a human−readable string containing a brief
description of the lookup method.</p>
<p style="margin-left:9%; margin-top: 1em"><b>X509_LOOKUP_meth_free()</b>
destroys a <b>X509_LOOKUP_METHOD</b> structure. If the
argument is NULL, nothing is done.</p>
<p style="margin-left:9%; margin-top: 1em"><b>X509_LOOKUP_get_new_item()</b>
and <b>X509_LOOKUP_set_new_item()</b> get and set the
function that is called when an <b>X509_LOOKUP</b> object is
created with <b>X509_LOOKUP_new()</b>. If an
X509_LOOKUP_METHOD requires any per−X509_LOOKUP
specific data, the supplied new_item function should
allocate this data and invoke
<b>X509_LOOKUP_set_method_data</b>(3).</p>
<p style="margin-left:9%; margin-top: 1em"><b>X509_LOOKUP_get_free()</b>
and <b>X509_LOOKUP_set_free()</b> get and set the function
that is used to free any method data that was allocated and
set from within new_item function.</p>
<p style="margin-left:9%; margin-top: 1em"><b>X509_LOOKUP_meth_get_init()</b>
and <b>X509_LOOKUP_meth_set_init()</b> get and set the
function that is used to initialize the method data that was
set with <b>X509_LOOKUP_set_method_data</b>(3) as part of
the new_item routine.</p>
<p style="margin-left:9%; margin-top: 1em"><b>X509_LOOKUP_meth_get_shutdown()</b>
and <b>X509_LOOKUP_meth_set_shutdown()</b> get and set the
function that is used to shut down the method data whose
state was previously initialized in the init function.</p>
<p style="margin-left:9%; margin-top: 1em"><b>X509_LOOKUP_meth_get_ctrl()</b>
and <b>X509_LOOKUP_meth_set_ctrl()</b> get and set a
function to be used to handle arbitrary control commands
issued by <b>X509_LOOKUP_ctrl()</b>. The control function is
given the X509_LOOKUP <b>ctx</b>, along with the arguments
passed by X509_LOOKUP_ctrl. <b>cmd</b> is an arbitrary
integer that defines some operation. <b>argc</b> is a
pointer to an array of characters. <b>argl</b> is an
integer. <b>ret</b>, if set, points to a location where any
return data should be written to. How <b>argc</b> and
<b>argl</b> are used depends entirely on the control
function.</p>
<p style="margin-left:9%; margin-top: 1em"><b>X509_LOOKUP_set_get_by_subject()</b>,
<b>X509_LOOKUP_set_get_by_issuer_serial()</b>,
<b>X509_LOOKUP_set_get_by_fingerprint()</b>,
<b>X509_LOOKUP_set_get_by_alias()</b> set the functions used
to retrieve an X509 or X509_CRL object by the object's
subject, issuer, fingerprint, and alias respectively. These
functions are given the X509_LOOKUP context, the type of the
X509_OBJECT being requested, parameters related to the
lookup, and an X509_OBJECT that will receive the requested
object.</p>
<p style="margin-left:9%; margin-top: 1em">Implementations
must add objects they find to the <b>X509_STORE</b> object
using <b>X509_STORE_add_cert()</b> or
<b>X509_STORE_add_crl()</b>. This increments its reference
count. However, the <b>X509_STORE_CTX_get_by_subject</b>(3)
function also increases the reference count which leads to
one too many references being held. Therefore, applications
should additionally call <b>X509_free()</b> or
<b>X509_CRL_free()</b> to decrement the reference count
again.</p>
<p style="margin-left:9%; margin-top: 1em">Implementations
should also use either <b>X509_OBJECT_set1_X509()</b> or
<b>X509_OBJECT_set1_X509_CRL()</b> to set the result. Note
that this also increments the result's reference count.</p>
<p style="margin-left:9%; margin-top: 1em">Any method data
that was created as a result of the new_item function set by
<b>X509_LOOKUP_meth_set_new_item()</b> can be accessed with
<b>X509_LOOKUP_get_method_data</b>(3). The <b>X509_STORE</b>
object that owns the X509_LOOKUP may be accessed with
<b>X509_LOOKUP_get_store</b>(3). Successful lookups should
return 1, and unsuccessful lookups should return 0.</p>
<p style="margin-left:9%; margin-top: 1em"><b>X509_LOOKUP_get_get_by_subject()</b>,
<b>X509_LOOKUP_get_get_by_issuer_serial()</b>,
<b>X509_LOOKUP_get_get_by_fingerprint()</b>,
<b>X509_LOOKUP_get_get_by_alias()</b> retrieve the function
set by the corresponding setter.</p>
<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
<b>X509_LOOKUP_meth_set</b> functions return 1 on success or
0 on error.</p>
<p style="margin-left:9%; margin-top: 1em">The
<b>X509_LOOKUP_meth_get</b> functions return the
corresponding function pointers.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>X509_STORE_CTX_get_by_subject</b>(3),
<b>X509_STORE_new</b>(3),
<b>SSL_CTX_set_cert_store</b>(3)</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The functions
described here were added in OpenSSL 1.1.0i.</p>
<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Copyright
2018−2024 The OpenSSL Project Authors. All Rights
Reserved.</p>
<p style="margin-left:9%; margin-top: 1em">Licensed under
the Apache License 2.0 (the "License"). You may
not use this file except in compliance with the License. You
can obtain a copy in the file LICENSE in the source
distribution or at
&lt;https://www.openssl.org/source/license.html&gt;.</p>
<hr/>
</body>
</html>
