<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:56:43 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>XkbDeviceBell</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">XkbDeviceBell</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#ARGUMENTS">ARGUMENTS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#STRUCTURES">STRUCTURES</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">XkbDeviceBell
− Rings the bell on an X input extension device or the
default keyboard</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="23%">
<p style="margin-top: 1em"><b>Bool XkbDeviceBell</b></p></td>
<td width="3%"></td>
<td width="65%">
<p style="margin-top: 1em"><b>(Display
*</b><i>display</i><b>, Window</b> <i>window</i><b>,
unsigned int</b></p></td></tr>
</table>
<p style="margin-left:9%;"><i>device_spec</i><b>, unsigned
int</b> <i>bell_class</i><b>, unsigned int</b>
<i>bell_id</i><b>, int</b> <i>percent</i><b>, Atom</b>
<i>name</i><b>);</b></p>
<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b><i>display</i></b></p>
<p style="margin-left:18%;">connection to the X server</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p><i>window</i></p></td>
<td width="1%"></td>
<td width="60%">
<p>window for which the bell is generated, or None</p></td>
<td width="22%">
</td></tr>
</table>
<p style="margin-left:9%;"><i>device_spec</i></p>
<p style="margin-left:18%;">device ID, or XkbUseCoreKbd</p>
<p style="margin-left:9%;"><i>bell_class</i></p>
<p style="margin-left:18%;">X input extension bell class of
the bell to be rung</p>
<p style="margin-left:9%;"><i>bell_id</i></p>
<p style="margin-left:18%;">X input extension bell ID of
the bell to be rung</p>
<p style="margin-left:9%;"><i>percent</i></p>
<p style="margin-left:18%;">bell volume, from -100 to 100
inclusive</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="5%">
<p><i>name</i></p></td>
<td width="4%"></td>
<td width="36%">
<p>a name for the bell, or NULL</p></td>
<td width="46%">
</td></tr>
</table>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The core X
protocol allows only applications to explicitly sound the
system bell with a given duration, pitch, and volume. Xkb
extends this capability by allowing clients to attach
symbolic names to bells, disable audible bells, and receive
an event whenever the keyboard bell is rung. For the
purposes of this document, the <i>audible</i> bell is
defined to be the system bell, or the default keyboard bell,
as opposed to any other audible sound generated elsewhere in
the system. You can ask to receive XkbBellNotify events when
any client rings any one of the following:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="5%"></td>
<td width="85%">
<p style="margin-top: 1em">The default bell</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="5%"></td>
<td width="85%">
<p>Any bell on an input device that can be specified by a
bell_class and bell_id pair</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="5%"></td>
<td width="85%">
<p>Any bell specified only by an arbitrary name. (This is,
from the server’s point of view, merely a name, and
not connected with any physical sound-generating device.
Some client application must generate the sound, or visual
feedback, if any, that is associated with the name.)</p></td></tr>
</table>
<p style="margin-left:15%; margin-top: 1em">You can also
ask to receive XkbBellNotify events when the server rings
the default bell or if any client has requested events only
(without the bell sounding) for any of the bell types
previously listed.</p>
<p style="margin-left:15%; margin-top: 1em">You can disable
audible bells on a global basis. For example, a client that
replaces the keyboard bell with some other audible cue might
want to turn off the AudibleBell control to prevent the
server from also generating a sound and avoid cacophony. If
you disable audible bells and request to receive
XkbBellNotify events, you can generate feedback different
from the default bell.</p>
<p style="margin-left:15%; margin-top: 1em">You can,
however, override the AudibleBell control by calling one of
the functions that force the ringing of a bell in spite of
the setting of the AudibleBell control -
<i>XkbForceDeviceBell</i> or <i>XkbForceBell.</i> In this
case the server does not generate a bell event.</p>
<p style="margin-left:15%; margin-top: 1em">Just as some
keyboards can produce keyclicks to indicate when a key is
pressed or repeating, Xkb can provide feedback for the
controls by using special beep codes. The AccessXFeedback
control is used to configure the specific types of
operations that generate feedback.</p>
<p style="margin-left:15%; margin-top: 1em">Bell Names</p>
<p style="margin-left:15%; margin-top: 1em">You can
associate a name to an act of ringing a bell by converting
the name to an Atom and then using this name when you call
the functions listed in this chapter. If an event is
generated as a result, the name is then passed to all other
clients interested in receiving XkbBellNotify events. Note
that these are arbitrary names and that there is no binding
to any sounds. Any sounds or other effects (such as visual
bells on the screen) must be generated by a client
application upon receipt of the bell event containing the
name. There is no default name for the default keyboard
bell. The server does generate some predefined bells for the
AccessX controls. These named bells are shown in the Table 1
; the name is included in any bell event sent to clients
that have requested to receive XkbBellNotify events.</p>
<p style="margin-left:15%; margin-top: 1em">Audible
Bells</p>
<p style="margin-left:15%; margin-top: 1em">Using Xkb you
can generate bell events that do not necessarily ring the
system bell. This is useful if you need to use an audio
server instead of the system beep. For example, when an
audio client starts, it could disable the audible bell (the
system bell) and then listen for XkbBellNotify events. When
it receives a XkbBellNotify event, the audio client could
then send a request to an audio server to play a sound.</p>
<p style="margin-left:15%; margin-top: 1em">You can control
the audible bells feature by passing the XkbAudibleBellMask
to <i>XkbChangeEnabledControls.</i> If you set
XkbAudibleBellMask on, the server rings the system bell when
a bell event occurs. This is the default. If you set
XkbAudibleBellMask off and a bell event occurs, the server
does not ring the system bell unless you call
<i>XkbForceDeviceBell</i> or <i>XkbForceBell.</i></p>
<p style="margin-left:15%; margin-top: 1em">Audible bells
are also part of the per-client auto-reset controls.</p>
<p style="margin-left:15%; margin-top: 1em">Bell
Functions</p>
<p style="margin-left:15%; margin-top: 1em">Use the
functions described in this section to ring bells and to
generate bell events.</p>
<p style="margin-left:15%; margin-top: 1em">The input
extension has two types of feedbacks that can generate bells
- bell feedback and keyboard feedback. Some of the functions
in this section have <i>bell_class</i> and <i>bell_id</i>
parameters; set them as follows: Set <i>bell_class</i> to
BellFeedbackClass or KbdFeedbackClass. A device can have
more than one feedback of each type; set <i>bell_id</i> to
the particular bell feedback of <i>bell_class</i> type.</p>
<p style="margin-left:15%; margin-top: 1em">The Table 2
shows the conditions that cause a bell to sound or an
XkbBellNotifyEvent to be generated when a bell function is
called.</p>
<p style="margin-left:15%; margin-top: 1em">Set
<i>percent</i> to be the volume relative to the base volume
for the keyboard as described for .I XBell.</p>
<p style="margin-left:15%; margin-top: 1em">Note that
<i>bell_class</i> and <i>bell_id</i> indicate the bell to
physically ring. <i>name</i> is simply an arbitrary moniker
for the client application’s use.</p>
<p style="margin-left:15%; margin-top: 1em">To determine
the current feedback settings of an extension input device,
use <i>XGetFeedbackControl.</i> See the X input extension
documentation for more information on
<i>XGetFeedbackControl</i> and related data structures.</p>
<p style="margin-left:15%; margin-top: 1em">If a compatible
keyboard extension is not present in the X server,
<i>XkbDeviceBell</i> immediately returns False. Otherwise,
<i>XkbDeviceBell</i> rings the bell as specified for the
display and keyboard device and returns True. If you have
disabled the audible bell, the server does not ring the
system bell, although it does generate a
<i>XkbBellNotify</i> event.</p>
<p style="margin-left:15%; margin-top: 1em">You can call
<i>XkbDeviceBell</i> without first initializing the keyboard
extension.</p>
<h2>STRUCTURES
<a name="STRUCTURES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Xkb generates
XkbBellNotify events for all bells except for those
resulting from calls to <i>XkbForceDeviceBell</i> and
<i>XkbForceBell.</i> To receive XkbBellNotify events under
all possible conditions, pass XkbBellNotifyMask in both the
<i>bits_to_change</i> and <i>values_for_bits</i> parameters
to <i>XkbSelectEvents.</i></p>
<p style="margin-left:9%; margin-top: 1em">The
XkbBellNotify event has no event details. It is either
selected or it is not. However, you can call
<i>XkbSelectEventDetails</i> using XkbBellNotify as the
<i>event_type</i> and specifying XkbAllBellEventsMask in
<i>bits_to_change</i> and <i>values_for_bits.</i> This has
the same effect as a call to <i>XkbSelectEvents.</i></p>
<p style="margin-left:9%; margin-top: 1em">The structure
for the XkbBellNotify event type contains:</p>
<p style="margin-left:9%; margin-top: 1em">typedef struct
_XkbBellNotify { <br/>
int type; /* Xkb extension base event code */ <br/>
unsigned long serial; /* X server serial number for event */
<br/>
Bool send_event; /* True =&gt; synthetically generated */
<br/>
Display * display; /* server connection where event
generated */ <br/>
Time time; /* server time when event generated */ <br/>
int xkb_type; /* XkbBellNotify */ <br/>
unsigned int device; /* Xkb device ID, will not be
XkbUseCoreKbd */ <br/>
int percent; /* requested volume as % of max */ <br/>
int pitch; /* requested pitch in Hz */ <br/>
int duration; /* requested duration in microseconds */ <br/>
unsigned int bell_class; /* X input extension feedback class
*/ <br/>
unsigned int bell_id; /* X input extension feedback ID */
<br/>
Atom name; /* "name" of requested bell */ <br/>
Window window; /* window associated with event */ <br/>
Bool event_only; /* False -&gt; the server did not produce a
beep */ <br/>
} XkbBellNotifyEvent;</p>
<p style="margin-left:9%; margin-top: 1em">If your
application needs to generate visual bell feedback on the
screen when it receives a bell event, use the window ID in
the XkbBellNotifyEvent, if present.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>XBell</b>(3),
<b>XkbBellNotify</b>(3), <b>XkbChangeEnabledControls</b>(3),
<b>XkbDeviceBell</b>(3), <b>XkbForceBell</b>(3),
<b>XkbForceDeviceBell</b>(3), <b>XGetFeedbackControl</b>(3),
<b>XkbSelectEvents</b>(3)</p>
<hr/>
</body>
</html>
