<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:48:55 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SD_JOURNAL_OPEN</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">SD_JOURNAL_OPEN</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">sd_journal_open,
sd_journal_open_directory, sd_journal_open_directory_fd,
sd_journal_open_files, sd_journal_open_files_fd,
sd_journal_open_namespace, sd_journal_close, sd_journal,
SD_JOURNAL_LOCAL_ONLY, SD_JOURNAL_RUNTIME_ONLY,
SD_JOURNAL_SYSTEM, SD_JOURNAL_CURRENT_USER,
SD_JOURNAL_OS_ROOT, SD_JOURNAL_ALL_NAMESPACES,
SD_JOURNAL_INCLUDE_DEFAULT_NAMESPACE,
SD_JOURNAL_TAKE_DIRECTORY_FD − Open the system journal
for reading</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;systemd/sd−journal.h&gt;</b></p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="90%">
<p style="margin-top: 1em"><b>int
sd_journal_open(sd_journal **</b><i>ret</i><b>,
int </b><i>flags</i><b>);</b></p> </td>
<td width="1%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="90%">
<p style="margin-top: 1em"><b>int
sd_journal_open_namespace(sd_journal **</b><i>ret</i><b>,
const char *</b><i>namespace</i><b>,
int </b><i>flags</i><b>);</b></p> </td>
<td width="1%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="90%">
<p style="margin-top: 1em"><b>int
sd_journal_open_directory(sd_journal **</b><i>ret</i><b>,
const char *</b><i>path</i><b>,
int </b><i>flags</i><b>);</b></p> </td>
<td width="1%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="90%">
<p style="margin-top: 1em"><b>int
sd_journal_open_directory_fd(sd_journal **</b><i>ret</i><b>,
int </b><i>fd</i><b>,
int </b><i>flags</i><b>);</b></p> </td>
<td width="1%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="90%">
<p style="margin-top: 1em"><b>int
sd_journal_open_files(sd_journal **</b><i>ret</i><b>,
const char **</b><i>paths</i><b>,
int </b><i>flags</i><b>);</b></p> </td>
<td width="1%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="90%">
<p style="margin-top: 1em"><b>int
sd_journal_open_files_fd(sd_journal **</b><i>ret</i><b>,
int </b><i>fds[]</i><b>,
unsigned </b><i>n_fds</i><b>,
int </b><i>flags</i><b>);</b></p> </td>
<td width="1%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="90%">
<p style="margin-top: 1em"><b>void
sd_journal_close(sd_journal *</b><i>j</i><b>);</b></p> </td>
<td width="1%">
</td></tr>
</table>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_open()</b>
opens the log journal for reading. It will find all journal
files automatically and interleave them automatically when
reading. As first argument it takes a pointer to a
<i>sd_journal</i> pointer, which, on success, will contain a
journal context object. The second argument is a flags
field, which may consist of the following flags ORed
together: <b>SD_JOURNAL_LOCAL_ONLY</b> makes sure only
journal files generated on the local machine will be opened.
<b>SD_JOURNAL_RUNTIME_ONLY</b> makes sure only volatile
journal files will be opened, excluding those which are
stored on persistent storage. <b>SD_JOURNAL_SYSTEM</b> will
cause journal files of system services and the kernel (in
opposition to user session processes) to be opened.
<b>SD_JOURNAL_CURRENT_USER</b> will cause journal files of
the current user to be opened. If neither
<b>SD_JOURNAL_SYSTEM</b> nor <b>SD_JOURNAL_CURRENT_USER</b>
are specified, all journal file types will be opened.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_open_namespace()</b>
is similar to <b>sd_journal_open()</b> but takes an
additional <i>namespace</i> parameter that specifies which
journal namespace to operate on. If specified as <b>NULL</b>
the call is identical to <b>sd_journal_open()</b>. If
non−<b>NULL</b> only data from the namespace
identified by the specified parameter is accessed. This call
understands two additional flags: if
<b>SD_JOURNAL_ALL_NAMESPACES</b> is specified the
<i>namespace</i> parameter is ignored and all defined
namespaces are accessed simultaneously; if
<b>SD_JOURNAL_INCLUDE_DEFAULT_NAMESPACE</b> the specified
namespace and the default namespace are accessed but no
others (this flag has no effect when <i>namespace</i> is
passed as <b>NULL</b>). For details about journal namespaces
see <b>systemd-journald.service</b>(8).</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_open_directory()</b>
is similar to <b>sd_journal_open()</b> but takes an absolute
directory path as argument. All journal files in this
directory will be opened and interleaved automatically. This
call also takes a flags argument. The flags parameters
accepted by this call are <b>SD_JOURNAL_OS_ROOT</b>,
<b>SD_JOURNAL_SYSTEM</b>, and
<b>SD_JOURNAL_CURRENT_USER</b>. If <b>SD_JOURNAL_OS_ROOT</b>
is specified, journal files are searched for below the usual
/var/log/journal and /run/log/journal relative to the
specified path, instead of directly beneath it. The other
two flags limit which files are opened, the same as for
<b>sd_journal_open()</b>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_open_directory_fd()</b>
is similar to <b>sd_journal_open_directory()</b>, but takes
a file descriptor referencing a directory in the file system
instead of an absolute file system path. In addition to the
flags accepted by <b>sd_journal_open_directory()</b>, this
function also accepts <b>SD_JOURNAL_TAKE_DIRECTORY_FD</b>.
If <b>SD_JOURNAL_TAKE_DIRECTORY_FD</b> is specified, the
function will take the ownership of the specified file
descriptor on success, and it will be closed by
<b>sd_journal_close()</b>, hence the caller of the function
must not close the file descriptor. When the flag is not
specified, <b>sd_journal_close()</b> will not close the file
descriptor, so the caller should close it after
<b>sd_journal_close()</b>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_open_files()</b>
is similar to <b>sd_journal_open()</b> but takes a
<b>NULL</b>−terminated list of file paths to open. All
files will be opened and interleaved automatically. This
call also takes a flags argument, but it must be passed as 0
as no flags are currently understood for this call. Please
note that in the case of a live journal, this function is
only useful for debugging, because individual journal files
can be rotated at any moment, and the opening of specific
files is inherently racy.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_open_files_fd()</b>
is similar to <b>sd_journal_open_files()</b> but takes an
array of open file descriptors that must reference journal
files, instead of an array of file system paths. Pass the
array of file descriptors as second argument, and the number
of array entries in the third. The flags parameter must be
passed as 0.</p>
<p style="margin-left:9%; margin-top: 1em"><i>sd_journal</i>
objects cannot be used in the child after a fork. Functions
which take a journal object as an argument
(<b>sd_journal_next()</b> and others) will return
<b>−ECHILD</b> after a fork.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_close()</b>
will close the journal context allocated with
<b>sd_journal_open()</b> or
<b>sd_journal_open_directory()</b> and free its
resources.</p>
<p style="margin-left:9%; margin-top: 1em">When opening the
journal only journal files accessible to the calling user
will be opened. If journal files are not accessible to the
caller, this will be silently ignored.</p>
<p style="margin-left:9%; margin-top: 1em">See
<b>sd_journal_next</b>(3) for an example of how to iterate
through the journal after opening it with
<b>sd_journal_open()</b>.</p>
<p style="margin-left:9%; margin-top: 1em">A journal
context object returned by <b>sd_journal_open()</b>
references a specific journal entry as <i>current</i> entry,
similar to a file seek index in a classic file system file,
but without absolute positions. It may be altered with
<b>sd_journal_next</b>(3) and <b>sd_journal_seek_head</b>(3)
and related calls. The current entry position may be
exported in <i>cursor</i> strings, as accessible via
<b>sd_journal_get_cursor</b>(3). Cursor strings may be used
to globally identify a specific journal entry in a stable
way and then later to seek to it (or if the specific entry
is not available locally, to its closest entry in time)
<b>sd_journal_seek_cursor</b>(3).</p>
<p style="margin-left:9%; margin-top: 1em">Notification of
journal changes is available via <b>sd_journal_get_fd()</b>
and related calls.</p>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
<b>sd_journal_open()</b>,
<b>sd_journal_open_directory()</b>, and
<b>sd_journal_open_files()</b> calls return 0 on success or
a negative errno−style error code.
<b>sd_journal_close()</b> returns nothing.</p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">All functions
listed here are thread−agnostic and only a single
specific thread may operate on a given object during its
entire lifetime. It's safe to allocate multiple independent
objects and use each from a specific thread in parallel.
However, it's not safe to allocate such an object in one
thread, and operate or free it from any other, even if
locking is used to ensure these threads don't operate on it
at the very same time.</p>
<p style="margin-left:9%; margin-top: 1em">Functions
described here are available as a shared library, which can
be compiled against and linked to with the
<b>libsystemd pkg-config</b>(1) file.</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_open()</b>,
<b>sd_journal_open_directory()</b>, and
<b>sd_journal_close()</b> were added in version 187.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_open_files()</b>
was added in version 205.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_open_directory_fd()</b>
and <b>sd_journal_open_files_fd()</b> were added in version
230.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_open_namespace()</b>
was added in version 245.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>systemd</b>(1),
<b>sd-journal</b>(3), <b>systemd-journald.service</b>(8),
<b>sd_journal_next</b>(3), <b>sd_journal_get_data</b>(3)</p>
<hr/>
</body>
</html>
