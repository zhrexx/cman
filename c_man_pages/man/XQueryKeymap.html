<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:54:49 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>XChangeKeyboardControl</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">XChangeKeyboardControl</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNTAX">SYNTAX</a><br/>
<a href="#ARGUMENTS">ARGUMENTS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#STRUCTURES">STRUCTURES</a><br/>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">XChangeKeyboardControl,
XGetKeyboardControl, XAutoRepeatOn, XAutoRepeatOff, XBell,
XQueryKeymap, XKeyboardControl − manipulate keyboard
settings and keyboard control structure</p>
<h2>SYNTAX
<a name="SYNTAX"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em">int
XChangeKeyboardControl(Display *<i>display</i>, unsigned
long <i>value_mask</i>, XKeyboardControl
*<i>values</i>);</p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em">int XGetKeyboardControl(Display
*<i>display</i>, XKeyboardState *<i>values_return</i>);</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em">int XAutoRepeatOn(Display
*<i>display</i>);</p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em">int XAutoRepeatOff(Display
*<i>display</i>);</p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em">int XBell(Display
*<i>display</i>, int <i>percent</i>);</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em">int XQueryKeymap(Display
*<i>display</i>, char <i>keys_return</i>[32]);</p></td></tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>
<td width="9%"></td>
<td width="9%"></td>
<td width="4%"></td>
<td width="52%">
</td>
<td width="26%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="9%">
<p><i>display</i></p></td>
<td width="4%"></td>
<td width="52%">
<p>Specifies the connection to the X server.</p></td>
<td width="26%">
</td></tr>
</table>
<p style="margin-left:9%;"><i>keys_return</i></p>
<p style="margin-left:22%;">Returns an array of bytes that
identifies which keys are pressed down. Each bit represents
one key of the keyboard.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="9%">
<p><i>percent</i></p></td>
<td width="4%"></td>
<td width="78%">
<p>Specifies the volume for the bell, which can range from
−100 to 100 inclusive.</p></td></tr>
</table>
<p style="margin-left:9%;"><i>value_mask</i></p>
<p style="margin-left:22%;">Specifies which controls to
change. This mask is the bitwise inclusive OR of the valid
control mask bits.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p><i>values</i></p></td>
<td width="5%"></td>
<td width="69%">
<p>Specifies one value for each bit set to 1 in the
mask.</p> </td>
<td width="9%">
</td></tr>
</table>
<p style="margin-left:9%;"><i>values_return</i></p>
<p style="margin-left:22%;">Returns the current keyboard
controls in the specified <b>XKeyboardState</b>
structure.</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
<b>XChangeKeyboardControl</b> function controls the keyboard
characteristics defined by the <b>XKeyboardControl</b>
structure. The value_mask argument specifies which values
are to be changed.</p>
<p style="margin-left:9%; margin-top: 1em"><b>XChangeKeyboardControl</b>
can generate <b>BadMatch</b> and <b>BadValue</b> errors.</p>
<p style="margin-left:9%; margin-top: 1em">The
<b>XGetKeyboardControl</b> function returns the current
control values for the keyboard to the <b>XKeyboardState</b>
structure.</p>
<p style="margin-left:9%; margin-top: 1em">The
<b>XAutoRepeatOn</b> function turns on auto-repeat for the
keyboard on the specified display.</p>
<p style="margin-left:9%; margin-top: 1em">The
<b>XAutoRepeatOff</b> function turns off auto-repeat for the
keyboard on the specified display.</p>
<p style="margin-left:9%; margin-top: 1em">The <b>XBell</b>
function rings the bell on the keyboard on the specified
display, if possible. The specified volume is relative to
the base volume for the keyboard. If the value for the
percent argument is not in the range −100 to 100
inclusive, a <b>BadValue</b> error results. The volume at
which the bell rings when the percent argument is
nonnegative is:</p>
<p style="margin-left:18%; margin-top: 1em">base −
[(base * percent) / 100] + percent</p>
<p style="margin-left:9%; margin-top: 1em">The volume at
which the bell rings when the percent argument is negative
is:</p>
<p style="margin-left:18%; margin-top: 1em">base + [(base *
percent) / 100]</p>
<p style="margin-left:9%; margin-top: 1em">To change the
base volume of the bell, use
<b>XChangeKeyboardControl</b>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>XBell</b> can
generate a <b>BadValue</b> error.</p>
<p style="margin-left:9%; margin-top: 1em">The
<b>XQueryKeymap</b> function returns a bit vector for the
logical state of the keyboard, where each bit set to 1
indicates that the corresponding key is currently pressed
down. The vector is represented as 32 bytes. Byte N (from 0)
contains the bits for keys 8N to 8N + 7 with the least
significant bit in the byte representing key 8N.</p>
<p style="margin-left:9%; margin-top: 1em">Note that the
logical state of a device (as seen by client applications)
may lag the physical state if device event processing is
frozen.</p>
<h2>STRUCTURES
<a name="STRUCTURES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
<b>XKeyboardControl</b> structure contains:</p>
<p style="margin-left:9%; margin-top: 1em">/* Mask bits for
ChangeKeyboardControl */ <br/>
/* Values */</p>
<p style="margin-left:9%; margin-top: 1em">typedef struct {
<br/>
int key_click_percent; <br/>
int bell_percent; <br/>
int bell_pitch; <br/>
int bell_duration; <br/>
int led; <br/>
int led_mode; /* LedModeOn, LedModeOff */ <br/>
int key; <br/>
int auto_repeat_mode; /* AutoRepeatModeOff,
AutoRepeatModeOn, <br/>
AutoRepeatModeDefault */ <br/>
} XKeyboardControl;</p>
<p style="margin-left:9%; margin-top: 1em">The
key_click_percent member sets the volume for key clicks
between 0 (off) and 100 (loud) inclusive, if possible. A
setting of −1 restores the default. Other negative
values generate a <b>BadValue</b> error.</p>
<p style="margin-left:9%; margin-top: 1em">The bell_percent
sets the base volume for the bell between 0 (off) and 100
(loud) inclusive, if possible. A setting of −1
restores the default. Other negative values generate a
<b>BadValue</b> error. The bell_pitch member sets the pitch
(specified in Hz) of the bell, if possible. A setting of
−1 restores the default. Other negative values
generate a <b>BadValue</b> error. The bell_duration member
sets the duration of the bell specified in milliseconds, if
possible. A setting of −1 restores the default. Other
negative values generate a <b>BadValue</b> error.</p>
<p style="margin-left:9%; margin-top: 1em">If both the
led_mode and led members are specified, the state of that
LED is changed, if possible. The led_mode member can be set
to <b>LedModeOn</b> or <b>LedModeOff</b>. If only led_mode
is specified, the state of all LEDs are changed, if
possible. At most 32 LEDs numbered from one are supported.
No standard interpretation of LEDs is defined. If led is
specified without led_mode, a <b>BadMatch</b> error
results.</p>
<p style="margin-left:9%; margin-top: 1em">If both the
auto_repeat_mode and key members are specified, the
auto_repeat_mode of that key is changed (according to
<b>AutoRepeatModeOn</b>, <b>AutoRepeatModeOff</b>, or
<b>AutoRepeatModeDefault</b>), if possible. If only
auto_repeat_mode is specified, the global auto_repeat_mode
for the entire keyboard is changed, if possible, and does
not affect the per-key settings. If a key is specified
without an auto_repeat_mode, a <b>BadMatch</b> error
results. Each key has an individual mode of whether or not
it should auto-repeat and a default setting for the mode. In
addition, there is a global mode of whether auto-repeat
should be enabled or not and a default setting for that
mode. When global mode is <b>AutoRepeatModeOn</b>, keys
should obey their individual auto-repeat modes. When global
mode is <b>AutoRepeatModeOff</b>, no keys should
auto-repeat. An auto-repeating key generates alternating
<b>KeyPress</b> and <b>KeyRelease</b> events. When a key is
used as a modifier, it is desirable for the key not to
auto-repeat, regardless of its auto-repeat setting.</p>
<p style="margin-left:9%; margin-top: 1em">The
<b>XKeyboardState</b> structure contains:</p>
<p style="margin-left:9%; margin-top: 1em">typedef struct {
<br/>
int key_click_percent; <br/>
int bell_percent; <br/>
unsigned int bell_pitch, bell_duration; <br/>
unsigned long led_mask; <br/>
int global_auto_repeat; <br/>
char auto_repeats[32]; <br/>
} XKeyboardState;</p>
<p style="margin-left:9%; margin-top: 1em">For the LEDs,
the least significant bit of led_mask corresponds to LED
one, and each bit set to 1 in led_mask indicates an LED that
is lit. The global_auto_repeat member can be set to
<b>AutoRepeatModeOn</b> or <b>AutoRepeatModeOff</b>. The
auto_repeats member is a bit vector. Each bit set to 1
indicates that auto-repeat is enabled for the corresponding
key. The vector is represented as 32 bytes. Byte N (from 0)
contains the bits for keys 8N to 8N + 7 with the least
significant bit in the byte representing key 8N.</p>
<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="10%">
<p style="margin-top: 1em"><b>BadMatch</b></p></td>
<td width="3%"></td>
<td width="78%">
<p style="margin-top: 1em">Some argument or pair of
arguments has the correct type and range but fails to match
in some other way required by the request.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="10%">
<p><b>BadValue</b></p></td>
<td width="3%"></td>
<td width="78%">
<p>Some numeric value falls outside the range of values
accepted by the request. Unless a specific range is
specified for an argument, the full range defined by the
argument’s type is accepted. Any argument defined as a
set of alternatives can generate this error.</p></td></tr>
</table>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">XChangeKeyboardMapping(3),
XkbChangeEnabledControls(3), XkbBell(3), XkbDeviceBell(3),
XkbGetMap(3), XSetPointerMapping(3) <i><br/>
Xlib − C Language X Interface</i></p>
<hr/>
</body>
</html>
