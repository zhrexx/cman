<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:40:49 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>listen</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">listen</h1>
<a href="#NAME">NAME</a><br/>
<a href="#LIBRARY">LIBRARY</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#ERRORS">ERRORS</a><br/>
<a href="#STANDARDS">STANDARDS</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#EXAMPLES">EXAMPLES</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">listen −
listen for connections on a socket</p>
<h2>LIBRARY
<a name="LIBRARY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Standard C
library (<i>libc</i>, <i>−lc</i>)</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;sys/socket.h&gt;</b></p>
<p style="margin-left:9%; margin-top: 1em"><b>int
listen(int</b> <i>sockfd</i><b>, int</b>
<i>backlog</i><b>);</b></p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>listen</b>()
marks the socket referred to by <i>sockfd</i> as a passive
socket, that is, as a socket that will be used to accept
incoming connection requests using <b>accept</b>(2).</p>
<p style="margin-left:9%; margin-top: 1em">The
<i>sockfd</i> argument is a file descriptor that refers to a
socket of type <b>SOCK_STREAM</b> or
<b>SOCK_SEQPACKET</b>.</p>
<p style="margin-left:9%; margin-top: 1em">The
<i>backlog</i> argument defines the maximum length to which
the queue of pending connections for <i>sockfd</i> may grow.
If a connection request arrives when the queue is full, the
client may receive an error with an indication of
<b>ECONNREFUSED</b> or, if the underlying protocol supports
retransmission, the request may be ignored so that a later
reattempt at connection succeeds.</p>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">On success, zero
is returned. On error, −1 is returned, and
<i>errno</i> is set to indicate the error.</p>
<h2>ERRORS
<a name="ERRORS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>EADDRINUSE</b></p>
<p style="margin-left:18%;">Another socket is already
listening on the same port.</p>
<p style="margin-left:9%;"><b>EADDRINUSE</b></p>
<p style="margin-left:18%;">(Internet domain sockets) The
socket referred to by <i>sockfd</i> had not previously been
bound to an address and, upon attempting to bind it to an
ephemeral port, it was determined that all port numbers in
the ephemeral port range are currently in use. See the
discussion of <i>/proc/sys/net/ipv4/ip_local_port_range</i>
in <b>ip</b>(7).</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="6%">
<p><b>EBADF</b></p></td>
<td width="3%"></td>
<td width="65%">
<p>The argument <i>sockfd</i> is not a valid file
descriptor.</p> </td>
<td width="17%">
</td></tr>
</table>
<p style="margin-left:9%;"><b>ENOTSOCK</b></p>
<p style="margin-left:18%;">The file descriptor
<i>sockfd</i> does not refer to a socket.</p>
<p style="margin-left:9%;"><b>EOPNOTSUPP</b></p>
<p style="margin-left:18%;">The socket is not of a type
that supports the <b>listen</b>() operation.</p>
<h2>STANDARDS
<a name="STANDARDS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">POSIX.1-2008.</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">POSIX.1-2001,
4.4BSD (first appeared in 4.2BSD).</p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">To accept
connections, the following steps are performed:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="14%"></td>
<td width="4%">
<p>(1)</p></td>
<td width="3%"></td>
<td width="79%">
<p>A socket is created with <b>socket</b>(2).</p></td></tr>
<tr align="left" valign="top">
<td width="14%"></td>
<td width="4%">
<p>(2)</p></td>
<td width="3%"></td>
<td width="79%">
<p>The socket is bound to a local address using
<b>bind</b>(2), so that other sockets may be
<b>connect</b>(2)ed to it.</p></td></tr>
<tr align="left" valign="top">
<td width="14%"></td>
<td width="4%">
<p>(3)</p></td>
<td width="3%"></td>
<td width="79%">
<p>A willingness to accept incoming connections and a queue
limit for incoming connections are specified with
<b>listen</b>().</p> </td></tr>
<tr align="left" valign="top">
<td width="14%"></td>
<td width="4%">
<p>(4)</p></td>
<td width="3%"></td>
<td width="79%">
<p>Connections are accepted with <b>accept</b>(2).</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">The behavior of
the <i>backlog</i> argument on TCP sockets changed with
Linux 2.2. Now it specifies the queue length for
<i>completely</i> established sockets waiting to be
accepted, instead of the number of incomplete connection
requests. The maximum length of the queue for incomplete
sockets can be set using
<i>/proc/sys/net/ipv4/tcp_max_syn_backlog</i>. When
syncookies are enabled there is no logical maximum length
and this setting is ignored. See <b>tcp</b>(7) for more
information.</p>
<p style="margin-left:9%; margin-top: 1em">If the
<i>backlog</i> argument is greater than the value in
<i>/proc/sys/net/core/somaxconn</i>, then it is silently
capped to that value. Since Linux 5.4, the default in this
file is 4096; in earlier kernels, the default value is 128.
Before Linux 2.4.25, this limit was a hard coded value,
<b>SOMAXCONN</b>, with the value 128.</p>
<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">See
<b>bind</b>(2).</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>accept</b>(2),
<b>bind</b>(2), <b>connect</b>(2), <b>socket</b>(2),
<b>socket</b>(7)</p>
<hr/>
</body>
</html>
