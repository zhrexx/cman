<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:43:22 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>dlinfo</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">dlinfo</h1>
<a href="#NAME">NAME</a><br/>
<a href="#LIBRARY">LIBRARY</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#ATTRIBUTES">ATTRIBUTES</a><br/>
<a href="#VERSIONS">VERSIONS</a><br/>
<a href="#STANDARDS">STANDARDS</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#EXAMPLES">EXAMPLES</a><br/>
<a href="#Program source">Program source</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">dlinfo −
obtain information about a dynamically loaded object</p>
<h2>LIBRARY
<a name="LIBRARY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Dynamic linking
library (<i>libdl</i>, <i>−ldl</i>)</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#define
_GNU_SOURCE <br/>
#include &lt;link.h&gt; <br/>
#include &lt;dlfcn.h&gt;</b></p>
<p style="margin-left:9%; margin-top: 1em"><b>int
dlinfo(void *restrict</b> handle<b>, int</b> request<b>,
void *restrict</b> info<b>);</b></p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
<b>dlinfo</b>() function obtains information about the
dynamically loaded object referred to by <i>handle</i>
(typically obtained by an earlier call to <b>dlopen</b>(3)
or <b>dlmopen</b>(3)). The <i>request</i> argument specifies
which information is to be returned. The <i>info</i>
argument is a pointer to a buffer used to store information
returned by the call; the type of this argument depends on
<i>request</i>.</p>
<p style="margin-left:9%; margin-top: 1em">The following
values are supported for <i>request</i> (with the
corresponding type for <i>info</i> shown in parentheses):
<b><br/>
RTLD_DI_LMID</b> (<i>Lmid_t *</i>)</p>
<p style="margin-left:18%;">Obtain the ID of the link-map
list (namespace) in which <i>handle</i> is loaded.</p>
<p style="margin-left:9%;"><b>RTLD_DI_LINKMAP</b>
(<i>struct link_map **</i>)</p>
<p style="margin-left:18%;">Obtain a pointer to the
<i>link_map</i> structure corresponding to <i>handle</i>.
The <i>info</i> argument points to a pointer to a
<i>link_map</i> structure, defined in <i>&lt;link.h&gt;</i>
as:</p>
<p style="margin-left:23%; margin-top: 1em">struct link_map
{ <br/>
ElfW(Addr) l_addr; /* Difference between the <br/>
address in the ELF file and <br/>
the address in memory */ <br/>
char *l_name; /* Absolute pathname where <br/>
object was found */ <br/>
ElfW(Dyn) *l_ld; /* Dynamic section of the <br/>
shared object */ <br/>
struct link_map *l_next, *l_prev; <br/>
/* Chain of loaded objects */ <br/>
/* Plus additional fields private to the <br/>
implementation */ <br/>
};</p>
<p style="margin-left:9%;"><b>RTLD_DI_ORIGIN</b> (<i>char
*</i>)</p>
<p style="margin-left:18%;">Copy the pathname of the origin
of the shared object corresponding to <i>handle</i> to the
location pointed to by <i>info</i>.</p>
<p style="margin-left:9%;"><b>RTLD_DI_SERINFO</b>
(<i>Dl_serinfo *</i>)</p>
<p style="margin-left:18%;">Obtain the library search paths
for the shared object referred to by <i>handle</i>. The
<i>info</i> argument is a pointer to a <i>Dl_serinfo</i>
that contains the search paths. Because the number of search
paths may vary, the size of the structure pointed to by
<i>info</i> can vary. The <b>RTLD_DI_SERINFOSIZE</b> request
described below allows applications to size the buffer
suitably. The caller must perform the following steps:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="18%"></td>
<td width="4%">
<p>(1)</p></td>
<td width="2%"></td>
<td width="76%">
<p>Use a <b>RTLD_DI_SERINFOSIZE</b> request to populate a
<i>Dl_serinfo</i> structure with the size (<i>dls_size</i>)
of the structure needed for the subsequent
<b>RTLD_DI_SERINFO</b> request.</p></td></tr>
<tr align="left" valign="top">
<td width="18%"></td>
<td width="4%">
<p>(2)</p></td>
<td width="2%"></td>
<td width="76%">
<p>Allocate a <i>Dl_serinfo</i> buffer of the correct size
(<i>dls_size</i>).</p> </td></tr>
<tr align="left" valign="top">
<td width="18%"></td>
<td width="4%">
<p>(3)</p></td>
<td width="2%"></td>
<td width="76%">
<p>Use a further <b>RTLD_DI_SERINFOSIZE</b> request to
populate the <i>dls_size</i> and <i>dls_cnt</i> fields of
the buffer allocated in the previous step.</p></td></tr>
<tr align="left" valign="top">
<td width="18%"></td>
<td width="4%">
<p>(4)</p></td>
<td width="2%"></td>
<td width="76%">
<p>Use a <b>RTLD_DI_SERINFO</b> to obtain the library
search paths.</p></td></tr>
</table>
<p style="margin-left:18%; margin-top: 1em">The
<i>Dl_serinfo</i> structure is defined as follows:</p>
<p style="margin-left:23%; margin-top: 1em">typedef struct
{ <br/>
size_t dls_size; /* Size in bytes of <br/>
the whole buffer */ <br/>
unsigned int dls_cnt; /* Number of elements <br/>
in 'dls_serpath' */ <br/>
Dl_serpath dls_serpath[1]; /* Actually longer, <br/>
'dls_cnt' elements */ <br/>
} Dl_serinfo;</p>
<p style="margin-left:18%; margin-top: 1em">Each of the
<i>dls_serpath</i> elements in the above structure is a
structure of the following form:</p>
<p style="margin-left:23%; margin-top: 1em">typedef struct
{ <br/>
char *dls_name; /* Name of library search <br/>
path directory */ <br/>
unsigned int dls_flags; /* Indicates where this <br/>
directory came from */ <br/>
} Dl_serpath;</p>
<p style="margin-left:18%; margin-top: 1em">The
<i>dls_flags</i> field is currently unused, and always
contains zero.</p>
<p style="margin-left:9%;"><b>RTLD_DI_SERINFOSIZE</b>
(<i>Dl_serinfo *</i>)</p>
<p style="margin-left:18%;">Populate the <i>dls_size</i>
and <i>dls_cnt</i> fields of the <i>Dl_serinfo</i> structure
pointed to by <i>info</i> with values suitable for
allocating a buffer for use in a subsequent
<b>RTLD_DI_SERINFO</b> request.</p>
<p style="margin-left:9%;"><b>RTLD_DI_TLS_MODID</b>
(<i>size_t *</i>, since glibc 2.4)</p>
<p style="margin-left:18%;">Obtain the module ID of this
shared object’s TLS (thread-local storage) segment, as
used in TLS relocations. If this object does not define a
TLS segment, zero is placed in <i>*info</i>.</p>
<p style="margin-left:9%;"><b>RTLD_DI_TLS_DATA</b> (<i>void
**</i>, since glibc 2.4)</p>
<p style="margin-left:18%;">Obtain a pointer to the calling
thread’s TLS block corresponding to this shared
object’s TLS segment. If this object does not define a
PT_TLS segment, or if the calling thread has not allocated a
block for it, NULL is placed in <i>*info</i>.</p>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">On success,
<b>dlinfo</b>() returns 0. On failure, it returns −1;
the cause of the error can be diagnosed using
<b>dlerror</b>(3).</p>
<h2>ATTRIBUTES
<a name="ATTRIBUTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">For an
explanation of the terms used in this section, see
<b>attributes</b>(7).</p>
<h2>VERSIONS
<a name="VERSIONS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The sets of
requests supported by the various implementations overlaps
only partially.</p>
<h2>STANDARDS
<a name="STANDARDS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">GNU.</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">glibc 2.3.3.
Solaris.</p>
<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The program
below opens a shared objects using <b>dlopen</b>(3) and then
uses the <b>RTLD_DI_SERINFOSIZE</b> and
<b>RTLD_DI_SERINFO</b> requests to obtain the library search
path list for the library. Here is an example of what we
might see when running the program:</p>
<p style="margin-left:14%; margin-top: 1em">$ <b>./a.out
/lib64/libm.so.6</b> <br/>
dls_serpath[0].dls_name = /lib64 <br/>
dls_serpath[1].dls_name = /usr/lib64</p>
<h3>Program source
<a name="Program source"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">#define
_GNU_SOURCE <br/>
#include &lt;dlfcn.h&gt; <br/>
#include &lt;link.h&gt; <br/>
#include &lt;stdio.h&gt; <br/>
#include &lt;stdlib.h&gt; <br/>
int <br/>
main(int argc, char *argv[]) <br/>
{ <br/>
void *handle; <br/>
Dl_serinfo serinfo; <br/>
Dl_serinfo *sip; <br/>
if (argc != 2) { <br/>
fprintf(stderr, "Usage: %s &lt;libpath&gt;\n",
argv[0]); <br/>
exit(EXIT_FAILURE); <br/>
} <br/>
/* Obtain a handle for shared object specified on command
line. */ <br/>
handle = dlopen(argv[1], RTLD_NOW); <br/>
if (handle == NULL) { <br/>
fprintf(stderr, "dlopen() failed: %s\n",
dlerror()); <br/>
exit(EXIT_FAILURE); <br/>
} <br/>
/* Discover the size of the buffer that we must pass to <br/>
RTLD_DI_SERINFO. */ <br/>
if (dlinfo(handle, RTLD_DI_SERINFOSIZE, &amp;serinfo) ==
−1) { <br/>
fprintf(stderr, "RTLD_DI_SERINFOSIZE failed:
%s\n", dlerror()); <br/>
exit(EXIT_FAILURE); <br/>
} <br/>
/* Allocate the buffer for use with RTLD_DI_SERINFO. */ <br/>
sip = malloc(serinfo.dls_size); <br/>
if (sip == NULL) { <br/>
perror("malloc"); <br/>
exit(EXIT_FAILURE); <br/>
} <br/>
/* Initialize the 'dls_size' and 'dls_cnt' fields in the
newly <br/>
allocated buffer. */ <br/>
if (dlinfo(handle, RTLD_DI_SERINFOSIZE, sip) == −1) {
<br/>
fprintf(stderr, "RTLD_DI_SERINFOSIZE failed:
%s\n", dlerror()); <br/>
exit(EXIT_FAILURE); <br/>
} <br/>
/* Fetch and print library search list. */ <br/>
if (dlinfo(handle, RTLD_DI_SERINFO, sip) == −1) { <br/>
fprintf(stderr, "RTLD_DI_SERINFO failed: %s\n",
dlerror()); <br/>
exit(EXIT_FAILURE); <br/>
} <br/>
for (size_t j = 0; j &lt; serinfo.dls_cnt; j++) <br/>
printf("dls_serpath[%zu].dls_name = %s\n", <br/>
j, sip−&gt;dls_serpath[j].dls_name); <br/>
exit(EXIT_SUCCESS); <br/>
}</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>dl_iterate_phdr</b>(3),
<b>dladdr</b>(3), <b>dlerror</b>(3), <b>dlopen</b>(3),
<b>dlsym</b>(3), <b>ld.so</b>(8)</p>
<hr/>
</body>
</html>
