<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:40:57 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>curs_trace</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">curs_trace</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#Functions">Functions</a><br/>
<a href="#Trace Parameter">Trace Parameter</a><br/>
<a href="#Command-line Utilities">Command-line Utilities</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br/>
<a href="#NCURSES_TRACE">NCURSES_TRACE</a><br/>
<a href="#PORTABILITY">PORTABILITY</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>curses_trace</b>,
<b>trace</b>, <b>_tracef</b>, <b>_traceattr</b>,
<b>_traceattr2</b>, <b>_tracecchar_t</b>,
<b>_tracecchar_t2</b>, <b>_tracechar</b>,
<b>_tracechtype</b>, <b>_tracechtype2</b>,
<b>_nc_tracebits</b>, <b>_tracedump</b>, <b>_tracemouse</b>
− <i>curses</i> debugging routines</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;curses.h&gt;</b></p>
<p style="margin-left:9%; margin-top: 1em"><b>unsigned
curses_trace(const unsigned</b>
<i>trace-mask</i><b>);</b></p>
<p style="margin-left:9%; margin-top: 1em"><b>void
_tracef(const char *</b><i>format</i><b>, ...);</b></p>
<p style="margin-left:9%; margin-top: 1em"><b>char
*_traceattr(attr_t</b> <i>attr</i><b>); <br/>
char *_traceattr2(int</b> <i>buffer</i><b>, chtype</b>
<i>ch</i><b>); <br/>
char *_tracecchar_t(const cchar_t *</b><i>string</i><b>);
<br/>
char *_tracecchar_t2(int</b> <i>buffer</i><b>, const cchar_t
*</b><i>string</i><b>); <br/>
char *_tracechar(int</b> <i>c</i><b>); <br/>
char *_tracechtype(chtype</b> <i>ch</i><b>); <br/>
char *_tracechtype2(int</b> <i>buffer</i><b>, chtype</b>
<i>ch</i><b>);</b></p>
<p style="margin-left:9%; margin-top: 1em"><b>void
_tracedump(const char *</b><i>label</i><b>, WINDOW
*</b><i>win</i><b>); <br/>
char *_nc_tracebits(void); <br/>
char *_tracemouse(const MEVENT
*</b><i>event</i><b>);</b></p>
<p style="margin-left:9%; margin-top: 1em"><i>/* deprecated
*/</i> <b><br/>
void trace(const unsigned int</b>
<i>trace-mask</i><b>);</b></p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The <i>curses
trace</i> routines are used for debugging the <i>ncurses</i>
libraries, as well as applications which use the
<i>ncurses</i> libraries. Some limitations apply:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>Aside from <b>curses_trace</b>, the other functions are
normally available only with the debugging library e.g.,
<b>libncurses_g.a</b>.</p> </td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">All of the
trace functions may be compiled into any model (shared,
static, profile) by defining the symbol <b>TRACE</b>.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em">Additionally, the functions
which use <b>cchar_t</b> are only available with the
wide-character configuration of the libraries.</p></td></tr>
</table>
<h3>Functions
<a name="Functions"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">The principal
parts of this interface are</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>curses_trace</b>, which
selectively enables different tracing features, and</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p><b>_tracef</b>, which writes formatted data to the
<i>trace</i> file.</p></td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">The other
functions either return a pointer to a string-area
(allocated by the corresponding function), or return no
value (such as <b>_tracedump</b>, which implements the
screen dump for <b>TRACE_UPDATE</b>). The caller should not
free these strings, since the allocation is reused on
successive calls. To work around the problem of a single
string-area per function, some use a buffer-number
parameter, telling the library to allocate additional
string-areas.</p>
<p style="margin-left:9%; margin-top: 1em">The
<b>curses_trace</b> function is always available, whether or
not the other trace functions are available:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em">If tracing is available, calling
<b>curses_trace</b> with a nonzero parameter updates the
trace mask, and returns the previous trace mask.</p></td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">When the trace
mask is nonzero, <i>ncurses</i> creates the file
“trace” in the current directory for output. If
the file already exists, no tracing is done.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="76%">
<p style="margin-top: 1em">If tracing is not available,
<b>curses_trace</b> returns zero (0).</p></td>
<td width="10%">
</td></tr>
</table>
<h3>Trace Parameter
<a name="Trace Parameter"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">The trace
parameter is formed by OR’ing values from the list of
<b>TRACE_</b><i>xxx</i> definitions in
<b>&lt;curses.h&gt;</b>. These include: <b><br/>
TRACE_DISABLE</b></p>
<p style="margin-left:15%;">turn off tracing by passing a
zero parameter.</p>
<p style="margin-left:15%; margin-top: 1em">The library
flushes the output file, but retains an open file-descriptor
to the trace file so that it can resume tracing later if a
nonzero parameter is passed to the <b>curses_trace</b>
function.</p>
<p style="margin-left:9%;"><b>TRACE_TIMES</b></p>
<p style="margin-left:15%;">trace user and system times of
updates.</p>
<p style="margin-left:9%;"><b>TRACE_TPUTS</b></p>
<p style="margin-left:15%;">trace <b>tputs</b>(3X)
calls.</p>
<p style="margin-left:9%;"><b>TRACE_UPDATE</b></p>
<p style="margin-left:15%;">trace update actions, old &amp;
new screens.</p>
<p style="margin-left:9%;"><b>TRACE_MOVE</b></p>
<p style="margin-left:15%;">trace cursor movement and
scrolling.</p>
<p style="margin-left:9%;"><b>TRACE_CHARPUT</b></p>
<p style="margin-left:15%;">trace all character
outputs.</p>
<p style="margin-left:9%;"><b>TRACE_ORDINARY</b></p>
<p style="margin-left:15%;">trace all update actions. The
old and new screen contents are written to the trace file
for each refresh.</p>
<p style="margin-left:9%;"><b>TRACE_CALLS</b></p>
<p style="margin-left:15%;">trace all curses calls. The
parameters for each call are traced, as well as return
values.</p>
<p style="margin-left:9%;"><b>TRACE_VIRTPUT</b></p>
<p style="margin-left:15%;">trace virtual character puts,
i.e., calls to <b>addch</b>.</p>
<p style="margin-left:9%;"><b>TRACE_IEVENT</b></p>
<p style="margin-left:15%;">trace low-level input
processing, including timeouts.</p>
<p style="margin-left:9%;"><b>TRACE_BITS</b></p>
<p style="margin-left:15%;">trace state of TTY control
bits.</p>
<p style="margin-left:9%;"><b>TRACE_ICALLS</b></p>
<p style="margin-left:15%;">trace internal/nested
calls.</p>
<p style="margin-left:9%;"><b>TRACE_CCALLS</b></p>
<p style="margin-left:15%;">trace per-character calls.</p>
<p style="margin-left:9%;"><b>TRACE_DATABASE</b></p>
<p style="margin-left:15%;">trace read/write of
terminfo/termcap data.</p>
<p style="margin-left:9%;"><b>TRACE_ATTRS</b></p>
<p style="margin-left:15%;">trace changes to video
attributes and colors.</p>
<p style="margin-left:9%;"><b>TRACE_MAXIMUM</b></p>
<p style="margin-left:15%;">maximum trace level, enables
all of the separate trace features.</p>
<p style="margin-left:9%; margin-top: 1em">Some tracing
features are enabled whenever the <b>curses_trace</b>
parameter is nonzero. Some features overlap. The specific
names are used as a guideline.</p>
<h3>Command-line Utilities
<a name="Command-line Utilities"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">The command-line
utilities such as <b>tic</b>(1) provide a verbose option
which extends the set of messages written using the
<b>curses_trace</b> function. Both of these (<b>−v</b>
and <b>curses_trace</b>) use the same variable
(<b>_nc_tracing</b>), which determines the messages which
are written.</p>
<p style="margin-left:9%; margin-top: 1em">Because the
command-line utilities may call initialization functions
such as <b>setupterm</b>, <b>tgetent</b> or
<b>use_extended_names</b>, some of their debugging output
may be directed to the <i>trace</i> file if the
<i>NCURSES_TRACE</i> environment variable is set:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>messages produced in the utility are written to the
standard error.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="86%">
<p>messages produced by the underlying library are written
to <i>trace</i>.</p></td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">If
<i>ncurses</i> is built without tracing, none of the latter
are produced, and fewer diagnostics are provided by the
command-line utilities.</p>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Routines which
return a value are designed to be used as parameters to the
<b>_tracef</b> routine.</p>
<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>
<h3>NCURSES_TRACE
<a name="NCURSES_TRACE"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">A positive
integral value stored in this variable causes the following
functions to enable the tracing feature as if
<b>curses_trace</b> were called.</p>
<p style="margin-left:14%; margin-top: 1em"><b>filter</b>,
<b>initscr</b>, <b>new_prescr</b>, <b>newterm</b>,
<b>nofilter</b>, <b>restartterm</b>, <b>ripoffline</b>,
<b>setupterm</b>, <b>slk_init</b>, <b>tgetent</b>,
<b>use_env</b>, <b>use_extended_names</b>,
<b>use_tioctl</b></p>
<h2>PORTABILITY
<a name="PORTABILITY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">These functions
are not part of the X/Open Curses interface. Some other
curses implementations are known to have similar features,
but they are not compatible with <i>ncurses</i>:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em">SVr4 provided <b>traceon</b> and
<b>traceoff</b>, to control whether debugging information
was written to the “trace” file. While the
functions were always available, this feature was only
enabled if <b>DEBUG</b> was defined when building the
library.</p> </td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">The SVr4
tracing feature is undocumented.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em">PDCurses provides <b>traceon</b>
and <b>traceoff</b>, which (like SVr4) are always available,
and enable tracing to the “trace” file only when
a debug-library is built.</p></td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">PDCurses has a
short description of these functions, with a note that they
are not present in X/Open Curses, <i>ncurses</i> or NetBSD.
It does not mention SVr4, but the functions’ inclusion
in a header file section labeled
“Quasi-standard” hints at the origin.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p style="margin-top: 1em">•</p></td>
<td width="4%"></td>
<td width="86%">
<p style="margin-top: 1em">NetBSD does not provide
functions for enabling/disabling traces. It uses environment
variables <i>CURSES_TRACE_MASK</i> and
<i>CURSES_TRACE_FILE</i> to determine what is traced, and
where the results are written. This is available only when a
debug-library is built.</p></td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">The NetBSD
tracing feature is undocumented.</p>
<p style="margin-left:9%; margin-top: 1em">A few
<i>ncurses</i> functions are not provided when symbol
versioning is used:</p>
<p style="margin-left:14%; margin-top: 1em">_nc_tracebits,
_tracedump, _tracemouse</p>
<p style="margin-left:9%; margin-top: 1em">The original
<b>trace</b> routine was deprecated because it often
conflicted with application names.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>curses</b>(3X)</p>
<hr/>
</body>
</html>
