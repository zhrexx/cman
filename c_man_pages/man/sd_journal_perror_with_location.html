<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:48:55 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SD_JOURNAL_PRINT</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">SD_JOURNAL_PRINT</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#THREAD SAFETY">THREAD SAFETY</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<a href="#NOTES">NOTES</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">sd_journal_print,
sd_journal_printv, sd_journal_send, sd_journal_sendv,
sd_journal_perror, SD_JOURNAL_SUPPRESS_LOCATION,
sd_journal_print_with_location,
sd_journal_printv_with_location,
sd_journal_send_with_location,
sd_journal_sendv_with_location,
sd_journal_perror_with_location − Submit log entries
to the journal</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;systemd/sd−journal.h&gt;</b></p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_journal_print(int </b><i>priority</i><b>,
const char *</b><i>format</i><b>, ...);</b></p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_journal_printv(int </b><i>priority</i><b>,
const char *</b><i>format</i><b>,
va_list </b><i>ap</i><b>);</b></p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_journal_send(const char *</b><i>format</i><b>,
...);</b></p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_journal_sendv(const struct iovec *</b><i>iov</i><b>,
int </b><i>n</i><b>);</b></p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_journal_perror(const char *</b><i>message</i><b>);</b></p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_journal_print_with_location(int </b><i>priority</i><b>,
const char *</b><i>file</i><b>,
const char *</b><i>line</i><b>,
const char *</b><i>func</i><b>,
const char *</b><i>format</i><b>, ...);</b></p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_journal_printv_with_location(int </b><i>priority</i><b>,
const char *</b><i>file</i><b>,
const char *</b><i>line</i><b>,
const char *</b><i>func</i><b>,
const char *</b><i>format</i><b>,
va_list </b><i>ap</i><b>);</b></p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_journal_send_with_location(const char *</b><i>file</i><b>,
const char *</b><i>line</i><b>,
const char *</b><i>func</i><b>,
const char *</b><i>format</i><b>, ...);</b></p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_journal_sendv_with_location(const char *</b><i>file</i><b>,
const char *</b><i>line</i><b>,
const char *</b><i>func</i><b>,
const struct iovec *</b><i>iov</i><b>,
int </b><i>n</i><b>);</b></p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_journal_perror_with_location(const char *</b><i>file</i><b>,
const char *</b><i>line</i><b>,
const char *</b><i>func</i><b>,
const char *</b><i>message</i><b>);</b></p> </td></tr>
</table>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_print()</b>
may be used to submit simple, plain text log entries to the
system journal. The first argument is a priority value. This
is followed by a format string and its parameters, similar
to <b>printf</b>(3) or <b>syslog</b>(3). Note that currently
the resulting message will be truncated to <b>LINE_MAX
− 8</b>. The priority value is one of
<b>LOG_EMERG</b>, <b>LOG_ALERT</b>, <b>LOG_CRIT</b>,
<b>LOG_ERR</b>, <b>LOG_WARNING</b>, <b>LOG_NOTICE</b>,
<b>LOG_INFO</b>, <b>LOG_DEBUG</b>, as defined in syslog.h,
see <b>syslog</b>(3) for details. It is recommended to use
this call to submit log messages in the application locale
or system locale and in UTF−8 format, but no such
restrictions are enforced. Note that log messages written
using this function are generally not expected to end in a
new−line character. However, as all trailing
whitespace (including spaces, new−lines, tabulators
and carriage returns) are automatically stripped from the
logged string, it is acceptable to specify one (or more).
Empty lines (after trailing whitespace removal) are
suppressed. On non−empty lines, leading whitespace (as
well as inner whitespace) is left unmodified.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_printv()</b>
is similar to <b>sd_journal_print()</b> but takes a variable
argument list encapsulated in an object of type
<i>va_list</i> (see <b>stdarg</b>(3) for more information)
instead of the format string. It is otherwise equivalent in
behavior.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_send()</b>
may be used to submit structured log entries to the system
journal. It takes a series of format strings, each
immediately followed by their associated parameters,
terminated by <b>NULL</b>. The strings passed should be of
the format "VARIABLE=value". The variable name
must be in uppercase and consist only of characters, numbers
and underscores, and may not begin with an underscore. (All
assignments that do not follow this syntax will be ignored.)
The value can be of any size and format. It is highly
recommended to submit text strings formatted in the
UTF−8 character encoding only, and submit binary
fields only when formatting in UTF−8 strings is not
sensible. A number of well−known fields are defined,
see <b>systemd.journal-fields</b>(7) for details, but
additional application defined fields may be used. A
variable may be assigned more than one value per entry. If
this function is used, trailing whitespace is automatically
removed from each formatted field.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_sendv()</b>
is similar to <b>sd_journal_send()</b> but takes an array of
<i>struct iovec</i> (as defined in uio.h, see
<b>readv</b>(3) for details) instead of the format string.
Each structure should reference one field of the entry to
submit. The second argument specifies the number of
structures in the array. <b>sd_journal_sendv()</b> is
particularly useful to submit binary objects to the journal
where that is necessary. Note that this function will not
strip trailing whitespace of the passed fields, but passes
the specified data along unmodified. This is different from
both <b>sd_journal_print()</b> and <b>sd_journal_send()</b>
described above, which are based on format strings, and do
strip trailing whitespace.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_perror()</b>
is a similar to <b>perror</b>(3) and writes a message to the
journal that consists of the passed string, suffixed with
": " and a human−readable representation of
the current error code stored in <b>errno</b>(3). If the
message string is passed as <b>NULL</b> or empty string,
only the error string representation will be written,
prefixed with nothing. An additional journal field ERRNO= is
included in the entry containing the numeric error code
formatted as decimal string. The log priority used is
<b>LOG_ERR</b> (3).</p>
<p style="margin-left:9%; margin-top: 1em">Note that
<b>sd_journal_send()</b> is a wrapper around
<b>sd_journal_sendv()</b> to make it easier to use when only
text strings shall be submitted. Also, the following two
calls are mostly equivalent:</p>
<p style="margin-left:14%; margin-top: 1em">sd_journal_print(LOG_INFO,
"Hello World, this is PID %lu!", (unsigned long)
getpid());</p>
<p style="margin-left:14%; margin-top: 1em">sd_journal_send("MESSAGE=Hello
World, this is PID %lu!", (unsigned long) getpid(),
<br/>
"PRIORITY=%i", LOG_INFO, <br/>
NULL);</p>
<p style="margin-left:9%; margin-top: 1em">Note that these
calls implicitly add fields for the source file, function
name and code line where invoked. This is implemented with
macros. If this is not desired, it can be turned off by
defining <b>SD_JOURNAL_SUPPRESS_LOCATION</b> before
including sd−journal.h.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_print_with_location()</b>,
<b>sd_journal_printv_with_location()</b>,
<b>sd_journal_send_with_location()</b>,
<b>sd_journal_sendv_with_location()</b>, and
<b>sd_journal_perror_with_location()</b> are similar to
their counterparts without "_with_location", but
accept additional parameters to explicitly set the source
file name, function, and line. The arguments
"file" and "line" must contain valid
journal entries including the variable name, e.g.
"CODE_FILE=src/foo.c" and
"CODE_LINE=666", while "func" must only
contain the function name, i.e. the value without
"CODE_FUNC=". These variants are primarily useful
when writing custom wrappers, for example in bindings for a
different language.</p>
<p style="margin-left:9%; margin-top: 1em"><b>syslog</b>(3)
and <b>sd_journal_print()</b> may largely be used
interchangeably functionality−wise. However, note that
log messages logged via the former take a different path to
the journal server than the later, and hence global
chronological ordering between the two streams cannot be
guaranteed. Using <b>sd_journal_print()</b> has the benefit
of logging source code line, filenames, and functions as
metadata along all entries, and guaranteeing chronological
ordering with structured log entries that are generated via
<b>sd_journal_send()</b>. Using <b>syslog()</b> has the
benefit of being more portable.</p>
<p style="margin-left:9%; margin-top: 1em">These functions
implement a client to the <b><font color="#0000FF">Native
Journal Protocol</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">.</font></p>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">The
ten functions return 0 on success or a negative
errno−style error code. The <b>errno</b>(3) variable
itself is not altered.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">If
<b>systemd-journald</b>(8) is not running (the socket is not
present), those functions do nothing, and also return
0.</font></p>
<h2>THREAD SAFETY
<a name="THREAD SAFETY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">All
functions listed here are thread−safe and may be
called in parallel from multiple threads.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_journal_sendv()</b>
and <b>sd_journal_sendv_with_location()</b> are "async
signal safe" in the meaning of
<b>signal-safety</b>(7).</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_journal_print()</b>,
<b>sd_journal_printv()</b>, <b>sd_journal_send()</b>,
<b>sd_journal_perror()</b>, and their counterparts with
"_with_location" are not async signal
safe.</font></p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">Functions
described here are available as a shared library, which can
be compiled against and linked to with the
<b>libsystemd pkg-config</b>(1) file.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">The
code described here uses <b>getenv</b>(3), which is declared
to be not multi−thread−safe. This means that the
code calling the functions described here must not call
<b>setenv</b>(3) from a parallel thread. It is recommended
to only do calls to <b>setenv()</b> from an early phase of
the program when no other threads have been
started.</font></p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_journal_print()</b>,
<b>sd_journal_printv()</b>, <b>sd_journal_send()</b>, and
<b>sd_journal_sendv()</b> were added in version
187.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_journal_perror()</b>
was added in version 188.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_journal_print_with_location()</b>,
<b>sd_journal_printv_with_location()</b>,
<b>sd_journal_send_with_location()</b>,
<b>sd_journal_sendv_with_location()</b>, and
<b>sd_journal_perror_with_location()</b> were added in
version 246.</font></p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>systemd</b>(1),
<b>sd-journal</b>(3), <b>sd_journal_stream_fd</b>(3),
<b>syslog</b>(3), <b>perror</b>(3), <b>errno</b>(3),
<b>systemd.journal-fields</b>(7), <b>signal</b>(7),
<b>socket</b>(7)</font></p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="10%"></td>
<td width="3%">
<p style="margin-top: 1em"><font color="#000000">1.</font></p> </td>
<td width="1%"></td>
<td width="30%">
<p style="margin-top: 1em"><font color="#000000">Native
Journal Protocol</font></p></td>
<td width="56%">
</td></tr>
</table>
<p style="margin-left:14%;"><font color="#000000">https://systemd.io/JOURNAL_NATIVE_PROTOCOL</font></p>
<hr/>
</body>
</html>
