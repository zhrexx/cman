<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:56:51 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>XkbSetMap</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">XkbSetMap</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#ARGUMENTS">ARGUMENTS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUES">RETURN VALUES</a><br/>
<a href="#STRUCTURES">STRUCTURES</a><br/>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">XkbSetMap
− Send a complete new set of values for entire
components to the server.</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="18%">
<p style="margin-top: 1em"><b>Bool XkbSetMap</b></p></td>
<td width="1%"></td>
<td width="66%">
<p style="margin-top: 1em"><b>(Display *</b><i>dpy</i><b>,
unsigned int</b> <i>which</i><b>, XkbDescPtr</b>
<i>xkb</i><b>);</b></p> </td>
<td width="6%">
</td></tr>
</table>
<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="6%">
<p style="margin-top: 1em"><b><i>dpy</i></b></p></td>
<td width="3%"></td>
<td width="55%">
<p style="margin-top: 1em">connection to X server</p></td>
<td width="27%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="6%">
<p><i>which</i></p></td>
<td width="3%"></td>
<td width="55%">
<p>mask selecting subcomponents to update</p></td>
<td width="27%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="6%">
<p><i>xkb</i></p></td>
<td width="3%"></td>
<td width="55%">
<p>description from which new values are taken</p></td>
<td width="27%">
</td></tr>
</table>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">There are two
ways to make changes to map components: either change a
local copy of the keyboard map and call <i>XkbSetMap</i> to
send the modified map to the server, or, to reduce network
traffic, use an XkbMapChangesRec structure and call
<i>XkbChangeMap.</i></p>
<p style="margin-left:9%; margin-top: 1em">Use
<i>XkbSetMap</i> to send a complete new set of values for
entire components (for example, all symbols, all actions,
and so on) to the server. The <i>which</i> parameter
specifies the components to be sent to the server, and is a
bitwise inclusive OR of the masks listed in Table 1. The
<i>xkb</i> parameter is a pointer to an XkbDescRec structure
and contains the information to be copied to the server. For
each bit set in the <i>which</i> parameter, <i>XkbSetMap</i>
takes the corresponding structure values from the <i>xkb</i>
parameter and sends it to the server specified by
<i>dpy</i>.</p>
<p style="margin-left:9%; margin-top: 1em">If any
components specified by <i>which</i> are not present in the
<i>xkb</i> parameter, <i>XkbSetMap</i> returns False.
Otherwise, it sends the update request to the server and
returns True. <i>XkbSetMap</i> can generate BadAlloc,
BadLength, and BadValue protocol errors.</p>
<p style="margin-left:9%; margin-top: 1em">Key types,
symbol maps, and actions are all interrelated; changes in
one require changes in the others. Xkb provides functions to
make it easier to edit these components and handle the
interdependencies. Table 1 lists these helper functions and
provides a pointer to where they are defined.</p>
<p style="margin-left:9%; margin-top: 1em">The
<i>changed</i> field identifies the map components that have
changed in an XkbDescRec structure and may contain any of
the bits in Table 1, which are also shown in Table 2. Every
1 bit in <i>changed</i> also identifies which other fields
in the XkbMapChangesRec structure contain valid values, as
indicated in Table 2. The <i>min_key_code</i> and
<i>max_key_code</i> fields are for reference only; they are
ignored on any requests sent to the server and are always
updated by the server whenever it returns the data for an
XkbMapChangesRec.</p>
<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="6%">
<p style="margin-top: 1em">True</p></td>
<td width="13%"></td>
<td width="72%">
<p style="margin-top: 1em">The <i>XkbSetMap</i> function
returns True all components specified by <i>which</i> are
present in the <i>xkb</i> parameter.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="6%">
<p>False</p></td>
<td width="13%"></td>
<td width="72%">
<p>The <i>XkbSetMap</i> function returns False if any
component specified by <i>which</i> is not present in the
<i>xkb</i> parameter.</p></td></tr>
</table>
<h2>STRUCTURES
<a name="STRUCTURES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Use the
XkbMapChangesRec structure to identify and track partial
modifications to the mapping components and to reduce the
amount of traffic between the server and clients.</p>
<p style="margin-left:9%; margin-top: 1em">typedef struct
_XkbMapChanges { <br/>
unsigned short changed; /* identifies valid components in
structure */ <br/>
KeyCode min_key_code; /* lowest numbered keycode for device
*/ <br/>
KeyCode max_key_code; /* highest numbered keycode for device
*/ <br/>
unsigned char first_type; /* index of first key type
modified */ <br/>
unsigned char num_types; /* # types modified */ <br/>
KeyCode first_key_sym; /* first key whose key_sym_map
changed */ <br/>
unsigned char num_key_syms; /* # key_sym_map entries changed
*/ <br/>
KeyCode first_key_act; /* first key whose key_acts entry
changed */ <br/>
unsigned char num_key_acts; /* # key_acts entries changed */
<br/>
KeyCode first_key_behavior; /* first key whose behaviors
changed */ <br/>
unsigned char num_key_behaviors; /* # behaviors entries
changed */ <br/>
KeyCode first_key_explicit; /* first key whose explicit
entry changed */ <br/>
unsigned char num_key_explicit; /* # explicit entries
changed */ <br/>
KeyCode first_modmap_key; /* first key whose modmap entry
changed */ <br/>
unsigned char num_modmap_keys; /* # modmap entries changed
*/ <br/>
KeyCode first_vmodmap_key; /* first key whose vmodmap
changed */ <br/>
unsigned char num_vmodmap_keys; /* # vmodmap entries changed
*/ <br/>
unsigned char pad1; /* reserved */ <br/>
unsigned short vmods; /* mask indicating which vmods changed
*/ <br/>
} XkbMapChangesRec,*XkbMapChangesPtr;</p>
<p style="margin-left:9%; margin-top: 1em">The complete
description of an Xkb keyboard is given by an XkbDescRec.
The component structures in the XkbDescRec represent the
major Xkb components.</p>
<p style="margin-left:9%; margin-top: 1em">typedef struct {
<br/>
struct _XDisplay * display; /* connection to X server */
<br/>
unsigned short flags; /* private to Xkb, do not modify
*/</p>
<p>unsigned short device_spec; /* device of interest */
<br/>
KeyCode min_key_code; /* minimum keycode for device */ <br/>
KeyCode max_key_code; /* maximum keycode for device */ <br/>
XkbControlsPtr ctrls; /* controls */ <br/>
XkbServerMapPtr server; /* server keymap */ <br/>
XkbClientMapPtr map; /* client keymap */ <br/>
XkbIndicatorPtr indicators; /* indicator map */ <br/>
XkbNamesPtr names; /* names for all components */ <br/>
XkbCompatMapPtr compat; /* compatibility map */ <br/>
XkbGeometryPtr geom; /* physical geometry of keyboard */
<br/>
} XkbDescRec, *XkbDescPtr;</p>
<p style="margin-top: 1em">The <i>display</i> field points
to an X display structure. The <i>flags field is private to
the library: modifying flags</i> may yield unpredictable
results. The <i>device_spec</i> field specifies the device
identifier of the keyboard input device, or
XkbUseCoreKeyboard, which specifies the core keyboard
device. The <i>min_key_code</i> and <i>max_key_code</i>
fields specify the least and greatest keycode that can be
returned by the keyboard.</p>
<p style="margin-top: 1em">Each structure component has a
corresponding mask bit that is used in function calls to
indicate that the structure should be manipulated in some
manner, such as allocating it or freeing it. These masks and
their relationships to the fields in the XkbDescRec are
shown in Table 3.</p>
<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="12%">
<p style="margin-top: 1em"><b>BadAlloc</b></p></td>
<td width="7%"></td>
<td width="72%">
<p style="margin-top: 1em">Unable to allocate storage</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="12%">
<p><b>BadLength</b></p></td>
<td width="7%"></td>
<td width="72%">
<p>The length of a request is shorter or longer than that
required to minimally contain the arguments</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="12%">
<p><b>BadValue</b></p></td>
<td width="7%"></td>
<td width="72%">
<p>An argument is out of range</p></td></tr>
</table>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>XkbChangeMap</b>(3),
<b>XkbChangeTypesOfKey</b>(3), <b>XkbCopyKeyType</b>(3),
<b>XkbCopyKeyTypes</b>(3), <b>XkbGetKeyActions</b>(3),
<b>XkbGetKeyBehaviors</b>(3),</p>
<p><b>XkbGetKeyExplicitComponents</b>(3),
<b>XkbGetKeyModifierMap</b>(3), <b>XkbGetKeySyms</b>(3),
<b>XkbGetKeyTypes</b>(3), <b>XkbResizeKeyActions</b>(3),
<b>XkbResizeKeySyms</b>(3), <b>XkbResizeKeyType</b>(3),
<b>XkbGetVirtualModMap</b>(3),
<b>XkbGetVirtualMods</b>(3)</p>
<hr/>
</body>
</html>
