<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:48:42 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SD_BUS_REQUEST_NAME</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">SD_BUS_REQUEST_NAME</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#Errors">Errors</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">sd_bus_request_name,
sd_bus_request_name_async, sd_bus_release_name,
sd_bus_release_name_async − Request or release a
well−known service name on a bus</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;systemd/sd−bus.h&gt;</b></p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>typedef int
(*sd_bus_message_handler_t)(sd_bus_message *</b><i>m</i><b>,
void *</b><i>userdata</i><b>,
sd_bus_error *</b><i>ret_error</i><b>);</b></p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_bus_request_name(sd_bus *</b><i>bus</i><b>,
const char *</b><i>name</i><b>,
uint64_t </b><i>flags</i><b>);</b></p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_bus_request_name_async(sd_bus *</b><i>bus</i><b>,
sd_bus_slot **</b><i>slot</i><b>,
const char *</b><i>name</i><b>,
uint64_t </b><i>flags</i><b>,
sd_bus_message_handler_t </b><i>callback</i><b>,
void *</b><i>userdata</i><b>);</b></p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_bus_release_name(sd_bus *</b><i>bus</i><b>,
const char *</b><i>name</i><b>);</b></p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em"><b>int
sd_bus_release_name_async(sd_bus *</b><i>bus</i><b>,
sd_bus_slot **</b><i>slot</i><b>,
const char *</b><i>name</i><b>,
sd_bus_message_handler_t </b><i>callback</i><b>,
void *</b><i>userdata</i><b>);</b></p> </td></tr>
</table>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_request_name()</b>
requests a well−known service name on a bus. It takes
a bus connection, a valid bus name, and a flags parameter.
The flags parameter is a combination of zero or more of the
following flags:</p>
<p style="margin-left:9%; margin-top: 1em"><b>SD_BUS_NAME_ALLOW_REPLACEMENT</b></p>
<p style="margin-left:14%;">After acquiring the name
successfully, permit other peers to take over the name when
they try to acquire it with the
<b>SD_BUS_NAME_REPLACE_EXISTING</b> flag set. If
<b>SD_BUS_NAME_ALLOW_REPLACEMENT</b> is not set on the
original request, such a request by other peers will be
denied.</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 209.</p>
<p style="margin-left:9%; margin-top: 1em"><b>SD_BUS_NAME_REPLACE_EXISTING</b></p>
<p style="margin-left:14%;">Take over the name if it was
already acquired by another peer, and that other peer has
permitted takeover by setting
<b>SD_BUS_NAME_ALLOW_REPLACEMENT</b> while acquiring it.</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 209.</p>
<p style="margin-left:9%; margin-top: 1em"><b>SD_BUS_NAME_QUEUE</b></p>
<p style="margin-left:14%;">Queue the acquisition of the
name when the name is already taken.</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 209.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_request_name()</b>
operates in a synchronous fashion: a message requesting the
name is sent to the bus broker, and the call waits until the
broker responds.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_request_name_async()</b>
is an asynchronous version of <b>sd_bus_request_name()</b>.
Instead of waiting for the request to complete, the request
message is enqueued. The specified <i>callback</i> will be
called when the broker's response is received. If the
parameter is specified as <b>NULL</b> a default
implementation is used instead which will terminate the
connection when the name cannot be acquired. The function
returns a slot object in its <i>slot</i> parameter —
if it is passed as non−<b>NULL</b> — which may
be used as a reference to the name request operation. Use
<b>sd_bus_slot_unref</b>(3) to destroy this reference. Note
that destroying the reference will not unregister the name,
but simply ensure the specified callback is no longer
called.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_release_name()</b>
releases an acquired well−known name. It takes a bus
connection and a valid bus name as parameters. This function
operates synchronously, sending a release request message to
the bus broker and waiting for it to reply.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_release_name_async()</b>
is an asynchronous version of <b>sd_bus_release_name()</b>.
The specified <i>callback</i> function is called when the
name has been released successfully. If specified as
<b>NULL</b> a generic implementation is used that ignores
the result of the operation. As above, the <i>slot</i> (if
non−<b>NULL</b>) is set to an object that may be used
to reference the operation.</p>
<p style="margin-left:9%; margin-top: 1em">These functions
are supported only on bus connections, i.e. connections to a
bus broker and not on direct connections.</p>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">On success,
these calls return 0 or a positive integer. On failure,
these calls return a negative errno−style error
code.</p>
<p style="margin-left:9%; margin-top: 1em">If
<b>SD_BUS_NAME_QUEUE</b> is specified,
<b>sd_bus_request_name()</b> will return 0 when the name is
already taken by another peer and the client has been added
to the queue for the name. In that case, the caller can
subscribe to "NameOwnerChanged" signals to be
notified when the name is successfully acquired.
<b>sd_bus_request_name()</b> returns &gt; 0 when the name
has immediately been acquired successfully.</p>
<h3>Errors
<a name="Errors"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Returned errors
may indicate the following problems:</p>
<p style="margin-left:9%; margin-top: 1em"><b>−EALREADY</b></p>
<p style="margin-left:14%;">The caller already is the owner
of the specified name.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−EEXIST</b></p>
<p style="margin-left:14%;">The name has already been
acquired by a different peer, and
SD_BUS_NAME_REPLACE_EXISTING was not specified or the other
peer did not specify SD_BUS_NAME_ALLOW_REPLACEMENT while
acquiring the name.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−ESRCH</b></p>
<p style="margin-left:14%;">It was attempted to release a
name that is currently not registered on the bus.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−EADDRINUSE</b></p>
<p style="margin-left:14%;">It was attempted to release a
name that is owned by a different peer on the bus.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−EINVAL</b></p>
<p style="margin-left:14%;">A specified parameter is
invalid. This is also generated when the requested name is a
special service name reserved by the D−Bus
specification, or when the operation is requested on a
connection that does not refer to a bus.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−ENOTCONN</b></p>
<p style="margin-left:14%;">The bus connection has been
disconnected.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−ECHILD</b></p>
<p style="margin-left:14%;">The bus connection has been
created in a different process than the current one.</p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Functions
described here are available as a shared library, which can
be compiled against and linked to with the
<b>libsystemd pkg-config</b>(1) file.</p>
<p style="margin-left:9%; margin-top: 1em">The code
described here uses <b>getenv</b>(3), which is declared to
be not multi−thread−safe. This means that the
code calling the functions described here must not call
<b>setenv</b>(3) from a parallel thread. It is recommended
to only do calls to <b>setenv()</b> from an early phase of
the program when no other threads have been started.</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_request_name()</b>
and <b>sd_bus_release_name()</b> were added in version
209.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_request_name_async()</b>
and <b>sd_bus_release_name_async()</b> were added in version
237.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>systemd</b>(1),
<b>sd-bus</b>(3), <b>sd_bus_new</b>(3),
<b>sd_bus_slot_unref</b>(3)</p>
<hr/>
</body>
</html>
