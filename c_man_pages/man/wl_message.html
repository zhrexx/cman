<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:54:52 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>wl_message</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">wl_message</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#Data Fields">Data Fields</a><br/>
<a href="#Detailed Description">Detailed Description</a><br/>
<a href="#Field Documentation">Field Documentation</a><br/>
<a href="#const char* wl_message::name">const char* wl_message::name</a><br/>
<a href="#const char* wl_message::signature">const char* wl_message::signature</a><br/>
<a href="#const struct wl_interface** wl_message::types">const struct wl_interface** wl_message::types</a><br/>
<a href="#Author">Author</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">wl_message</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">#include
&lt;wayland−util.h&gt;</p>
<h3>Data Fields
<a name="Data Fields"></a>
</h3>
<p style="margin-left:14%; margin-top: 1em">const char *
<b>name</b> <br/>
const char * <b>signature</b> <br/>
const struct <b>wl_interface</b> ** <b>types</b></p>
<h2>Detailed Description
<a name="Detailed Description"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Protocol message
signature</p>
<p style="margin-left:9%; margin-top: 1em">A
<b>wl_message</b> describes the signature of an actual
protocol message, such as a request or event, that adheres
to the Wayland protocol wire format. The protocol
implementation uses a <b>wl_message</b> within its demarshal
machinery for decoding messages between a compositor and its
clients. In a sense, a <b>wl_message</b> is to a protocol
message like a class is to an object.</p>
<p style="margin-left:9%; margin-top: 1em">The name of a
<b>wl_message</b> is the name of the corresponding protocol
message.</p>
<p style="margin-left:9%; margin-top: 1em">The signature is
an ordered list of symbols representing the data types of
message arguments and, optionally, a protocol version and
indicators for nullability. A leading integer in the
signature indicates the <i>since</i> version of the protocol
message. A ? preceding a data type symbol indicates that the
following argument type is nullable. While it is a protocol
violation to send messages with non-nullable arguments set
to NULL, event handlers in clients might still get called
with non-nullable object arguments set to NULL. This can
happen when the client destroyed the object being used as
argument on its side and an event referencing that object
was sent before the server knew about its destruction. As
this race cannot be prevented, clients should - as a general
rule - program their event handlers such that they can
handle object arguments declared non-nullable being NULL
gracefully.</p>
<p style="margin-left:9%; margin-top: 1em">When no
arguments accompany a message, signature is an empty
string.</p>
<p style="margin-left:9%; margin-top: 1em">Symbols:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="2%"></td>
<td width="53%">
<p>i: int</p></td>
<td width="35%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="2%"></td>
<td width="53%">
<p>u: uint</p></td>
<td width="35%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="2%"></td>
<td width="53%">
<p>f: fixed</p></td>
<td width="35%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="2%"></td>
<td width="53%">
<p>s: string</p></td>
<td width="35%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="2%"></td>
<td width="53%">
<p>o: object</p></td>
<td width="35%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="2%"></td>
<td width="53%">
<p>n: new_id</p></td>
<td width="35%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="2%"></td>
<td width="53%">
<p>a: array</p></td>
<td width="35%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="2%"></td>
<td width="53%">
<p>h: fd</p></td>
<td width="35%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="2%"></td>
<td width="53%">
<p>?: following argument (o or s) is nullable</p></td>
<td width="35%">
</td></tr>
</table>
<p style="margin-left:9%; margin-top: 1em">While
demarshaling primitive arguments is straightforward, when
demarshaling messages containing object or new_id arguments,
the protocol implementation often must determine the type of
the object. The types of a <b>wl_message</b> is an array of
<b>wl_interface</b> references that correspond to o and n
arguments in signature, with NULL placeholders for arguments
with non-object types.</p>
<p style="margin-left:9%; margin-top: 1em">Consider the
protocol event <b>wl_display</b> delete_id that has a single
uint argument. The <b>wl_message</b> is:</p>
<p style="margin-left:9%; margin-top: 1em">{
"delete_id", "u", [NULL] }</p>
<p style="margin-left:9%; margin-top: 1em">Here, the
message name is ’delete_id’, the signature is
’u’, and the argument types is [NULL],
indicating that the uint argument has no corresponding
<b>wl_interface</b> since it is a primitive argument.</p>
<p style="margin-left:9%; margin-top: 1em">In contrast,
consider a wl_foo interface supporting protocol request bar
that has existed since version 2, and has two arguments: a
uint and an object of type wl_baz_interface that may be
NULL. Such a <b>wl_message might be:</b></p>
<p style="margin-left:9%; margin-top: 1em">{
"bar", "2u?o", [NULL,
&amp;wl_baz_interface] }</p>
<p style="margin-left:9%; margin-top: 1em">Here, the
message name is ’bar’, and the signature is
’2u?o’. Notice how the 2 indicates the protocol
version, the u indicates the first argument type is uint,
and the ?o indicates that the second argument is an object
that may be NULL. Lastly, the argument types array indicates
that no <b>wl_interface</b> corresponds to the first
argument, while the type wl_baz_interface corresponds to the
second argument.</p>
<p style="margin-left:9%; margin-top: 1em"><b>See
also</b></p>
<p style="margin-left:14%;"><b>wl_argument</b></p>
<p style="margin-left:14%; margin-top: 1em"><b>wl_interface</b></p>
<p style="margin-left:14%; margin-top: 1em">Wire Format</p>
<h2>Field Documentation
<a name="Field Documentation"></a>
</h2>
<h3>const char* wl_message::name
<a name="const char* wl_message::name"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Message name</p>
<h3>const char* wl_message::signature
<a name="const char* wl_message::signature"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Message
signature</p>
<h3>const struct wl_interface** wl_message::types
<a name="const struct wl_interface** wl_message::types"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Object argument
interfaces</p>
<h2>Author
<a name="Author"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Generated
automatically by Doxygen for Wayland from the source
code.</p>
<hr/>
</body>
</html>
