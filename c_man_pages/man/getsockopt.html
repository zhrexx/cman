<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:40:46 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>getsockopt</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">getsockopt</h1>
<a href="#NAME">NAME</a><br/>
<a href="#LIBRARY">LIBRARY</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#ERRORS">ERRORS</a><br/>
<a href="#STANDARDS">STANDARDS</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#BUGS">BUGS</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">getsockopt,
setsockopt − get and set options on sockets</p>
<h2>LIBRARY
<a name="LIBRARY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Standard C
library (<i>libc</i>, <i>−lc</i>)</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;sys/socket.h&gt;</b></p>
<p style="margin-left:9%; margin-top: 1em"><b>int
getsockopt(int</b> <i>sockfd</i><b>, int</b>
<i>level</i><b>, int</b> <i>optname</i><b>, <br/>
void</b> <i>optval</i><b>[restrict *.</b><i>optlen</i><b>],
<br/>
socklen_t *restrict</b> <i>optlen</i><b>); <br/>
int setsockopt(int</b> <i>sockfd</i><b>, int</b>
<i>level</i><b>, int</b> <i>optname</i><b>, <br/>
const void</b> <i>optval</i><b>[.</b><i>optlen</i><b>], <br/>
socklen_t</b> <i>optlen</i><b>);</b></p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>getsockopt</b>()
and <b>setsockopt</b>() manipulate options for the socket
referred to by the file descriptor <i>sockfd</i>. Options
may exist at multiple protocol levels; they are always
present at the uppermost socket level.</p>
<p style="margin-left:9%; margin-top: 1em">When
manipulating socket options, the level at which the option
resides and the name of the option must be specified. To
manipulate options at the sockets API level, <i>level</i> is
specified as <b>SOL_SOCKET</b>. To manipulate options at any
other level the protocol number of the appropriate protocol
controlling the option is supplied. For example, to indicate
that an option is to be interpreted by the <b>TCP</b>
protocol, <i>level</i> should be set to the protocol number
of <b>TCP</b>; see <b>getprotoent</b>(3).</p>
<p style="margin-left:9%; margin-top: 1em">The arguments
<i>optval</i> and <i>optlen</i> are used to access option
values for <b>setsockopt</b>(). For <b>getsockopt</b>() they
identify a buffer in which the value for the requested
option(s) are to be returned. For <b>getsockopt</b>(),
<i>optlen</i> is a value-result argument, initially
containing the size of the buffer pointed to by
<i>optval</i>, and modified on return to indicate the actual
size of the value returned. If no option value is to be
supplied or returned, <i>optval</i> may be NULL.</p>
<p style="margin-left:9%; margin-top: 1em"><i>Optname</i>
and any specified options are passed uninterpreted to the
appropriate protocol module for interpretation. The include
file <i>&lt;sys/socket.h&gt;</i> contains definitions for
socket level options, described below. Options at other
protocol levels vary in format and name; consult the
appropriate entries in section 4 of the manual.</p>
<p style="margin-left:9%; margin-top: 1em">Most
socket-level options utilize an <i>int</i> argument for
<i>optval</i>. For <b>setsockopt</b>(), the argument should
be nonzero to enable a boolean option, or zero if the option
is to be disabled.</p>
<p style="margin-left:9%; margin-top: 1em">For a
description of the available socket options see
<b>socket</b>(7) and the appropriate protocol man pages.</p>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">On success, zero
is returned for the standard options. On error, −1 is
returned, and <i>errno</i> is set to indicate the error.</p>
<p style="margin-left:9%; margin-top: 1em">Netfilter allows
the programmer to define custom socket options with
associated handlers; for such options, the return value on
success is the value returned by the handler.</p>
<h2>ERRORS
<a name="ERRORS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p style="margin-top: 1em"><b>EBADF</b></p></td>
<td width="1%"></td>
<td width="82%">
<p style="margin-top: 1em">The argument <i>sockfd</i> is
not a valid file descriptor.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p><b>EFAULT</b></p></td>
<td width="1%"></td>
<td width="82%">
<p>The address pointed to by <i>optval</i> is not in a
valid part of the process address space. For
<b>getsockopt</b>(), this error may also be returned if
<i>optlen</i> is not in a valid part of the process address
space.</p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p><b>EINVAL</b></p></td>
<td width="1%"></td>
<td width="82%">
<p><i>optlen</i> invalid in <b>setsockopt</b>(). In some
cases this error can also occur for an invalid value in
<i>optval</i> (e.g., for the <b>IP_ADD_MEMBERSHIP</b> option
described in <b>ip</b>(7)).</p></td></tr>
</table>
<p style="margin-left:9%;"><b>ENOPROTOOPT</b></p>
<p style="margin-left:18%;">The option is unknown at the
level indicated.</p>
<p style="margin-left:9%;"><b>ENOTSOCK</b></p>
<p style="margin-left:18%;">The file descriptor
<i>sockfd</i> does not refer to a socket.</p>
<h2>STANDARDS
<a name="STANDARDS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">POSIX.1-2008.</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">POSIX.1-2001,
SVr4, 4.4BSD (first appeared in 4.2BSD).</p>
<h2>BUGS
<a name="BUGS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Several of the
socket options should be handled at lower levels of the
system.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>ioctl</b>(2),
<b>socket</b>(2), <b>getprotoent</b>(3),
<b>protocols</b>(5), <b>ip</b>(7), <b>packet</b>(7),
<b>socket</b>(7), <b>tcp</b>(7), <b>udp</b>(7),
<b>unix</b>(7)</p>
<hr/>
</body>
</html>
