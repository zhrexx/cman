<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:53:11 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>XAllocStandardColormap</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">XAllocStandardColormap</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNTAX">SYNTAX</a><br/>
<a href="#ARGUMENTS">ARGUMENTS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#STRUCTURES">STRUCTURES</a><br/>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">XAllocStandardColormap,
XSetRGBColormaps, XGetRGBColormaps, XStandardColormap
− allocate, set, or read a standard colormap
structure</p>
<h2>SYNTAX
<a name="SYNTAX"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em">XStandardColormap
*XAllocStandardColormap(void);</p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em">void XSetRGBColormaps(Display
*<i>display</i>, Window <i>w</i>, XStandardColormap
*<i>std_colormap</i>, int <i>count</i>, Atom
<i>property</i>);</p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="91%">
<p style="margin-top: 1em">Status XGetRGBColormaps(Display
*<i>display</i>, Window <i>w</i>, XStandardColormap
**<i>std_colormap_return</i>, int *<i>count_return</i>, Atom
<i>property</i>);</p> </td></tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>
<td width="9%"></td>
<td width="9%"></td>
<td width="4%"></td>
<td width="52%">
</td>
<td width="26%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="9%">
<p><i>display</i></p></td>
<td width="4%"></td>
<td width="52%">
<p>Specifies the connection to the X server.</p></td>
<td width="26%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="9%">
<p><i>count</i></p></td>
<td width="4%"></td>
<td width="52%">
<p>Specifies the number of colormaps.</p></td>
<td width="26%">
</td></tr>
</table>
<p style="margin-left:9%;"><i>count_return</i></p>
<p style="margin-left:22%;">Returns the number of
colormaps.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="10%">
<p><i>property</i></p></td>
<td width="3%"></td>
<td width="36%">
<p>Specifies the property name.</p></td>
<td width="42%">
</td></tr>
</table>
<p style="margin-left:9%;"><i>std_colormap</i></p>
<p style="margin-left:22%;">Specifies the
<b>XStandardColormap</b> structure to be used.</p>
<p style="margin-left:9%;"><i>std_colormap_return</i></p>
<p style="margin-left:22%;">Returns the
<b>XStandardColormap</b> structure.</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
<b>XAllocStandardColormap</b> function allocates and returns
a pointer to a <b>XStandardColormap</b> structure. Note that
all fields in the <b>XStandardColormap</b> structure are
initially set to zero. If insufficient memory is available,
<b>XAllocStandardColormap</b> returns NULL. To free the
memory allocated to this structure, use <b>XFree</b>.</p>
<p style="margin-left:9%; margin-top: 1em">The
<b>XSetRGBColormaps</b> function replaces the RGB colormap
definition in the specified property on the named window. If
the property does not already exist, <b>XSetRGBColormaps</b>
sets the RGB colormap definition in the specified property
on the named window. The property is stored with a type of
RGB_COLOR_MAP and a format of 32. Note that it is the
caller’s responsibility to honor the ICCCM restriction
that only RGB_DEFAULT_MAP contain more than one
definition.</p>
<p style="margin-left:9%; margin-top: 1em">The
<b>XSetRGBColormaps</b> function usually is only used by
window or session managers. To create a standard colormap,
follow this procedure:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>1.</p></td>
<td width="3%"></td>
<td width="85%">
<p>Open a new connection to the same server.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>2.</p></td>
<td width="3%"></td>
<td width="85%">
<p>Grab the server.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>3.</p></td>
<td width="3%"></td>
<td width="85%">
<p>See if the property is on the property list of the root
window for the screen.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>4.</p></td>
<td width="3%"></td>
<td width="85%">
<p>If the desired property is not present:</p></td></tr>
</table>
<p style="margin-left:15%;">•</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%"></td>
<td width="5%"></td>
<td width="78%">
<p style="margin-top: 1em">Create a colormap (unless you
are using the default colormap of the screen).</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p>•</p></td>
<td width="5%"></td>
<td width="78%">
<p>Determine the color characteristics of the visual.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p>•</p></td>
<td width="5%"></td>
<td width="78%">
<p>Allocate cells in the colormap (or create it with
<b>AllocAll</b>).</p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p>•</p></td>
<td width="5%"></td>
<td width="78%">
<p>Call <b>XStoreColors</b> to store appropriate color
values in the colormap.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p>•</p></td>
<td width="5%"></td>
<td width="78%">
<p>Fill in the descriptive members in the
<b>XStandardColormap</b> structure.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p>•</p></td>
<td width="5%"></td>
<td width="78%">
<p>Attach the property to the root window.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p>•</p></td>
<td width="5%"></td>
<td width="78%">
<p>Use <b>XSetCloseDownMode</b> to make the resource
permanent.</p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="8%">
<p>5.</p></td>
<td width="5%"></td>
<td width="78%">
</td></tr>
</table>
<p style="margin-left:15%; margin-top: 1em">Ungrab the
server.</p>
<p style="margin-left:9%; margin-top: 1em"><b>XSetRGBColormaps</b>
can generate <b>BadAlloc</b>, <b>BadAtom</b>, and
<b>BadWindow</b> errors.</p>
<p style="margin-left:9%; margin-top: 1em">The
<b>XGetRGBColormaps</b> function returns the RGB colormap
definitions stored in the specified property on the named
window. If the property exists, is of type RGB_COLOR_MAP, is
of format 32, and is long enough to contain a colormap
definition, <b>XGetRGBColormaps</b> allocates and fills in
space for the returned colormaps and returns a nonzero
status. If the visualid is not present,
<b>XGetRGBColormaps</b> assumes the default visual for the
screen on which the window is located; if the killid is not
present, <b>None</b> is assumed, which indicates that the
resources cannot be released. Otherwise, none of the fields
are set, and <b>XGetRGBColormaps</b> returns a zero status.
Note that it is the caller’s responsibility to honor
the ICCCM restriction that only RGB_DEFAULT_MAP contain more
than one definition.</p>
<p style="margin-left:9%; margin-top: 1em"><b>XGetRGBColormaps</b>
can generate <b>BadAtom</b> and <b>BadWindow</b> errors.</p>
<h2>STRUCTURES
<a name="STRUCTURES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
<b>XStandardColormap</b> structure contains:</p>
<p style="margin-left:9%; margin-top: 1em">/* Hints */ <br/>
/* Values */ <br/>
typedef struct { <br/>
Colormap colormap; <br/>
unsigned long red_max; <br/>
unsigned long red_mult; <br/>
unsigned long green_max; <br/>
unsigned long green_mult; <br/>
unsigned long blue_max; <br/>
unsigned long blue_mult; <br/>
unsigned long base_pixel; <br/>
VisualID visualid; <br/>
XID killid; <br/>
} XStandardColormap;</p>
<p style="margin-left:9%; margin-top: 1em">The colormap
member is the colormap created by the <b>XCreateColormap</b>
function. The red_max, green_max, and blue_max members give
the maximum red, green, and blue values, respectively. Each
color coefficient ranges from zero to its max, inclusive.
For example, a common colormap allocation is 3/3/2 (3 planes
for red, 3 planes for green, and 2 planes for blue). This
colormap would have red_max = 7, green_max = 7, and blue_max
= 3. An alternate allocation that uses only 216 colors is
red_max = 5, green_max = 5, and blue_max = 5.</p>
<p style="margin-left:9%; margin-top: 1em">The red_mult,
green_mult, and blue_mult members give the scale factors
used to compose a full pixel value. (See the discussion of
the base_pixel members for further information.) For a 3/3/2
allocation, red_mult might be 32, green_mult might be 4, and
blue_mult might be 1. For a 6-colors-each allocation,
red_mult might be 36, green_mult might be 6, and blue_mult
might be 1.</p>
<p style="margin-left:9%; margin-top: 1em">The base_pixel
member gives the base pixel value used to compose a full
pixel value. Usually, the base_pixel is obtained from a call
to the <b>XAllocColorPlanes</b> function. Given integer red,
green, and blue coefficients in their appropriate ranges,
one then can compute a corresponding pixel value by using
the following expression:</p>
<p style="margin-left:9%; margin-top: 1em">(r * red_mult +
g * green_mult + b * blue_mult + base_pixel) &amp;
0xFFFFFFFF</p>
<p style="margin-left:9%; margin-top: 1em">For
<b>GrayScale</b> colormaps, only the colormap, red_max,
red_mult, and base_pixel members are defined. The other
members are ignored. To compute a <b>GrayScale</b> pixel
value, use the following expression:</p>
<p style="margin-left:9%; margin-top: 1em">(gray * red_mult
+ base_pixel) &amp; 0xFFFFFFFF</p>
<p style="margin-left:9%; margin-top: 1em">Negative
multipliers can be represented by converting the 2’s
complement representation of the multiplier into an unsigned
long and storing the result in the appropriate _mult field.
The step of masking by 0xFFFFFFFF effectively converts the
resulting positive multiplier into a negative one. The
masking step will take place automatically on many machine
architectures, depending on the size of the integer type
used to do the computation,</p>
<p style="margin-left:9%; margin-top: 1em">The visualid
member gives the ID number of the visual from which the
colormap was created. The killid member gives a resource ID
that indicates whether the cells held by this standard
colormap are to be released by freeing the colormap ID or by
calling the <b>XKillClient</b> function on the indicated
resource. (Note that this method is necessary for allocating
out of an existing colormap.)</p>
<p style="margin-left:9%; margin-top: 1em">The properties
containing the <b>XStandardColormap</b> information have the
type RGB_COLOR_MAP.</p>
<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="12%">
<p style="margin-top: 1em"><b>BadAlloc</b></p></td>
<td width="1%"></td>
<td width="78%">
<p style="margin-top: 1em">The server failed to allocate
the requested resource or server memory.</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="12%">
<p><b>BadAtom</b></p></td>
<td width="1%"></td>
<td width="78%">
<p>A value for an Atom argument does not name a defined
Atom.</p> </td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="12%">
<p><b>BadWindow</b></p></td>
<td width="1%"></td>
<td width="78%">
<p>A value for a Window argument does not name a defined
Window.</p> </td></tr>
</table>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">XAllocColor(3),
XCreateColormap(3), XFree(3), XSetCloseDownMode(3) <i><br/>
Xlib − C Language X Interface</i></p>
<hr/>
</body>
</html>
