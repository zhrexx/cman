<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:56:47 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>XkbGetVirtualMods</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">XkbGetVirtualMods</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#ARGUMENTS">ARGUMENTS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUES">RETURN VALUES</a><br/>
<a href="#STRUCTURES">STRUCTURES</a><br/>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">XkbGetVirtualMods
− Obtain a subset of the virtual modifier bindings
(the vmods array) in a keyboard description</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="31%">
<p style="margin-top: 1em"><b>Status
XkbGetVirtualMods</b></p> </td>
<td width="1%"></td>
<td width="59%">
<p style="margin-top: 1em"><b>(Display *</b><i>dpy</i><b>,
unsigned int</b> <i>which</i><b>, XkbDescPtr</b></p></td></tr>
</table>
<p style="margin-left:9%;"><i>xkb</i><b>);</b></p>
<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="6%">
<p style="margin-top: 1em"><b><i>dpy</i></b></p></td>
<td width="3%"></td>
<td width="61%">
<p style="margin-top: 1em">connection to server</p></td>
<td width="21%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="6%">
<p><i>which</i></p></td>
<td width="3%"></td>
<td width="61%">
<p>mask indicating virtual modifier bindings to get</p></td>
<td width="21%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="6%">
<p><i>xkb</i></p></td>
<td width="3%"></td>
<td width="61%">
<p>Xkb description where results will be placed</p></td>
<td width="21%">
</td></tr>
</table>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><i>XkbGetVirtualMods</i>
sends a request to the server to obtain the <i>vmods</i>
entries for the virtual modifiers specified in the mask,
<i>which,</i> and waits for a reply.</p>
<p style="margin-left:9%; margin-top: 1em">Virtual
modifiers are named by converting their string name to an X
Atom and storing the Atom in the <i>names.vmods</i> array in
an XkbDescRec structure. The position of a name Atom in the
<i>names.vmods</i> array defines the bit position used to
represent the virtual modifier and also the index used when
accessing virtual modifier information in arrays: the name
in the i-th (0 relative) entry of <i>names.vmods</i> is the
i-th virtual modifier, represented by the mask (1&lt;&lt;i).
Throughout Xkb, various functions have a parameter that is a
mask representing virtual modifier choices. In each case,
the i-th bit (0 relative) of the mask represents the i-th
virtual modifier.</p>
<p style="margin-left:9%; margin-top: 1em">To set the name
of a virtual modifier, use <i>XkbSetNames,</i> using
XkbVirtualModNamesMask in <i>which</i> and the name in the
<i>xkb</i> argument; to retrieve indicator names, use
<i>XkbGetNames.</i></p>
<p style="margin-left:9%; margin-top: 1em">For each bit set
in <i>which, XkbGetVirtualMods</i> updates the corresponding
virtual modifier definition in the <i>server-&gt;vmods</i>
array of <i>xkb.</i> The <i>xkb</i> parameter must be a
pointer to a valid Xkb keyboard description. If successful,
<i>XkbGetVirtualMods</i> returns Success.</p>
<p style="margin-left:9%; margin-top: 1em"><b>Virtual
Modifier Names and Masks</b></p>
<p style="margin-left:9%; margin-top: 1em">Virtual
modifiers are named by converting their string name to an X
Atom and storing the Atom in the <i>names.vmods</i> array in
an XkbDescRec structure. The position of a name Atom in the
<i>names.vmods</i> array defines the bit position used to
represent the virtual modifier and also the index used when
accessing virtual modifier information in arrays: the name
in the i-th (0 relative) entry of <i>names.vmods</i> is the
i-th virtual modifier, represented by the mask (1&lt;&lt;i).
Throughout Xkb, various functions have a parameter that is a
mask representing virtual modifier choices. In each case,
the i-th bit (0 relative) of the mask represents the i-th
virtual modifier.</p>
<p style="margin-left:9%; margin-top: 1em">To set the name
of a virtual modifier, use <i>XkbSetNames,</i> using
XkbVirtualModNamesMask in <i>which</i> and the name in the
<i>xkb</i> argument; to retrieve indicator names, use
<i>XkbGetNames.</i></p>
<p style="margin-left:9%; margin-top: 1em">If the
<i>server</i> map has not been allocated in the <i>xkb</i>
parameter, <i>XkbGetVirtualMods</i> allocates and
initializes it before obtaining the virtual modifier
bindings.</p>
<p style="margin-left:9%; margin-top: 1em">If the server
does not have a compatible version of Xkb, or the Xkb
extension has not been properly initialized,
<i>XkbGetVirtualMods</i> returns BadMatch. Any errors in
allocation cause <i>XkbGetVirtualMods</i> to return
BadAlloc.</p>
<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="9%">
<p style="margin-top: 1em">Success</p></td>
<td width="10%"></td>
<td width="72%">
<p style="margin-top: 1em">The <i>XkbGetVirtualMods</i>
function returns Success when it successfully updates the
corresponding virtual modifier definition in the
<i>server-&gt;vmods</i> array of <i>xkb.</i></p></td></tr>
</table>
<h2>STRUCTURES
<a name="STRUCTURES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The complete
description of an Xkb keyboard is given by an XkbDescRec.
The component structures in the XkbDescRec represent the
major Xkb components.</p>
<p style="margin-left:9%; margin-top: 1em">typedef struct {
<br/>
struct _XDisplay * display; /* connection to X server */
<br/>
unsigned short flags; /* private to Xkb, do not modify */
<br/>
unsigned short device_spec; /* device of interest */ <br/>
KeyCode min_key_code; /* minimum keycode for device */ <br/>
KeyCode max_key_code; /* maximum keycode for device */ <br/>
XkbControlsPtr ctrls; /* controls */ <br/>
XkbServerMapPtr server; /* server keymap */ <br/>
XkbClientMapPtr map; /* client keymap */ <br/>
XkbIndicatorPtr indicators; /* indicator map */ <br/>
XkbNamesPtr names; /* names for all components */ <br/>
XkbCompatMapPtr compat; /* compatibility map */ <br/>
XkbGeometryPtr geom; /* physical geometry of keyboard */
<br/>
} XkbDescRec, *XkbDescPtr;</p>
<p style="margin-left:9%; margin-top: 1em">The
<i>display</i> field points to an X display structure. The
<i>flags</i> field is private to the library: modifying
<i>flags</i> may yield unpredictable results. The
<i>device_spec</i> field specifies the device identifier of
the keyboard input device, or XkbUseCoreKeyboard, which
specifies the core keyboard device. The <i>min_key_code</i>
and <i>max_key_code</i> fields specify the least and
greatest keycode that can be returned by the keyboard.</p>
<p style="margin-left:9%; margin-top: 1em">Each structure
component has a corresponding mask bit that is used in
function calls to indicate that the structure should be
manipulated in some manner, such as allocating it or freeing
it. These masks and their relationships to the fields in the
XkbDescRec are shown in Table 1.</p>
<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="10%">
<p style="margin-top: 1em"><b>BadAlloc</b></p></td>
<td width="9%"></td>
<td width="72%">
<p style="margin-top: 1em">Unable to allocate storage</p></td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="10%">
<p><b>BadMatch</b></p></td>
<td width="9%"></td>
<td width="72%">
<p>A compatible version of Xkb was not available in the
server or an argument has correct type and range, but is
otherwise invalid</p></td></tr>
</table>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>XkbGetNames</b>(3),
<b>XkbSetNames</b>(3)</p>
<hr/>
</body>
</html>
