<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:49:00 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SD_SESSION_IS_ACTIVE</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">SD_SESSION_IS_ACTIVE</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#Errors">Errors</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<a href="#NOTES">NOTES</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">sd_session_is_active,
sd_session_is_remote, sd_session_get_state,
sd_session_get_uid, sd_session_get_username,
sd_session_get_seat, sd_session_get_start_time,
sd_session_get_service, sd_session_get_type,
sd_session_get_class, sd_session_get_desktop,
sd_session_get_display, sd_session_get_tty,
sd_session_get_vt, sd_session_get_remote_host,
sd_session_get_remote_user, sd_session_get_leader −
Determine state of a specific session</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;systemd/sd−login.h&gt;</b></p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_is_active(const char *</b><i>session</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_is_remote(const char *</b><i>session</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_state(const char *</b><i>session</i><b>,
char **</b><i>state</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_uid(const char *</b><i>session</i><b>,
uid_t *</b><i>uid</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_username(const char *</b><i>session</i><b>,
char **</b><i>username</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_seat(const char *</b><i>session</i><b>,
char **</b><i>seat</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_start_time(const char *</b><i>session</i><b>,
uint64_t *</b><i>usec</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_service(const char *</b><i>session</i><b>,
char **</b><i>service</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_type(const char *</b><i>session</i><b>,
char **</b><i>type</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_class(const char *</b><i>session</i><b>,
char **</b><i>class</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_desktop(const char *</b><i>session</i><b>,
char **</b><i>desktop</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_display(const char *</b><i>session</i><b>,
char **</b><i>display</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_leader(const char *</b><i>session</i><b>,
pid_t *</b><i>leader</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_remote_host(const char *</b><i>session</i><b>,
char **</b><i>remote_host</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_remote_user(const char *</b><i>session</i><b>,
char **</b><i>remote_user</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_tty(const char *</b><i>session</i><b>,
char **</b><i>tty</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="86%">
<p style="margin-top: 1em"><b>int
sd_session_get_vt(const char *</b><i>session</i><b>,
unsigned int *</b><i>vt</i><b>);</b></p> </td>
<td width="5%">
</td></tr>
</table>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_session_is_active()</b>
may be used to determine whether the session identified by
the specified session identifier is currently active (i.e.
currently in the foreground and available for user input) or
not.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_session_is_remote()</b>
may be used to determine whether the session identified by
the specified session identifier is a remote session (i.e.
its remote host is known) or not.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_session_get_state()</b>
may be used to determine the state of the session identified
by the specified session identifier. The following states
are currently known: "online" (session logged in,
but session not active, i.e. not in the foreground),
"active" (session logged in and active, i.e. in
the foreground), "closing" (session nominally
logged out, but some processes belonging to it are still
around). In the future additional states might be defined,
client code should be written to be robust in regards to
additional state strings being returned. This function is a
more generic version of <b>sd_session_is_active()</b>. The
returned string needs to be freed with the libc
<b>free</b>(3) call after use.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_session_get_uid()</b>
may be used to determine the user identifier of the Unix
user the session identified by the specified session
identifier belongs to.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_session_get_username()</b>
may be used to determine the name of the Unix user the
session identified by the specified session identifier
belongs to. The returned string needs to be freed with the
libc <b>free</b>(3) call after use.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_session_get_seat()</b>
may be used to determine the seat identifier of the seat the
session identified by the specified session identifier
belongs to. Note that not all sessions are attached to a
seat, this call will fail (returning <b>−ENODATA</b>)
for them. The returned string needs to be freed with the
libc <b>free</b>(3) call after use.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_session_get_start_time()</b>
may be used to determine the start time of the session
identified by the specified session identifier belongs to.
The <i>usec</i> is in microseconds since the epoch
(<b>CLOCK_REALTIME</b>).</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_session_get_service()</b>
may be used to determine the name of the service (as passed
during PAM session setup) that registered the session
identified by the specified session identifier. The returned
string needs to be freed with the libc <b>free</b>(3) call
after use.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_session_get_type()</b>
may be used to determine the type of the session identified
by the specified session identifier. The returned string is
one of "x11", "wayland",
"tty", "mir" or "unspecified"
and needs to be freed with the libc <b>free</b>(3) call
after use.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_session_get_class()</b>
may be used to determine the class of the session identified
by the specified session identifier. The returned string is
one of "user", "user−early",
"user−incomplete", "greeter",
"lock−screen", "background",
"background−light", "manager" or
"manager−early" and needs to be freed with
the libc <b>free</b>(3) call after use.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_session_get_desktop()</b>
may be used to determine the brand of the desktop running on
the session identified by the specified session identifier.
This field can be set freely by desktop environments and
does not follow any special formatting. However, desktops
are strongly recommended to use the same identifiers and
capitalization as for <i>$XDG_CURRENT_DESKTOP</i>, as
defined by the <b><font color="#0000FF">Desktop Entry
Specification</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">. The returned string needs to be
freed with the libc <b>free</b>(3) call after
use.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_get_display()</b>
may be used to determine the X11 display of the session
identified by the specified session identifier. The returned
string needs to be freed with the libc <b>free</b>(3) call
after use.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_get_leader()</b>
may be used to determine the PID of the leader of the
session identified by the specified session
identifier.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_get_remote_host()</b>
may be used to determine the remote hostname of the session
identified by the specified session identifier. The returned
string needs to be freed with the libc <b>free</b>(3) call
after use.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_get_remote_user()</b>
may be used to determine the remote username of the session
identified by the specified session identifier. The returned
string needs to be freed with the libc <b>free</b>(3) call
after use. Note that this value is rarely known to the
system, and even then should not be relied on.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_get_tty()</b>
may be used to determine the TTY device of the session
identified by the specified session identifier. The returned
string needs to be freed with the libc <b>free</b>(3) call
after use.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_get_vt()</b>
may be used to determine the VT number of the session
identified by the specified session identifier. This
function will return an error if the seat does not support
VTs.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">If
the <i>session</i> parameter of any of these functions is
passed as <b>NULL</b>, the operation is executed for the
session the calling process is a member of, if there is
any.</font></p>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">If
the test succeeds, <b>sd_session_is_active()</b> and
<b>sd_session_is_remote()</b> return a positive integer; if
it fails, 0. On success, <b>sd_session_get_state()</b>,
<b>sd_session_get_uid()</b>,
<b>sd_session_get_username()</b>,
<b>sd_session_get_seat()</b>,
<b>sd_session_get_service()</b>,
<b>sd_session_get_type()</b>, <b>sd_session_get_class()</b>,
<b>sd_session_get_display()</b>,
<b>sd_session_get_leader()</b>,
<b>sd_session_get_remote_user()</b>,
<b>sd_session_get_remote_host()</b> and
<b>sd_session_get_tty()</b> return 0 or a positive integer.
On failure, these calls return a negative errno−style
error code.</font></p>
<h3>Errors
<a name="Errors"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">Returned
errors may indicate the following problems:</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>−ENXIO</b></font></p>
<p style="margin-left:14%;"><font color="#000000">The
specified session does not exist.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>−ENODATA</b></font></p>
<p style="margin-left:14%;"><font color="#000000">The given
field is not specified for the described session.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>−EINVAL</b></font></p>
<p style="margin-left:14%;"><font color="#000000">An input
parameter was invalid (out of range, or <b>NULL</b>, where
that is not accepted).</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>−ENOMEM</b></font></p>
<p style="margin-left:14%;"><font color="#000000">Memory
allocation failed.</font></p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">Functions
described here are available as a shared library, which can
be compiled against and linked to with the
<b>libsystemd pkg-config</b>(1) file.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">The
code described here uses <b>getenv</b>(3), which is declared
to be not multi−thread−safe. This means that the
code calling the functions described here must not call
<b>setenv</b>(3) from a parallel thread. It is recommended
to only do calls to <b>setenv()</b> from an early phase of
the program when no other threads have been
started.</font></p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_get_state()</b>
was added in version 186.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_get_tty()</b>
was added in version 198.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_get_vt()</b>
was added in version 207.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_is_remote()</b>,
<b>sd_session_get_remote_host()</b>, and
<b>sd_session_get_remote_user()</b> were added in version
209.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_get_desktop()</b>
was added in version 217.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_session_get_username()</b>,
<b>sd_session_get_start_time()</b>, and
<b>sd_session_get_leader()</b> were added in version
254.</font></p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>systemd</b>(1),
<b>sd-login</b>(3), <b>sd_pid_get_session</b>(3)</font></p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="10%"></td>
<td width="3%">
<p style="margin-top: 1em"><font color="#000000">1.</font></p> </td>
<td width="1%"></td>
<td width="35%">
<p style="margin-top: 1em"><font color="#000000">Desktop
Entry Specification</font></p></td>
<td width="51%">
</td></tr>
</table>
<p style="margin-left:14%;"><font color="#000000">https://standards.freedesktop.org/desktop-entry-spec/latest/</font></p>
<hr/>
</body>
</html>
