<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:48:36 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SD_BUS_SET_SERVER</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">SD_BUS_SET_SERVER</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#Errors">Errors</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<a href="#NOTES">NOTES</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">sd_bus_set_server,
sd_bus_is_server, sd_bus_get_bus_id, sd_bus_set_bus_client,
sd_bus_is_bus_client, sd_bus_set_monitor, sd_bus_is_monitor
− Configure connection mode for a bus object</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;systemd/sd−bus.h&gt;</b></p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="73%">
<p style="margin-top: 1em"><b>int
sd_bus_set_server(sd_bus *</b><i>bus</i><b>,
int </b><i>b</i><b>,
sd_id128_t </b><i>id</i><b>);</b></p> </td>
<td width="18%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="73%">
<p style="margin-top: 1em"><b>int
sd_bus_is_server(sd_bus *</b><i>bus</i><b>);</b></p> </td>
<td width="18%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="73%">
<p style="margin-top: 1em"><b>int
sd_bus_get_bus_id(sd_bus *</b><i>bus</i><b>,
sd_id128_t *</b><i>id</i><b>);</b></p> </td>
<td width="18%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="73%">
<p style="margin-top: 1em"><b>int
sd_bus_set_bus_client(sd_bus *</b><i>bus</i><b>,
int </b><i>b</i><b>);</b></p> </td>
<td width="18%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="73%">
<p style="margin-top: 1em"><b>int
sd_bus_is_bus_client(sd_bus *</b><i>bus</i><b>);</b></p> </td>
<td width="18%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="73%">
<p style="margin-top: 1em"><b>int
sd_bus_set_monitor(sd_bus *</b><i>bus</i><b>,
int </b><i>b</i><b>);</b></p> </td>
<td width="18%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="73%">
<p style="margin-top: 1em"><b>int
sd_bus_is_monitor(sd_bus *</b><i>bus</i><b>);</b></p> </td>
<td width="18%">
</td></tr>
</table>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_set_server()</b>
configures the bus object as a server for direct D−Bus
connections. <i>b</i> enables/disables the server mode. If
zero, the server mode is disabled. Otherwise, the server
mode is enabled. Configuring a bus object as a server is
required to allow establishing direct connections between
two peers without going via the D−Bus daemon.
<i>id</i> must contain a 128−bit integer id for the
server. If clients add a guid field to their D−Bus
address string, the server id must match this guid or the
D−Bus authentication handshake will fail. If no
specific id is defined for the server,
<b>sd_id128_randomize</b>(3) can be used to generate a
random id instead.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_is_server()</b>
returns whether the server mode is enabled for the given bus
object.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_get_bus_id()</b>
stores the D−Bus server id configured using
<b>sd_bus_set_server()</b> (for server bus objects) or
received during D−Bus authentication (for client bus
objects) in <i>id</i>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_set_bus_client()</b>
configures the bus object as a D−Bus daemon client.
<i>b</i> enables/disables the client mode. If zero, the
client mode is disabled and the bus object should connect
directly to a D−Bus server. Otherwise, the client mode
is enabled and the bus object should connect to a
D−Bus daemon. When connecting to an existing bus using
any of the functions in the <b>sd_bus_open</b>(3) family of
functions or any of the functions in the
<b>sd_bus_default</b>(3) family of functions, the bus object
is automatically configured as a bus client. However, when
connecting to a D−Bus daemon by calling
<b>sd_bus_set_address</b>(3) followed by
<b>sd_bus_start</b>(3), the bus object should be manually
configured as a bus client using
<b>sd_bus_set_bus_client()</b>. By default, a bus object is
not configured as a D−Bus daemon client.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_is_bus_client()</b>
returns whether the client mode is enabled/disabled for the
given bus object.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_bus_set_monitor()</b>
configures the bus object as a D−Bus monitor object.
<i>b</i> enables/disables the monitor mode. If zero, the
monitor mode is disabled. If non−zero, the monitor
mode is enabled. When the monitor mode is enabled, no
messages may be sent via the bus object and it may not
expose any objects on the bus. To start monitoring messages,
call the
<b>org.freedesktop.DBus.Monitoring.BecomeMonitor</b> method
of the D−Bus daemon and pass a list of matches
indicating which messages to intercept. See
<b><font color="#0000FF">The D−Bus
specification</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">for more information.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_bus_is_monitor()</b>
returns whether the monitor mode is enabled/disabled for the
given bus object.</font></p>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">On
success, <b>sd_bus_set_server()</b>,
<b>sd_bus_get_bus_id()</b>, <b>sd_bus_set_bus_client()</b>
and <b>sd_bus_set_monitor()</b> return a non−negative
integer. On failure, they return a negative
errno−style error code.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_bus_is_server()</b>,
<b>sd_bus_is_bus_client()</b> and <b>sd_bus_is_monitor()</b>
return a positive integer when the server or client mode is
enabled, respectively. Otherwise, they return
zero.</font></p>
<h3>Errors
<a name="Errors"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">Returned
errors may indicate the following problems:</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>−ECHILD</b></font></p>
<p style="margin-left:14%;"><font color="#000000">The bus
connection has been created in a different process, library
or module instance.</font></p>
<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 246.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>−EPERM</b></font></p>
<p style="margin-left:14%;"><font color="#000000">The bus
connection has already been started.</font></p>
<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 246.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>−ENOPKG</b></font></p>
<p style="margin-left:14%;"><font color="#000000">The bus
cannot be resolved.</font></p>
<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 246.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>−EINVAL</b></font></p>
<p style="margin-left:14%;"><font color="#000000">A
required parameter was <b>NULL</b> or <i>b</i> was zero and
<i>id</i> did not equal <b>SD_ID128_NULL</b>.</font></p>
<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 246.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>−ENOTCONN</b></font></p>
<p style="margin-left:14%;"><font color="#000000">The bus
is not connected.</font></p>
<p style="margin-left:14%; margin-top: 1em"><font color="#000000">Added
in version 246.</font></p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">Functions
described here are available as a shared library, which can
be compiled against and linked to with the
<b>libsystemd pkg-config</b>(1) file.</font></p>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000">The
code described here uses <b>getenv</b>(3), which is declared
to be not multi−thread−safe. This means that the
code calling the functions described here must not call
<b>setenv</b>(3) from a parallel thread. It is recommended
to only do calls to <b>setenv()</b> from an early phase of
the program when no other threads have been
started.</font></p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>sd_bus_set_server()</b>,
<b>sd_bus_is_server()</b>, <b>sd_bus_get_bus_id()</b>,
<b>sd_bus_set_bus_client()</b>,
<b>sd_bus_is_bus_client()</b>, <b>sd_bus_set_monitor()</b>,
and <b>sd_bus_is_monitor()</b> were added in version
246.</font></p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><font color="#000000"><b>systemd</b>(1),
<b>sd-bus</b>(3)</font></p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="10%"></td>
<td width="3%">
<p style="margin-top: 1em"><font color="#000000">1.</font></p> </td>
<td width="1%"></td>
<td width="30%">
<p style="margin-top: 1em"><font color="#000000">The D-Bus
specification</font></p> </td>
<td width="56%">
</td></tr>
</table>
<p style="margin-left:14%;"><font color="#000000">https://dbus.freedesktop.org/doc/dbus-specification.html#bus-messages-become-monitor</font></p>
<hr/>
</body>
</html>
