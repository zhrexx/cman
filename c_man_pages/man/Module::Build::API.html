<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:48:26 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Module::Build::API</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">Module::Build::API</h1>
<a href="#NAME">NAME</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#CONSTRUCTORS">CONSTRUCTORS</a><br/>
<a href="#METHODS">METHODS</a><br/>
<a href="#Autogenerated Accessors">Autogenerated Accessors</a><br/>
<a href="#MODULE METADATA">MODULE METADATA</a><br/>
<a href="#AUTHOR">AUTHOR</a><br/>
<a href="#COPYRIGHT">COPYRIGHT</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Module::Build::API
− API Reference for Module Authors</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">I list here some
of the most important methods in "Module::Build".
Normally you won't need to deal with these methods unless
you want to subclass "Module::Build". But since
one of the reasons I created this module in the first place
was so that subclassing is possible (and easy), I will
certainly write more docs as the interface stabilizes.</p>
<h3>CONSTRUCTORS
<a name="CONSTRUCTORS"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em"><b>current()</b></p>
<p style="margin-left:14%;">[version 0.20]</p>
<p style="margin-left:14%; margin-top: 1em">This method
returns a reasonable facsimile of the
currently−executing "Module::Build" object
representing the current build. You can use this object to
query its "<b>notes()</b>" method, inquire about
installed modules, and so on. This is a great way to share
information between different parts of your build process.
For instance, you can ask the user a question during
"perl Build.PL", then use their answer during a
regression test:</p>
<p style="margin-left:14%; margin-top: 1em"># In Build.PL:
<br/>
my $color = $build−&gt;prompt("What is your
favorite color?"); <br/>
$build−&gt;notes(color =&gt; $color); <br/>
# In t/colortest.t: <br/>
use Module::Build; <br/>
my $build = Module::Build−&gt;current; <br/>
my $color = $build−&gt;notes('color'); <br/>
...</p>
<p style="margin-left:14%; margin-top: 1em">The way the
current() method is currently implemented, there may be
slight differences between the $build object in Build.PL and
the one in "t/colortest.t". It is our goal to
minimize these differences in future releases of
Module::Build, so please report any anomalies you find.</p>
<p style="margin-left:14%; margin-top: 1em">One important
caveat: in its current implementation, current() will
<b>NOT</b> work correctly if you have changed out of the
directory that "Module::Build" was invoked
from.</p>
<p style="margin-left:9%;"><b>new()</b></p>
<p style="margin-left:14%;">[version 0.03]</p>
<p style="margin-left:14%; margin-top: 1em">Creates a new
Module::Build object. Arguments to the <b>new()</b> method
are listed below. Most arguments are optional, but you must
provide either the "module_name" argument, or
"dist_name" and one of "dist_version" or
"dist_version_from". In other words, you must
provide enough information to determine both a distribution
name and version. <br/>
add_to_cleanup</p>
<p style="margin-left:19%;">[version 0.19]</p>
<p style="margin-left:19%; margin-top: 1em">An array
reference of files to be cleaned up when the
"clean" action is performed. See also the
<b>add_to_cleanup()</b> method.</p>
<p style="margin-left:14%;">allow_pureperl</p>
<p style="margin-left:19%;">[version 0.4005]</p>
<p style="margin-left:19%; margin-top: 1em">A bool
indicating the module is still functional without its xs
parts. When an XS module is build with
−−pureperl_only, it will otherwise fail.</p>
<p style="margin-left:14%;">auto_configure_requires</p>
<p style="margin-left:19%;">[version 0.34]</p>
<p style="margin-left:19%; margin-top: 1em">This parameter
determines whether Module::Build will add itself
automatically to configure_requires (and build_requires) if
Module::Build is not already there. The required version
will be the last 'major' release, as defined by the decimal
version truncated to two decimal places (e.g. 0.34, instead
of 0.3402). The default value is true.</p>
<p style="margin-left:14%;">auto_features</p>
<p style="margin-left:19%;">[version 0.26]</p>
<p style="margin-left:19%; margin-top: 1em">This parameter
supports the setting of features (see
"feature($name)") automatically based on a set of
prerequisites. For instance, for a module that could
optionally use either MySQL or PostgreSQL databases, you
might use "auto_features" like this:</p>
<p style="margin-left:19%; margin-top: 1em">my $build =
Module::Build−&gt;new <br/>
( <br/>
...other stuff here... <br/>
auto_features =&gt; { <br/>
pg_support =&gt; { <br/>
description =&gt; "Interface with Postgres
databases", <br/>
requires =&gt; { 'DBD::Pg' =&gt; 23.3, <br/>
'DateTime::Format::Pg' =&gt; 0 }, <br/>
}, <br/>
mysql_support =&gt; { <br/>
description =&gt; "Interface with MySQL
databases", <br/>
requires =&gt; { 'DBD::mysql' =&gt; 17.9, <br/>
'DateTime::Format::MySQL' =&gt; 0 }, <br/>
}, <br/>
} <br/>
);</p>
<p style="margin-left:19%; margin-top: 1em">For each
feature named, the required prerequisites will be checked,
and if there are no failures, the feature will be enabled
(set to 1). Otherwise the failures will be displayed to the
user and the feature will be disabled (set to 0).</p>
<p style="margin-left:19%; margin-top: 1em">See the
documentation for "requires" for the details of
how requirements can be specified.</p>
<p style="margin-left:14%;">autosplit</p>
<p style="margin-left:19%;">[version 0.04]</p>
<p style="margin-left:19%; margin-top: 1em">An optional
"autosplit" argument specifies a file which should
be run through the <b>AutoSplit::autosplit()</b> function.
If multiple files should be split, the argument may be given
as an array of the files to split.</p>
<p style="margin-left:19%; margin-top: 1em">In general I
don't consider autosplitting a great idea, because it's not
always clear that autosplitting achieves its intended
performance benefits. It may even harm performance in
environments like mod_perl, where as much as possible of a
module's code should be loaded during startup.</p>
<p style="margin-left:14%;">build_class</p>
<p style="margin-left:19%;">[version 0.28]</p>
<p style="margin-left:19%; margin-top: 1em">The
Module::Build class or subclass to use in the build script.
Defaults to "Module::Build" or the class name
passed to or created by a call to
"<b>subclass()</b>". This property is useful if
you're writing a custom Module::Build subclass and have a
bootstrapping problem−−that is, your subclass
requires modules that may not be installed when "perl
Build.PL" is executed, but you've listed in
"build_requires" so that they should be available
when "./Build" is executed.</p>
<p style="margin-left:14%;">build_requires</p>
<p style="margin-left:19%;">[version 0.07]</p>
<p style="margin-left:19%; margin-top: 1em">Modules listed
in this section are necessary to build and install the given
module, but are not necessary for regular usage of it. This
is actually an important distinction − it allows for
tighter control over the body of installed modules, and
facilitates correct dependency checking on binary/packaged
distributions of the module.</p>
<p style="margin-left:19%; margin-top: 1em">See the
documentation for "PREREQUISITES" in
Module::Build::Authoring for the details of how requirements
can be specified.</p>
<p style="margin-left:14%;">configure_requires</p>
<p style="margin-left:19%;">[version 0.30]</p>
<p style="margin-left:19%; margin-top: 1em">Modules listed
in this section must be installed <i>before</i> configuring
this distribution (i.e. before running the <i>Build.PL</i>
script). This might be a specific minimum version of
"Module::Build" or any other module the
<i>Build.PL</i> needs in order to do its stuff. Clients like
"CPAN.pm" or "CPANPLUS" will be expected
to pick "configure_requires" out of the
<i>META.yml</i> file and install these items before running
the "Build.PL".</p>
<p style="margin-left:19%; margin-top: 1em">Module::Build
may automatically add itself to configure_requires. See
"auto_configure_requires" for details.</p>
<p style="margin-left:19%; margin-top: 1em">See the
documentation for "PREREQUISITES" in
Module::Build::Authoring for the details of how requirements
can be specified.</p>
<p style="margin-left:14%;">test_requires</p>
<p style="margin-left:19%;">[version 0.4004]</p>
<p style="margin-left:19%; margin-top: 1em">Modules listed
in this section must be installed before testing the
distribution.</p>
<p style="margin-left:19%; margin-top: 1em">See the
documentation for "PREREQUISITES" in
Module::Build::Authoring for the details of how requirements
can be specified.</p>
<p style="margin-left:14%;">create_packlist</p>
<p style="margin-left:19%;">[version 0.28]</p>
<p style="margin-left:19%; margin-top: 1em">If true, this
parameter tells Module::Build to create a <i>.packlist</i>
file during the "install" action, just like
"ExtUtils::MakeMaker" does. The file is created in
a subdirectory of the "arch" installation
location. It is used by some other tools (CPAN, CPANPLUS,
etc.) for determining what files are part of an install.</p>
<p style="margin-left:19%; margin-top: 1em">The default
value is true. This parameter was introduced in
Module::Build version 0.2609; previously no packlists were
ever created by Module::Build.</p>
<p style="margin-left:14%;">c_source</p>
<p style="margin-left:19%;">[version 0.04]</p>
<p style="margin-left:19%; margin-top: 1em">An optional
"c_source" argument specifies a directory or a
reference to array of directories which contain C source
files that the rest of the build may depend on. Any
".c" files in the directory will be compiled to
object files. The directory will be added to the search path
during the compilation and linking phases of any C or XS
files.</p>
<p style="margin-left:19%; margin-top: 1em">[version
0.3604]</p>
<p style="margin-left:19%; margin-top: 1em">A list of
directories can be supplied using an anonymous array
reference of strings.</p>
<p style="margin-left:14%;">conflicts</p>
<p style="margin-left:19%;">[version 0.07]</p>
<p style="margin-left:19%; margin-top: 1em">Modules listed
in this section conflict in some serious way with the given
module. "Module::Build" (or some
higher−level tool) will refuse to install the given
module if the given module/version is also installed.</p>
<p style="margin-left:19%; margin-top: 1em">See the
documentation for "PREREQUISITES" in
Module::Build::Authoring for the details of how requirements
can be specified.</p>
<p style="margin-left:14%;">create_license</p>
<p style="margin-left:19%;">[version 0.31]</p>
<p style="margin-left:19%; margin-top: 1em">This parameter
tells Module::Build to automatically create a <i>LICENSE</i>
file at the top level of your distribution, containing the
full text of the author's chosen license. This requires
"Software::License" on the author's machine, and
further requires that the "license" parameter
specifies a license that it knows about.</p>
<p style="margin-left:14%;">create_makefile_pl</p>
<p style="margin-left:19%;">[version 0.19]</p>
<p style="margin-left:19%; margin-top: 1em">This parameter
lets you use "Module::Build::Compat" during the
"distdir" (or "dist") action to
automatically create a Makefile.PL for compatibility with
"ExtUtils::MakeMaker". The parameter's value
should be one of the styles named in the
Module::Build::Compat documentation.</p>
<p style="margin-left:19%; margin-top: 1em">Use of this
parameter is discouraged.</p>
<p style="margin-left:14%;">create_readme</p>
<p style="margin-left:19%;">[version 0.22]</p>
<p style="margin-left:19%; margin-top: 1em">This parameter
tells Module::Build to automatically create a <i>README</i>
file at the top level of your distribution. Currently it
will simply use "Pod::Text" (or
"Pod::Readme" if it's installed) on the file
indicated by "dist_version_from" and put the
result in the <i>README</i> file. This is by no means the
only recommended style for writing a <i>README</i>, but it
seems to be one common one used on the CPAN.</p>
<p style="margin-left:19%; margin-top: 1em">If you generate
a <i>README</i> in this way, it's probably a good idea to
create a separate <i>INSTALL</i> file if that information
isn't in the generated <i>README</i>.</p>
<p style="margin-left:14%;">dist_abstract</p>
<p style="margin-left:19%;">[version 0.20]</p>
<p style="margin-left:19%; margin-top: 1em">This should be
a short description of the distribution. This is used when
generating metadata for <i>META.yml</i> and PPD files. If it
is not given then "Module::Build" looks in the POD
of the module from which it gets the distribution's version.
If it finds a POD section marked "=head1 NAME",
then it looks for the first line matching
"\s+−\s+(.+)", and uses the captured text as
the abstract.</p>
<p style="margin-left:14%;">dist_author</p>
<p style="margin-left:19%;">[version 0.20]</p>
<p style="margin-left:19%; margin-top: 1em">This should be
something like "John Doe
&lt;jdoe@example.com&gt;", or if there are multiple
authors, an anonymous array of strings may be specified.
This is used when generating metadata for <i>META.yml</i>
and PPD files. If this is not specified, then
"Module::Build" looks at the module from which it
gets the distribution's version. If it finds a POD section
marked "=head1 AUTHOR", then it uses the contents
of this section.</p>
<p style="margin-left:14%;">dist_name</p>
<p style="margin-left:19%;">[version 0.11]</p>
<p style="margin-left:19%; margin-top: 1em">Specifies the
name for this distribution. Most authors won't need to set
this directly, they can use "module_name" to set
"dist_name" to a reasonable default. However, some
agglomerative distributions like
"libwww−perl" or "bioperl" have
names that don't correspond directly to a module name, so
"dist_name" can be set independently.</p>
<p style="margin-left:14%;">dist_suffix</p>
<p style="margin-left:19%;">[version 0.37]</p>
<p style="margin-left:19%; margin-top: 1em">Specifies an
optional suffix to include after the version number in the
distribution directory (and tarball) name. The only suffix
currently recognized by PAUSE is 'TRIAL', which indicates
that the distribution should not be indexed. For
example:</p>
<p style="margin-left:19%; margin-top: 1em">Foo−Bar−1.23−TRIAL.tar.gz</p>
<p style="margin-left:19%; margin-top: 1em">This will
automatically do the "right thing" depending on
"dist_version" and "release_status".
When "dist_version" does not have an underscore
and "release_status" is not 'stable', then
"dist_suffix" will default to 'TRIAL'. Otherwise
it will default to the empty string, disabling the
suffix.</p>
<p style="margin-left:19%; margin-top: 1em">In general,
authors should only set this if they <b>must</b> override
the default behavior for some particular purpose.</p>
<p style="margin-left:14%;">dist_version</p>
<p style="margin-left:19%;">[version 0.11]</p>
<p style="margin-left:19%; margin-top: 1em">Specifies a
version number for the distribution. See
"module_name" or "dist_version_from" for
ways to have this set automatically from a $VERSION variable
in a module. One way or another, a version number needs to
be set.</p>
<p style="margin-left:14%;">dist_version_from</p>
<p style="margin-left:19%;">[version 0.11]</p>
<p style="margin-left:19%; margin-top: 1em">Specifies a
file to look for the distribution version in. Most authors
won't need to set this directly, they can use
"module_name" to set it to a reasonable
default.</p>
<p style="margin-left:19%; margin-top: 1em">The version is
extracted from the specified file according to the same
rules as ExtUtils::MakeMaker and "CPAN.pm". It
involves finding the first line that matches the regular
expression</p>
<p style="margin-left:19%; margin-top: 1em">/([\$*])(([\w\:\']*)\bVERSION)\b.*\=/</p>
<p style="margin-left:19%; margin-top: 1em"><b>eval()</b>−ing
that line, then checking the value of the $VERSION variable.
Quite ugly, really, but all the modules on CPAN depend on
this process, so there's no real opportunity to change to
something better.</p>
<p style="margin-left:19%; margin-top: 1em">If the target
file of "dist_version_from" contains more than one
package declaration, the version returned will be the one
matching the configured "module_name".</p>
<p style="margin-left:14%;">dynamic_config</p>
<p style="margin-left:19%;">[version 0.07]</p>
<p style="margin-left:19%; margin-top: 1em">A boolean flag
indicating whether the <i>Build.PL</i> file must be executed
to determine prerequisites, or whether they can be
determined solely from consulting its metadata file. The
main reason to set this to a true value is that your module
adds or removes prerequisites dynamically in
<i>Build.PL</i>. If the flag is omitted, it will be treated
as 1 (true), because this is a safer way to behave.</p>
<p style="margin-left:19%; margin-top: 1em">Currently
"Module::Build" doesn't actually do anything with
this flag − it's up to higher−level tools like
"CPAN.pm" to do something useful with it. It can
also be very helpful for static analysis. See
"dynamic_config" in CPAN::Meta::Spec for details
on the metadata field.</p>
<p style="margin-left:14%;">extra_compiler_flags <br/>
extra_linker_flags</p>
<p style="margin-left:19%;">[version 0.19]</p>
<p style="margin-left:19%; margin-top: 1em">These
parameters can contain array references (or strings, in
which case they will be split into arrays) to pass through
to the compiler and linker phases when compiling/linking C
code. For example, to tell the compiler that your code is
C++, you might do:</p>
<p style="margin-left:19%; margin-top: 1em">my $build =
Module::Build−&gt;new <br/>
( <br/>
module_name =&gt; 'Foo::Bar', <br/>
extra_compiler_flags =&gt; ['−x', 'c++'], <br/>
);</p>
<p style="margin-left:19%; margin-top: 1em">To link your XS
code against glib you might write something like:</p>
<p style="margin-left:19%; margin-top: 1em">my $build =
Module::Build−&gt;new <br/>
( <br/>
module_name =&gt; 'Foo::Bar', <br/>
dynamic_config =&gt; 1, <br/>
extra_compiler_flags =&gt; scalar `glib−config
−−cflags`, <br/>
extra_linker_flags =&gt; scalar `glib−config
−−libs`, <br/>
);</p>
<p style="margin-left:14%;">extra_manify_args</p>
<p style="margin-left:19%;">[version 0.4006]</p>
<p style="margin-left:19%; margin-top: 1em">Any extra
arguments to pass to "Pod::Man−&gt;new()"
when building man pages. One common choice might be
"utf8 =&gt; 1" to get Unicode support.</p>
<p style="margin-left:14%;">get_options</p>
<p style="margin-left:19%;">[version 0.26]</p>
<p style="margin-left:19%; margin-top: 1em">You can pass
arbitrary command line options to <i>Build.PL</i> or
<i>Build</i>, and they will be stored in the Module::Build
object and can be accessed via the "<b>args()</b>"
method. However, sometimes you want more flexibility out of
your argument processing than this allows. In such cases,
use the "get_options" parameter to pass in a hash
reference of argument specifications, and the list of
arguments to <i>Build.PL</i> or <i>Build</i> will be
processed according to those specifications before they're
passed on to "Module::Build"'s own argument
processing.</p>
<p style="margin-left:19%; margin-top: 1em">The supported
option specification hash keys are: <br/>
type</p>
<p style="margin-left:24%;">The type of option. The types
are those supported by Getopt::Long; consult its
documentation for a complete list. Typical types are
"=s" for strings, "+" for additive
options, and "!" for negatable options. If the
type is not specified, it will be considered a boolean, i.e.
no argument is taken and a value of 1 will be assigned when
the option is encountered.</p>
<p style="margin-left:19%;">store</p>
<p style="margin-left:24%;">A reference to a scalar in
which to store the value passed to the option. If not
specified, the value will be stored under the option name in
the hash returned by the args() method.</p>
<p style="margin-left:19%;">default</p>
<p style="margin-left:24%;">A default value for the option.
If no default value is specified and no option is passed,
then the option key will not exist in the hash returned by
args().</p>
<p style="margin-left:19%; margin-top: 1em">You can combine
references to your own variables or subroutines with
unreferenced specifications, for which the result will also
be stored in the hash returned by args(). For example:</p>
<p style="margin-left:19%; margin-top: 1em">my $loud = 0;
<br/>
my $build = Module::Build−&gt;new <br/>
( <br/>
module_name =&gt; 'Foo::Bar', <br/>
get_options =&gt; { <br/>
Loud =&gt; { store =&gt; \$loud }, <br/>
Dbd =&gt; { type =&gt; '=s' }, <br/>
Quantity =&gt; { type =&gt; '+' }, <br/>
} <br/>
); <br/>
print STDERR "HEY, ARE YOU LISTENING??\n" if
$loud; <br/>
print "We'll use the ",
$build−&gt;args('Dbd'), " DBI driver\n";
<br/>
print "Are you sure you want that many?\n" <br/>
if $build−&gt;args('Quantity') &gt; 2;</p>
<p style="margin-left:19%; margin-top: 1em">The arguments
for such a specification can be called like so:</p>
<p style="margin-left:19%; margin-top: 1em">perl Build.PL
−−Loud −−Dbd=DBD::pg
−−Quantity −−Quantity
−−Quantity</p>
<p style="margin-left:19%; margin-top: 1em"><b>WARNING:</b>
Any option specifications that conflict with Module::Build's
own options (defined by its properties) will throw an
exception. Use capitalized option names to avoid unintended
conflicts with future Module::Build options.</p>
<p style="margin-left:19%; margin-top: 1em">Consult the
Getopt::Long documentation for details on its usage.</p>
<p style="margin-left:14%;">include_dirs</p>
<p style="margin-left:19%;">[version 0.24]</p>
<p style="margin-left:19%; margin-top: 1em">Specifies any
additional directories in which to search for C header
files. May be given as a string indicating a single
directory, or as a list reference indicating multiple
directories.</p>
<p style="margin-left:14%;">install_path</p>
<p style="margin-left:19%;">[version 0.19]</p>
<p style="margin-left:19%; margin-top: 1em">You can set
paths for individual installable elements by using the
"install_path" parameter:</p>
<p style="margin-left:19%; margin-top: 1em">my $build =
Module::Build−&gt;new <br/>
( <br/>
...other stuff here... <br/>
install_path =&gt; { <br/>
lib =&gt; '/foo/lib', <br/>
arch =&gt; '/foo/lib/arch', <br/>
} <br/>
);</p>
<p style="margin-left:14%;">installdirs</p>
<p style="margin-left:19%;">[version 0.19]</p>
<p style="margin-left:19%; margin-top: 1em">Determines
where files are installed within the normal perl hierarchy
as determined by <i>Config.pm</i>. Valid values are:
"core", "site", "vendor". The
default is "site". See "INSTALL PATHS"
in Module::Build</p>
<p style="margin-left:14%;">license</p>
<p style="margin-left:19%;">[version 0.07]</p>
<p style="margin-left:19%; margin-top: 1em">Specifies the
licensing terms of your distribution.</p>
<p style="margin-left:19%; margin-top: 1em">As of
Module::Build version 0.36_14, you may use a
Software::License subclass name (e.g. 'Apache_2_0') instead
of one of the keys below.</p>
<p style="margin-left:19%; margin-top: 1em">The legacy list
of valid license values include: <br/>
apache</p>
<p style="margin-left:24%;">The distribution is licensed
under the Apache License, Version 2.0
(&lt;http://apache.org/licenses/LICENSE−2.0&gt;).</p>
<p style="margin-left:19%;">apache_1_1</p>
<p style="margin-left:24%;">The distribution is licensed
under the Apache Software License, Version 1.1
(&lt;http://apache.org/licenses/LICENSE−1.1&gt;).</p>
<p style="margin-left:19%;">artistic</p>
<p style="margin-left:24%;">The distribution is licensed
under the Artistic License, as specified by the
<i>Artistic</i> file in the standard Perl distribution.</p>
<p style="margin-left:19%;">artistic_2</p>
<p style="margin-left:24%;">The distribution is licensed
under the Artistic 2.0 License
(&lt;http://opensource.org/licenses/artistic−license−2.0.php&gt;.)</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="19%"></td>
<td width="4%">
<p>bsd</p></td>
<td width="1%"></td>
<td width="71%">
<p>The distribution is licensed under the BSD License
(&lt;http://www.opensource.org/licenses/bsd−license.php&gt;).</p> </td>
<td width="5%">
</td></tr>
<tr align="left" valign="top">
<td width="19%"></td>
<td width="4%">
<p>gpl</p></td>
<td width="1%"></td>
<td width="71%">
<p>The distribution is licensed under the terms of the GNU
General Public License
(&lt;http://www.opensource.org/licenses/gpl−license.php&gt;).</p> </td>
<td width="5%">
</td></tr>
</table>
<p style="margin-left:19%;">lgpl</p>
<p style="margin-left:24%;">The distribution is licensed
under the terms of the GNU Lesser General Public License
(&lt;http://www.opensource.org/licenses/lgpl−license.php&gt;).</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="19%"></td>
<td width="4%">
<p>mit</p></td>
<td width="1%"></td>
<td width="66%">
<p>The distribution is licensed under the MIT License
(&lt;http://opensource.org/licenses/mit−license.php&gt;).</p> </td>
<td width="10%">
</td></tr>
</table>
<p style="margin-left:19%;">mozilla</p>
<p style="margin-left:24%;">The distribution is licensed
under the Mozilla Public License.
(&lt;http://opensource.org/licenses/mozilla1.0.php&gt; or
&lt;http://opensource.org/licenses/mozilla1.1.php&gt;)</p>
<p style="margin-left:19%;">open_source</p>
<p style="margin-left:24%;">The distribution is licensed
under some other Open Source Initiative−approved
license listed at
&lt;http://www.opensource.org/licenses/&gt;.</p>
<p style="margin-left:19%;">perl</p>
<p style="margin-left:24%;">The distribution may be copied
and redistributed under the same terms as Perl itself (this
is by far the most common licensing option for modules on
CPAN). This is a dual license, in which the user may choose
between either the GPL or the Artistic license.</p>
<p style="margin-left:19%;">restrictive</p>
<p style="margin-left:24%;">The distribution may not be
redistributed without special permission from the author
and/or copyright holder.</p>
<p style="margin-left:19%;">unrestricted</p>
<p style="margin-left:24%;">The distribution is licensed
under a license that is <b>not</b> approved by
www.opensource.org but that allows distribution without
restrictions.</p>
<p style="margin-left:19%; margin-top: 1em">Note that you
must still include the terms of your license in your code
and documentation − this field only sets the
information that is included in distribution metadata to let
automated tools figure out your licensing restrictions.
Humans still need something to read. If you choose to
provide this field, you should make sure that you keep it in
sync with your written documentation if you ever change your
licensing terms.</p>
<p style="margin-left:19%; margin-top: 1em">You may also
use a license type of "unknown" if you don't wish
to specify your terms in the metadata.</p>
<p style="margin-left:19%; margin-top: 1em">Also see the
"create_license" parameter.</p>
<p style="margin-left:14%;">meta_add</p>
<p style="margin-left:19%;">[version 0.28]</p>
<p style="margin-left:19%; margin-top: 1em">A hash of
key/value pairs that should be added to the <i>META.yml</i>
file during the "distmeta" action. Any existing
entries with the same names will be overridden.</p>
<p style="margin-left:19%; margin-top: 1em">See the
"MODULE METADATA" section for details.</p>
<p style="margin-left:14%;">meta_merge</p>
<p style="margin-left:19%;">[version 0.28]</p>
<p style="margin-left:19%; margin-top: 1em">A hash of
key/value pairs that should be merged into the
<i>META.yml</i> file during the "distmeta" action.
Any existing entries with the same names will be
overridden.</p>
<p style="margin-left:19%; margin-top: 1em">The only
difference between "meta_add" and
"meta_merge" is their behavior on
hash−valued and array−valued entries:
"meta_add" will completely blow away the existing
hash or array value, but "meta_merge" will merge
the supplied data into the existing hash or array value.</p>
<p style="margin-left:19%; margin-top: 1em">See the
"MODULE METADATA" section for details.</p>
<p style="margin-left:14%;">module_name</p>
<p style="margin-left:19%;">[version 0.03]</p>
<p style="margin-left:19%; margin-top: 1em">The
"module_name" is a shortcut for setting default
values of "dist_name" and
"dist_version_from", reflecting the fact that the
majority of CPAN distributions are centered around one
"main" module. For instance, if you set
"module_name" to "Foo::Bar", then
"dist_name" will default to
"Foo−Bar" and "dist_version_from"
will default to "lib/Foo/Bar.pm".
"dist_version_from" will in turn be used to set
"dist_version".</p>
<p style="margin-left:19%; margin-top: 1em">Setting
"module_name" won't override a "dist_*"
parameter you specify explicitly.</p>
<p style="margin-left:14%;">needs_compiler</p>
<p style="margin-left:19%;">[version 0.36]</p>
<p style="margin-left:19%; margin-top: 1em">The
"needs_compiler" parameter indicates whether a
compiler is required to build the distribution. The default
is false, unless XS files are found or the
"c_source" parameter is set, in which case it is
true. If true, ExtUtils::CBuilder is automatically added to
"build_requires" if needed.</p>
<p style="margin-left:19%; margin-top: 1em">For a
distribution where a compiler is <i>optional</i>, e.g. a
dual XS/pure−Perl distribution,
"needs_compiler" should explicitly be set to a
false value.</p>
<p style="margin-left:14%;">PL_files</p>
<p style="margin-left:19%;">[version 0.06]</p>
<p style="margin-left:19%; margin-top: 1em">An optional
parameter specifying a set of ".PL" files in your
distribution. These will be run as Perl scripts prior to
processing the rest of the files in your distribution with
the name of the file they're generating as an argument. They
are usually used as templates for creating other files
dynamically, so that a file like
"lib/Foo/Bar.pm.PL" might create the file
"lib/Foo/Bar.pm".</p>
<p style="margin-left:19%; margin-top: 1em">The files are
specified with the ".PL" files as hash keys, and
the file(s) they generate as hash values, like so:</p>
<p style="margin-left:19%; margin-top: 1em">my $build =
Module::Build−&gt;new <br/>
( <br/>
module_name =&gt; 'Foo::Bar', <br/>
... <br/>
PL_files =&gt; { 'lib/Foo/Bar.pm.PL' =&gt; 'lib/Foo/Bar.pm'
}, <br/>
);</p>
<p style="margin-left:19%; margin-top: 1em">Note that the
path specifications are <i>always</i> given in
Unix−like format, not in the style of the local
system.</p>
<p style="margin-left:19%; margin-top: 1em">If your
".PL" scripts don't create any files, or if they
create files with unexpected names, or even if they create
multiple files, you can indicate that so that Module::Build
can properly handle these created files:</p>
<p style="margin-left:19%; margin-top: 1em">PL_files =&gt;
{ <br/>
'lib/Foo/Bar.pm.PL' =&gt; 'lib/Foo/Bar.pm', <br/>
'lib/something.PL' =&gt; ['/lib/something', '/lib/else'],
<br/>
'lib/funny.PL' =&gt; [], <br/>
}</p>
<p style="margin-left:19%; margin-top: 1em">Here's an
example of a simple PL file.</p>
<p style="margin-left:19%; margin-top: 1em">my $output_file
= shift; <br/>
open my $fh, "&gt;", $output_file or die
"Can't open $output_file: $!"; <br/>
print $fh &lt;&lt;'END'; <br/>
#!/usr/bin/perl <br/>
print "Hello, world!\n"; <br/>
END</p>
<p style="margin-left:19%; margin-top: 1em">PL files are
not installed by default, so its safe to put them in
<i>lib/</i> and <i>bin/</i>.</p>
<p style="margin-left:14%;">pm_files</p>
<p style="margin-left:19%;">[version 0.19]</p>
<p style="margin-left:19%; margin-top: 1em">An optional
parameter specifying the set of ".pm" files in
this distribution, specified as a hash reference whose keys
are the files' locations in the distributions, and whose
values are their logical locations based on their package
name, i.e. where they would be found in a "normal"
Module::Build−style distribution. This parameter is
mainly intended to support alternative layouts of files.</p>
<p style="margin-left:19%; margin-top: 1em">For instance,
if you have an old−style "MakeMaker"
distribution for a module called "Foo::Bar" and a
<i>Bar.pm</i> file at the top level of the distribution, you
could specify your layout in your "Build.PL" like
this:</p>
<p style="margin-left:19%; margin-top: 1em">my $build =
Module::Build−&gt;new <br/>
( <br/>
module_name =&gt; 'Foo::Bar', <br/>
... <br/>
pm_files =&gt; { 'Bar.pm' =&gt; 'lib/Foo/Bar.pm' }, <br/>
);</p>
<p style="margin-left:19%; margin-top: 1em">Note that the
values should include "lib/", because this is
where they would be found in a "normal"
Module::Build−style distribution.</p>
<p style="margin-left:19%; margin-top: 1em">Note also that
the path specifications are <i>always</i> given in
Unix−like format, not in the style of the local
system.</p>
<p style="margin-left:14%;">pod_files</p>
<p style="margin-left:19%;">[version 0.19]</p>
<p style="margin-left:19%; margin-top: 1em">Just like
"pm_files", but used for specifying the set of
".pod" files in your distribution.</p>
<p style="margin-left:14%;">recommends</p>
<p style="margin-left:19%;">[version 0.08]</p>
<p style="margin-left:19%; margin-top: 1em">This is just
like the "requires" argument, except that modules
listed in this section aren't essential, just a good idea.
We'll just print a friendly warning if one of these modules
aren't found, but we'll continue running.</p>
<p style="margin-left:19%; margin-top: 1em">If a module is
recommended but not required, all tests should still pass if
the module isn't installed. This may mean that some tests
may be skipped if recommended dependencies aren't
present.</p>
<p style="margin-left:19%; margin-top: 1em">Automated tools
like CPAN.pm should inform the user when recommended modules
aren't installed, and it should offer to install them if it
wants to be helpful.</p>
<p style="margin-left:19%; margin-top: 1em">See the
documentation for "PREREQUISITES" in
Module::Build::Authoring for the details of how requirements
can be specified.</p>
<p style="margin-left:14%;">recursive_test_files</p>
<p style="margin-left:19%;">[version 0.28]</p>
<p style="margin-left:19%; margin-top: 1em">Normally,
"Module::Build" does not search subdirectories
when looking for tests to run. When this options is set it
will search recursively in all subdirectories of the
standard 't' test directory.</p>
<p style="margin-left:14%;">release_status</p>
<p style="margin-left:19%;">[version 0.37]</p>
<p style="margin-left:19%; margin-top: 1em">The CPAN Meta
Spec version 2 adds "release_status" to allow
authors to specify how a distribution should be indexed.
Consistent with the spec, this parameter can only have one
three values: 'stable', 'testing' or 'unstable'.</p>
<p style="margin-left:19%; margin-top: 1em">Unless
explicitly set by the author, "release_status"
will default to 'stable' unless "dist_version"
contains an underscore, in which case it will default to
'testing'.</p>
<p style="margin-left:19%; margin-top: 1em">It is an error
to specify a "release_status" of 'stable' when
"dist_version" contains an underscore
character.</p>
<p style="margin-left:14%;">requires</p>
<p style="margin-left:19%;">[version 0.07]</p>
<p style="margin-left:19%; margin-top: 1em">An optional
"requires" argument specifies any module
prerequisites that the current module depends on.</p>
<p style="margin-left:19%; margin-top: 1em">One note:
currently "Module::Build" doesn't actually
<i>require</i> the user to have dependencies installed, it
just strongly urges. In the future we may require it.
There's also a "recommends" section for things
that aren't absolutely required.</p>
<p style="margin-left:19%; margin-top: 1em">Automated tools
like CPAN.pm should refuse to install a module if one of its
dependencies isn't satisfied, unless a "force"
command is given by the user. If the tools are helpful, they
should also offer to install the dependencies.</p>
<p style="margin-left:19%; margin-top: 1em">A synonym for
"requires" is "prereq", to help succour
people transitioning from "ExtUtils::MakeMaker".
The "requires" term is preferred, but the
"prereq" term will remain valid in future
distributions.</p>
<p style="margin-left:19%; margin-top: 1em">See the
documentation for "PREREQUISITES" in
Module::Build::Authoring for the details of how requirements
can be specified.</p>
<p style="margin-left:14%;">script_files</p>
<p style="margin-left:19%;">[version 0.18]</p>
<p style="margin-left:19%; margin-top: 1em">An optional
parameter specifying a set of files that should be installed
as executable Perl scripts when the module is installed. May
be given as an array reference of the files, as a hash
reference whose keys are the files (and whose values will
currently be ignored), as a string giving the name of a
directory in which to find scripts, or as a string giving
the name of a single script file.</p>
<p style="margin-left:19%; margin-top: 1em">The default is
to install any scripts found in a <i>bin</i> directory at
the top level of the distribution, minus any keys of
PL_files.</p>
<p style="margin-left:19%; margin-top: 1em">For backward
compatibility, you may use the parameter "scripts"
instead of "script_files". Please consider this
usage deprecated, though it will continue to exist for
several version releases.</p>
<p style="margin-left:14%;">share_dir</p>
<p style="margin-left:19%;">[version 0.36]</p>
<p style="margin-left:19%; margin-top: 1em">An optional
parameter specifying directories of static data files to be
installed as read−only files for use with
File::ShareDir. The "share_dir" property supports
both distribution−level and module−level share
files.</p>
<p style="margin-left:19%; margin-top: 1em">The simplest
use of "share_dir" is to set it to a directory
name or an arrayref of directory names containing files to
be installed in the distribution−level share
directory.</p>
<p style="margin-left:19%; margin-top: 1em">share_dir =&gt;
'share'</p>
<p style="margin-left:19%; margin-top: 1em">Alternatively,
if "share_dir" is a hashref, it may have
"dist" or "module" keys providing full
flexibility in defining how share directories should be
installed.</p>
<p style="margin-left:19%; margin-top: 1em">share_dir =&gt;
{ <br/>
dist =&gt; [ 'examples', 'more_examples' ], <br/>
module =&gt; { <br/>
Foo::Templates =&gt; ['share/html', 'share/text'], <br/>
Foo::Config =&gt; 'share/config', <br/>
} <br/>
}</p>
<p style="margin-left:19%; margin-top: 1em">If
"share_dir" is set, then File::ShareDir will
automatically be added to the "requires" hash.</p>
<p style="margin-left:14%;">sign</p>
<p style="margin-left:19%;">[version 0.16]</p>
<p style="margin-left:19%; margin-top: 1em">If a true value
is specified for this parameter, Module::Signature will be
used (via the 'distsign' action) to create a SIGNATURE file
for your distribution during the 'distdir' action, and to
add the SIGNATURE file to the MANIFEST (therefore, don't add
it yourself).</p>
<p style="margin-left:19%; margin-top: 1em">The default
value is false. In the future, the default may change to
true if you have "Module::Signature" installed on
your system.</p>
<p style="margin-left:14%;">tap_harness_args</p>
<p style="margin-left:19%;">[version 0.2808_03]</p>
<p style="margin-left:19%; margin-top: 1em">An optional
parameter specifying parameters to be passed to TAP::Harness
when running tests. Must be given as a hash reference of
parameters; see the TAP::Harness documentation for details.
Note that specifying this parameter will implicitly set
"use_tap_harness" to a true value. You must
therefore be sure to add TAP::Harness as a requirement for
your module in "build_requires".</p>
<p style="margin-left:14%;">test_files</p>
<p style="margin-left:19%;">[version 0.23]</p>
<p style="margin-left:19%; margin-top: 1em">An optional
parameter specifying a set of files that should be used as
"Test::Harness"−style regression tests to be
run during the "test" action. May be given as an
array reference of the files, or as a hash reference whose
keys are the files (and whose values will currently be
ignored). If the argument is given as a single string (not
in an array reference), that string will be treated as a
glob() pattern specifying the files to use.</p>
<p style="margin-left:19%; margin-top: 1em">The default is
to look for a <i>test.pl</i> script in the top−level
directory of the distribution, and any files matching the
glob pattern "*.t" in the <i>t/</i> subdirectory.
If the "recursive_test_files" property is true,
then the "t/" directory will be scanned
recursively for "*.t" files.</p>
<p style="margin-left:14%;">use_tap_harness</p>
<p style="margin-left:19%;">[version 0.2808_03]</p>
<p style="margin-left:19%; margin-top: 1em">An optional
parameter indicating whether or not to use TAP::Harness for
testing rather than Test::Harness. Defaults to false. If set
to true, you must therefore be sure to add TAP::Harness as a
requirement for your module in "build_requires".
Implicitly set to a true value if
"tap_harness_args" is specified.</p>
<p style="margin-left:14%;">xs_files</p>
<p style="margin-left:19%;">[version 0.19]</p>
<p style="margin-left:19%; margin-top: 1em">Just like
"pm_files", but used for specifying the set of
".xs" files in your distribution.</p>
<p style="margin-left:9%;">new_from_context(%args)</p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">When called
from a directory containing a <i>Build.PL</i> script (in
other words, the base directory of a distribution), this
method will run the <i>Build.PL</i> and call resume() to
return the resulting "Module::Build" object to the
caller. Any key−value arguments given to
new_from_context() are essentially like command line
arguments given to the <i>Build.PL</i> script, so for
example you could pass "verbose =&gt; 1" to this
method to turn on verbosity.</p>
<p style="margin-left:9%;"><b>resume()</b></p>
<p style="margin-left:14%;">[version 0.03]</p>
<p style="margin-left:14%; margin-top: 1em">You'll probably
never call this method directly, it's only called from the
auto−generated "Build" script (and the
"new_from_context" method). The new() method is
only called once, when the user runs "perl
Build.PL". Thereafter, when the user runs "Build
test" or another action, the "Module::Build"
object is created using the resume() method to
re−instantiate with the settings given earlier to
new().</p>
<p style="margin-left:9%;"><b>subclass()</b></p>
<p style="margin-left:14%;">[version 0.06]</p>
<p style="margin-left:14%; margin-top: 1em">This creates a
new "Module::Build" subclass on the fly, as
described in the "SUBCLASSING" in
Module::Build::Authoring section. The caller must provide
either a "class" or "code" parameter, or
both. The "class" parameter indicates the name to
use for the new subclass, and defaults to
"MyModuleBuilder". The "code" parameter
specifies Perl code to use as the body of the subclass.</p>
<p style="margin-left:9%;">add_property</p>
<p style="margin-left:14%;">[version 0.31]</p>
<p style="margin-left:14%; margin-top: 1em">package
'My::Build'; <br/>
use base 'Module::Build'; <br/>
__PACKAGE__−&gt;add_property( 'pedantic' ); <br/>
__PACKAGE__−&gt;add_property( answer =&gt; 42 ); <br/>
__PACKAGE__−&gt;add_property( <br/>
'epoch', <br/>
default =&gt; sub { time }, <br/>
check =&gt; sub { <br/>
return 1 if /ˆ\d+$/; <br/>
shift−&gt;property_error( "'$_' is not an epoch
time" ); <br/>
return 0; <br/>
}, <br/>
);</p>
<p style="margin-left:14%; margin-top: 1em">Adds a property
to a Module::Build class. Properties are those attributes of
a Module::Build object which can be passed to the
constructor and which have accessors to get and set them.
All of the core properties, such as "module_name"
and "license", are defined using this class
method.</p>
<p style="margin-left:14%; margin-top: 1em">The first
argument to add_property() is always the name of the
property. The second argument can be either a default value
for the property, or a list of key/value pairs. The
supported keys are: <br/>
"default"</p>
<p style="margin-left:19%;">The default value. May
optionally be specified as a code reference, in which case
the return value from the execution of the code reference
will be used. If you need the default to be a code
reference, just use a code reference to return it, e.g.:</p>
<p style="margin-left:19%; margin-top: 1em">default =&gt;
sub { sub { ... } },</p>
<p style="margin-left:14%;">"check"</p>
<p style="margin-left:19%;">A code reference that checks
that a value specified for the property is valid. During the
execution of the code reference, the new value will be
included in the $_ variable. If the value is correct, the
"check" code reference should return true. If the
value is not correct, it sends an error message to
property_error() and returns false.</p>
<p style="margin-left:14%; margin-top: 1em">When this
method is called, a new property will be installed in the
Module::Build class, and an accessor will be built to allow
the property to be get or set on the build object.</p>
<p style="margin-left:14%; margin-top: 1em">print
$build−&gt;pedantic, $/; <br/>
$build−&gt;pedantic(0);</p>
<p style="margin-left:14%; margin-top: 1em">If the default
value is a hash reference, this generates a
special−case accessor method, wherein individual
key/value pairs may be set or fetched:</p>
<p style="margin-left:14%; margin-top: 1em">print
"stuff{foo} is: ", $build−&gt;stuff( 'foo'
), $/; <br/>
$build−&gt;stuff( foo =&gt; 'bar' ); <br/>
print $build−&gt;stuff( 'foo' ), $/; # Outputs
"bar"</p>
<p style="margin-left:14%; margin-top: 1em">Of course, you
can still set the entire hash reference at once, as
well:</p>
<p style="margin-left:14%; margin-top: 1em">$build−&gt;stuff(
{ foo =&gt; 'bar', baz =&gt; 'yo' } );</p>
<p style="margin-left:14%; margin-top: 1em">In either case,
if a "check" has been specified for the property,
it will be applied to the entire hash. So the check code
reference should look something like:</p>
<p style="margin-left:14%; margin-top: 1em">check =&gt; sub
{ <br/>
return 1 if defined $_ &amp;&amp; exists $_−&gt;{foo};
<br/>
shift−&gt;property_error(qq{Property "stuff"
needs "foo"}); <br/>
return 0; <br/>
},</p>
<p style="margin-left:9%;">property_error</p>
<p style="margin-left:14%;">[version 0.31]</p>
<h3>METHODS
<a name="METHODS"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">add_build_element($type)</p>
<p style="margin-left:14%;">[version 0.26]</p>
<p style="margin-left:14%; margin-top: 1em">Adds a new type
of entry to the build process. Accepts a single string
specifying its type−name. There must also be a method
defined to process things of that type, e.g. if you add a
build element called 'foo', then you must also define a
method called process_foo_files().</p>
<p style="margin-left:14%; margin-top: 1em">See also
"Adding new file types to the build process" in
Module::Build::Cookbook.</p>
<p style="margin-left:9%;">add_to_cleanup(@files)</p>
<p style="margin-left:14%;">[version 0.03]</p>
<p style="margin-left:14%; margin-top: 1em">You may call
"$self−&gt;add_to_cleanup(@patterns)" to
tell "Module::Build" that certain files should be
removed when the user performs the "Build clean"
action. The arguments to the method are patterns suitable
for passing to Perl's glob() function, specified in either
Unix format or the current machine's native format. It's
usually convenient to use Unix format when you
hard−code the filenames (e.g. in <i>Build.PL</i>) and
the native format when the names are programmatically
generated (e.g. in a testing script).</p>
<p style="margin-left:14%; margin-top: 1em">I decided to
provide a dynamic method of the $build object, rather than
just use a static list of files named in the
<i>Build.PL</i>, because these static lists can get
difficult to manage. I usually prefer to keep the
responsibility for registering temporary files close to the
code that creates them.</p>
<p style="margin-left:9%;"><b>args()</b></p>
<p style="margin-left:14%;">[version 0.26]</p>
<p style="margin-left:14%; margin-top: 1em">my $args_href =
$build−&gt;args; <br/>
my %args = $build−&gt;args; <br/>
my $arg_value = $build−&gt;args($key); <br/>
$build−&gt;args($key, $value);</p>
<p style="margin-left:14%; margin-top: 1em">This method is
the preferred interface for retrieving the arguments passed
via command line options to <i>Build.PL</i> or <i>Build</i>,
minus the Module−Build specific options.</p>
<p style="margin-left:14%; margin-top: 1em">When called in
a scalar context with no arguments, this method returns a
reference to the hash storing all of the arguments; in an
array context, it returns the hash itself. When passed a
single argument, it returns the value stored in the args
hash for that option key. When called with two arguments,
the second argument is assigned to the args hash under the
key passed as the first argument.</p>
<p style="margin-left:9%;">autosplit_file($from, $to)</p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Invokes the
AutoSplit module on the $from file, sending the output to
the "lib/auto" directory inside $to. $to is
typically the "blib/" directory.</p>
<p style="margin-left:9%;"><b>base_dir()</b></p>
<p style="margin-left:14%;">[version 0.14]</p>
<p style="margin-left:14%; margin-top: 1em">Returns a
string containing the root−level directory of this
build, i.e. where the "Build.PL" script and the
"lib" directory can be found. This is usually the
same as the current working directory, because the
"Build" script will chdir() into this directory as
soon as it begins execution.</p>
<p style="margin-left:9%;"><b>build_requires()</b></p>
<p style="margin-left:14%;">[version 0.21]</p>
<p style="margin-left:14%; margin-top: 1em">Returns a hash
reference indicating the "build_requires"
prerequisites that were passed to the new() method.</p>
<p style="margin-left:9%;">can_action( $action )</p>
<p style="margin-left:14%;">Returns a reference to the
method that defines $action, or false otherwise. This is
handy for actions defined (or maybe not!) in subclasses.</p>
<p style="margin-left:14%; margin-top: 1em">[version
0.32_xx]</p>
<p style="margin-left:9%;"><b>cbuilder()</b></p>
<p style="margin-left:14%;">[version 0.2809]</p>
<p style="margin-left:14%; margin-top: 1em">Returns the
internal ExtUtils::CBuilder object that can be used for
compiling &amp; linking C code. If no such object is
available (e.g. if the system has no compiler installed) an
exception will be thrown.</p>
<p style="margin-left:9%;">check_installed_status($module,
$version)</p>
<p style="margin-left:14%;">[version 0.11]</p>
<p style="margin-left:14%; margin-top: 1em">This method
returns a hash reference indicating whether a version
dependency on a certain module is satisfied. The $module
argument is given as a string like "Data::Dumper"
or "perl", and the $version argument can take any
of the forms described in "requires" above. This
allows very fine−grained version checking.</p>
<p style="margin-left:14%; margin-top: 1em">The returned
hash reference has the following structure:</p>
<p style="margin-left:14%; margin-top: 1em">{ <br/>
ok =&gt; $whether_the_dependency_is_satisfied, <br/>
have =&gt; $version_already_installed, <br/>
need =&gt; $version_requested, # Same as incoming $version
argument <br/>
message =&gt; $informative_error_message, <br/>
}</p>
<p style="margin-left:14%; margin-top: 1em">If no version
of $module is currently installed, the "have"
value will be the string "&lt;none&gt;". Otherwise
the "have" value will simply be the version of the
installed module. Note that this means that if $module is
installed but doesn't define a version number, the
"have" value will be "undef" −
this is why we don't use "undef" for the case when
$module isn't installed at all.</p>
<p style="margin-left:14%; margin-top: 1em">This method may
be called either as an object method
("$build−&gt;check_installed_status($module,
$version)") or as a class method
("Module::Build−&gt;check_installed_status($module,
$version)").</p>
<p style="margin-left:9%;">check_installed_version($module,
$version)</p>
<p style="margin-left:14%;">[version 0.05]</p>
<p style="margin-left:14%; margin-top: 1em">Like
<b>check_installed_status()</b>, but simply returns true or
false depending on whether module $module satisfies the
dependency $version.</p>
<p style="margin-left:14%; margin-top: 1em">If the check
succeeds, the return value is the actual version of $module
installed on the system. This allows you to do the
following:</p>
<p style="margin-left:14%; margin-top: 1em">my $installed =
$build−&gt;check_installed_version('DBI', '1.15');
<br/>
if ($installed) { <br/>
print "Congratulations, version $installed of DBI is
installed.\n"; <br/>
} else { <br/>
die "Sorry, you must install DBI.\n"; <br/>
}</p>
<p style="margin-left:14%; margin-top: 1em">If the check
fails, we return false and set $@ to an informative error
message.</p>
<p style="margin-left:14%; margin-top: 1em">If $version is
any non−true value (notably zero) and any version of
$module is installed, we return true. In this case, if
$module doesn't define a version, or if its version is zero,
we return the special value "0 but true", which is
numerically zero, but logically true.</p>
<p style="margin-left:14%; margin-top: 1em">In general you
might prefer to use "check_installed_status" if
you need detailed information, or this method if you just
need a yes/no answer.</p>
<p style="margin-left:9%;">compare_versions($v1, $op,
$v2)</p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Compares two
module versions $v1 and $v2 using the operator $op, which
should be one of Perl's numeric operators like
"!=" or "&gt;=" or the like. We do at
least a halfway−decent job of handling versions that
aren't strictly numeric, like "0.27_02", but
exotic stuff will likely cause problems.</p>
<p style="margin-left:14%; margin-top: 1em">In the future,
the guts of this method might be replaced with a call out to
"version.pm".</p>
<p style="margin-left:9%;">config($key) <br/>
config($key, $value) <b><br/>
config()</b> [deprecated]</p>
<p style="margin-left:14%;">[version 0.22]</p>
<p style="margin-left:14%; margin-top: 1em">With a single
argument $key, returns the value associated with that key in
the "Config.pm" hash, including any changes the
author or user has specified.</p>
<p style="margin-left:14%; margin-top: 1em">With $key and
$value arguments, sets the value for future callers of
config($key).</p>
<p style="margin-left:14%; margin-top: 1em">With no
arguments, returns a hash reference containing all such
key−value pairs. This usage is deprecated, though,
because it's a resource hog and violates encapsulation.</p>
<p style="margin-left:9%;">config_data($name) <br/>
config_data($name =&gt; $value)</p>
<p style="margin-left:14%;">[version 0.26]</p>
<p style="margin-left:14%; margin-top: 1em">With a single
argument, returns the value of the configuration variable
$name. With two arguments, sets the given configuration
variable to the given value. The value may be any Perl
scalar that's serializable with "Data::Dumper".
For instance, if you write a module that can use a MySQL or
PostgreSQL back−end, you might create configuration
variables called "mysql_connect" and
"postgres_connect", and set each to an array of
connection parameters for
"DBI−&gt;connect()".</p>
<p style="margin-left:14%; margin-top: 1em">Configuration
values set in this way using the Module::Build object will
be available for querying during the build/test process and
after installation via the generated
"...::ConfigData" module, as
"...::ConfigData−&gt;config($name)".</p>
<p style="margin-left:14%; margin-top: 1em">The
<b>feature()</b> and config_data() methods represent
Module::Build's main support for configuration of installed
modules. See also "SAVING CONFIGURATION
INFORMATION" in Module::Build::Authoring.</p>
<p style="margin-left:9%;"><b>conflicts()</b></p>
<p style="margin-left:14%;">[version 0.21]</p>
<p style="margin-left:14%; margin-top: 1em">Returns a hash
reference indicating the "conflicts" prerequisites
that were passed to the new() method.</p>
<p style="margin-left:9%;">contains_pod($file)
[deprecated]</p>
<p style="margin-left:14%;">[version 0.20]</p>
<p style="margin-left:14%; margin-top: 1em">[Deprecated]
Please see Module::Metadata instead.</p>
<p style="margin-left:14%; margin-top: 1em">Returns true if
the given file appears to contain POD documentation.
Currently this checks whether the file has a line beginning
with '=pod', '=head', or '=item', but the exact semantics
may change in the future.</p>
<p style="margin-left:9%;">copy_if_modified(%parameters)</p>
<p style="margin-left:14%;">[version 0.19]</p>
<p style="margin-left:14%; margin-top: 1em">Takes the file
in the "from" parameter and copies it to the file
in the "to" parameter, or the directory in the
"to_dir" parameter, if the file has changed since
it was last copied (or if it doesn't exist in the new
location). By default the entire directory structure of
"from" will be copied into "to_dir"; an
optional "flatten" parameter will copy into
"to_dir" without doing so.</p>
<p style="margin-left:14%; margin-top: 1em">Returns the
path to the destination file, or "undef" if
nothing needed to be copied.</p>
<p style="margin-left:14%; margin-top: 1em">Any directories
that need to be created in order to perform the copying will
be automatically created.</p>
<p style="margin-left:14%; margin-top: 1em">The destination
file is set to read−only. If the source file has the
executable bit set, then the destination file will be made
executable.</p>
<p style="margin-left:9%;"><b>create_build_script()</b></p>
<p style="margin-left:14%;">[version 0.05]</p>
<p style="margin-left:14%; margin-top: 1em">Creates an
executable script called "Build" in the current
directory that will be used to execute further user actions.
This script is roughly analogous (in function, not in form)
to the Makefile created by "ExtUtils::MakeMaker".
This method also creates some temporary data in a directory
called "_build/". Both of these will be removed
when the "realclean" action is performed.</p>
<p style="margin-left:14%; margin-top: 1em">Among the files
created in "_build/" is a <i>_build/prereqs</i>
file containing the set of prerequisites for this
distribution, as a hash of hashes. This file may be
eval()−ed to obtain the authoritative set of
prerequisites, which might be different from the contents of
<i>META.yml</i> (because <i>Build.PL</i> might have set them
dynamically). But fancy developers take heed: do not put any
fancy custom runtime code in the <i>_build/prereqs</i> file,
leave it as a static declaration containing only strings and
numbers. Similarly, do not alter the structure of the
internal "$self−&gt;{properties}{requires}"
(etc.) data members, because that's where this data comes
from.</p>
<p style="margin-left:9%;"><b>current_action()</b></p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Returns the
name of the currently−running action, such as
"build" or "test". This action is not
necessarily the action that was originally invoked by the
user. For example, if the user invoked the "test"
action, <b>current_action()</b> would initially return
"test". However, action "test" depends
on action "code", so <b>current_action()</b> will
return "code" while that dependency is being
executed. Once that action has completed,
<b>current_action()</b> will again return
"test".</p>
<p style="margin-left:14%; margin-top: 1em">If you need to
know the name of the original action invoked by the user,
see "<b>invoked_action()</b>" below.</p>
<p style="margin-left:9%;">depends_on(@actions)</p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Invokes the
named action or list of actions in sequence. Using this
method is preferred to calling the action explicitly because
it performs some internal record−keeping, and it
ensures that the same action is not invoked multiple times
(note: in future versions of Module::Build it's conceivable
that this run−only−once mechanism will be
changed to something more intelligent).</p>
<p style="margin-left:14%; margin-top: 1em">Note that the
name of this method is something of a misnomer; it should
really be called something like
invoke_actions_unless_already_invoked() or something, but
for better or worse (perhaps better!) we were still thinking
in "make"−like dependency terms when we
created this method.</p>
<p style="margin-left:14%; margin-top: 1em">See also
<b>dispatch()</b>. The main distinction between the two is
that depends_on() is meant to call an action from inside
another action, whereas dispatch() is meant to set the very
top action in motion.</p>
<p style="margin-left:9%;">dir_contains($first_dir,
$second_dir)</p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Returns true if
the first directory logically contains the second directory.
This is just a convenience function because
"File::Spec" doesn't really provide an easy way to
figure this out (but "Path::Class" does...).</p>
<p style="margin-left:9%;">dispatch($action, %args)</p>
<p style="margin-left:14%;">[version 0.03]</p>
<p style="margin-left:14%; margin-top: 1em">Invokes the
build action $action. Optionally, a list of options and
their values can be passed in. This is equivalent to
invoking an action at the command line, passing in a list of
options.</p>
<p style="margin-left:14%; margin-top: 1em">Custom options
that have not been registered must be passed in as a hash
reference in a key named "args":</p>
<p style="margin-left:14%; margin-top: 1em">$build−&gt;dispatch('foo',
verbose =&gt; 1, args =&gt; { my_option =&gt; 'value'
});</p>
<p style="margin-left:14%; margin-top: 1em">This method is
intended to be used to programmatically invoke build
actions, e.g. by applications controlling
Module::Build−based builds rather than by
subclasses.</p>
<p style="margin-left:14%; margin-top: 1em">See also
<b>depends_on()</b>. The main distinction between the two is
that depends_on() is meant to call an action from inside
another action, whereas dispatch() is meant to set the very
top action in motion.</p>
<p style="margin-left:9%;"><b>dist_dir()</b></p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Returns the
name of the directory that will be created during the
"dist" action. The name is derived from the
"dist_name" and "dist_version"
properties.</p>
<p style="margin-left:9%;"><b>dist_name()</b></p>
<p style="margin-left:14%;">[version 0.21]</p>
<p style="margin-left:14%; margin-top: 1em">Returns the
name of the current distribution, as passed to the new()
method in a "dist_name" or modified
"module_name" parameter.</p>
<p style="margin-left:9%;"><b>dist_version()</b></p>
<p style="margin-left:14%;">[version 0.21]</p>
<p style="margin-left:14%; margin-top: 1em">Returns the
version of the current distribution, as determined by the
new() method from a "dist_version",
"dist_version_from", or "module_name"
parameter.</p>
<p style="margin-left:9%;">do_system($cmd, @args)</p>
<p style="margin-left:14%;">[version 0.21]</p>
<p style="margin-left:14%; margin-top: 1em">This is a
fairly simple wrapper around Perl's system() built−in
command. Given a command and an array of optional arguments,
this method will print the command to "STDOUT",
and then execute it using Perl's system(). It returns true
or false to indicate success or failure (the opposite of how
system() works, but more intuitive).</p>
<p style="margin-left:14%; margin-top: 1em">Note that if
you supply a single argument to do_system(), it will/may be
processed by the system's shell, and any special characters
will do their special things. If you supply multiple
arguments, no shell will get involved and the command will
be executed directly.</p>
<p style="margin-left:9%;"><b>extra_compiler_flags()</b>
<br/>
extra_compiler_flags(@flags)</p>
<p style="margin-left:14%;">[version 0.25]</p>
<p style="margin-left:14%; margin-top: 1em">Set or retrieve
the extra compiler flags. Returns an arrayref of flags.</p>
<p style="margin-left:9%;"><b>extra_linker_flags()</b> <br/>
extra_linker_flags(@flags)</p>
<p style="margin-left:14%;">[version 0.25]</p>
<p style="margin-left:14%; margin-top: 1em">Set or retrieve
the extra linker flags. Returns an arrayref of flags.</p>
<p style="margin-left:9%;">feature($name) <br/>
feature($name =&gt; $value)</p>
<p style="margin-left:14%;">[version 0.26]</p>
<p style="margin-left:14%; margin-top: 1em">With a single
argument, returns true if the given feature is set. With two
arguments, sets the given feature to the given boolean
value. In this context, a "feature" is any
optional functionality of an installed module. For instance,
if you write a module that could optionally support a MySQL
or PostgreSQL backend, you might create features called
"mysql_support" and "postgres_support",
and set them to true/false depending on whether the user has
the proper databases installed and configured.</p>
<p style="margin-left:14%; margin-top: 1em">Features set in
this way using the Module::Build object will be available
for querying during the build/test process and after
installation via the generated "...::ConfigData"
module, as
"...::ConfigData−&gt;feature($name)".</p>
<p style="margin-left:14%; margin-top: 1em">The feature()
and config_data() methods represent Module::Build's main
support for configuration of installed modules. See also
"SAVING CONFIGURATION INFORMATION" in
Module::Build::Authoring.</p>
<p style="margin-left:9%;">fix_shebang_line(@files)</p>
<p style="margin-left:14%;">[version 0.??]</p>
<p style="margin-left:14%; margin-top: 1em">Modify any
"shebang" line in the specified files to use the
path to the perl executable being used for the current
build. Files are modified in−place. The existing
shebang line must have a command that contains
""perl""; arguments to the command do
not count. In particular, this means that the use of
"#!/usr/bin/env perl" will not be changed.</p>
<p style="margin-left:14%; margin-top: 1em">For an
explanation of shebang lines, see
&lt;http://en.wikipedia.org/wiki/Shebang_%28Unix%29&gt;.</p>
<p style="margin-left:9%;"><b>have_c_compiler()</b></p>
<p style="margin-left:14%;">[version 0.21]</p>
<p style="margin-left:14%; margin-top: 1em">Returns true if
the current system seems to have a working C compiler. We
currently determine this by attempting to compile a simple C
source file and reporting whether the attempt was
successful.</p>
<p style="margin-left:9%;"><b>install_base_relpaths()</b>
<br/>
install_base_relpaths($type) <br/>
install_base_relpaths($type =&gt; $path)</p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Set or retrieve
the relative paths that are appended to
"install_base" for any installable element. This
is useful if you want to set the relative install path for
custom build elements.</p>
<p style="margin-left:14%; margin-top: 1em">With no
argument, it returns a reference to a hash containing all
elements and their respective values. This hash should not
be modified directly; use the multiple argument below form
to change values.</p>
<p style="margin-left:14%; margin-top: 1em">The single
argument form returns the value associated with the element
$type.</p>
<p style="margin-left:14%; margin-top: 1em">The multiple
argument form allows you to set the paths for element types.
$value must be a relative path using Unix−like paths.
(A series of directories separated by slashes, e.g.
"foo/bar".) The return value is a localized path
based on $value.</p>
<p style="margin-left:14%; margin-top: 1em">Assigning the
value "undef" to an element causes it to be
removed.</p>
<p style="margin-left:9%;">install_destination($type)</p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Returns the
directory in which items of type $type (e.g.
"lib", "arch", "bin", or
anything else returned by the
"<b>install_types()</b>" method) will be installed
during the "install" action. Any settings for
"install_path", "install_base", and
"prefix" are taken into account when determining
the return value.</p>
<p style="margin-left:9%;"><b>install_path()</b> <br/>
install_path($type) <br/>
install_path($type =&gt; $path)</p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Set or retrieve
paths for specific installable elements. This is useful when
you want to examine any explicit install paths specified by
the user on the command line, or if you want to set the
install path for a specific installable element based on
another attribute like install_base().</p>
<p style="margin-left:14%; margin-top: 1em">With no
argument, it returns a reference to a hash containing all
elements and their respective values. This hash should not
be modified directly; use the multiple argument below form
to change values.</p>
<p style="margin-left:14%; margin-top: 1em">The single
argument form returns the value associated with the element
$type.</p>
<p style="margin-left:14%; margin-top: 1em">The multiple
argument form allows you to set the paths for element types.
The supplied $path should be an absolute path to install
elements of $type. The return value is $path.</p>
<p style="margin-left:14%; margin-top: 1em">Assigning the
value "undef" to an element causes it to be
removed.</p>
<p style="margin-left:9%;"><b>install_types()</b></p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Returns a list
of installable types that this build knows about. These
types each correspond to the name of a directory in
<i>blib/</i>, and the list usually includes items such as
"lib", "arch", "bin",
"script", "libdoc", "bindoc",
and if HTML documentation is to be built,
"libhtml" and "binhtml". Other
user−defined types may also exist.</p>
<p style="margin-left:9%;"><b>invoked_action()</b></p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">This is the
name of the original action invoked by the user. This value
is set when the user invokes <i>Build.PL</i>, the
<i>Build</i> script, or programmatically through the
<b>dispatch()</b> method. It does not change as
sub−actions are executed as dependencies are
evaluated.</p>
<p style="margin-left:14%; margin-top: 1em">To get the name
of the currently executing dependency, see
"<b>current_action()</b>" above.</p>
<p style="margin-left:9%;"><b>notes()</b> <br/>
notes($key) <br/>
notes($key =&gt; $value)</p>
<p style="margin-left:14%;">[version 0.20]</p>
<p style="margin-left:14%; margin-top: 1em">The notes()
value allows you to store your own persistent information
about the build, and to share that information among
different entities involved in the build. See the example in
the current() method.</p>
<p style="margin-left:14%; margin-top: 1em">The notes()
method is essentially a glorified hash access. With no
arguments, notes() returns the entire hash of notes. With
one argument, notes($key) returns the value associated with
the given key. With two arguments, "notes($key,
$value)" sets the value associated with the given key
to $value and returns the new value.</p>
<p style="margin-left:14%; margin-top: 1em">The lifetime of
the "notes" data is for "a build"
− that is, the "notes" hash is created when
"perl Build.PL" is run (or when the new() method
is run, if the Module::Build Perl API is being used instead
of called from a shell), and lasts until "perl
Build.PL" is run again or the "clean" action
is run.</p>
<p style="margin-left:9%;"><b>orig_dir()</b></p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Returns a
string containing the working directory that was in effect
before the <i>Build</i> script <b>chdir()</b>−ed into
the "base_dir". This might be useful for writing
wrapper tools that might need to <b>chdir()</b> back
out.</p>
<p style="margin-left:9%;"><b>os_type()</b></p>
<p style="margin-left:14%;">[version 0.04]</p>
<p style="margin-left:14%; margin-top: 1em">If you're
subclassing Module::Build and some code needs to alter its
behavior based on the current platform, you may only need to
know whether you're running on Windows, Unix, MacOS, VMS,
etc., and not the fine−grained value of Perl's
$ˆO variable. The os_type() method will return a string
like "Windows", "Unix",
"MacOS", "VMS", or whatever is
appropriate. If you're running on an unknown platform, it
will return "undef" − there shouldn't be
many unknown platforms though.</p>
<p style="margin-left:9%;"><b>is_vmsish() <br/>
is_windowsish() <br/>
is_unixish()</b></p>
<p style="margin-left:14%;">Convenience functions that
return a boolean value indicating whether this platform
behaves respectively like VMS, Windows, or Unix. For
arbitrary reasons other platforms don't get their own such
functions, at least not yet.</p>
<p style="margin-left:9%;"><b>prefix_relpaths()</b> <br/>
prefix_relpaths($installdirs) <br/>
prefix_relpaths($installdirs, $type) <br/>
prefix_relpaths($installdirs, $type =&gt; $path)</p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Set or retrieve
the relative paths that are appended to "prefix"
for any installable element. This is useful if you want to
set the relative install path for custom build elements.</p>
<p style="margin-left:14%; margin-top: 1em">With no
argument, it returns a reference to a hash containing all
elements and their respective values as defined by the
current "installdirs" setting.</p>
<p style="margin-left:14%; margin-top: 1em">With a single
argument, it returns a reference to a hash containing all
elements and their respective values as defined by
$installdirs.</p>
<p style="margin-left:14%; margin-top: 1em">The hash
returned by the above calls should not be modified directly;
use the three−argument below form to change
values.</p>
<p style="margin-left:14%; margin-top: 1em">The two
argument form returns the value associated with the element
$type.</p>
<p style="margin-left:14%; margin-top: 1em">The multiple
argument form allows you to set the paths for element types.
$value must be a relative path using Unix−like paths.
(A series of directories separated by slashes, e.g.
"foo/bar".) The return value is a localized path
based on $value.</p>
<p style="margin-left:14%; margin-top: 1em">Assigning the
value "undef" to an element causes it to be
removed.</p>
<p style="margin-left:9%;"><b>get_metadata()</b></p>
<p style="margin-left:14%;">[version 0.36]</p>
<p style="margin-left:14%; margin-top: 1em">This method
returns a hash reference of metadata that can be used to
create a YAML datastream. It is provided for authors to
override or customize the fields of <i>META.yml</i>.
E.g.</p>
<p style="margin-left:14%; margin-top: 1em">package
My::Builder; <br/>
use base 'Module::Build'; <br/>
sub get_metadata { <br/>
my $self, @args = @_; <br/>
my $data = $self−&gt;SUPER::get_metadata(@args); <br/>
$data−&gt;{custom_field} = 'foo'; <br/>
return $data; <br/>
}</p>
<p style="margin-left:14%; margin-top: 1em">Valid arguments
include:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="14%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="80%">
<p>"fatal" −− indicates whether
missing required metadata fields should be a fatal error or
not. For META creation, it generally should, but for MYMETA
creation for end−users, it should not be fatal.</p></td>
<td width="1%">
</td></tr>
<tr align="left" valign="top">
<td width="14%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="80%">
<p>"auto" −− indicates whether any
necessary configure_requires should be automatically added.
This is used in META creation.</p></td>
<td width="1%">
</td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">This method is
a wrapper around the old prepare_metadata API now that we no
longer use YAML::Node to hold metadata.</p>
<p style="margin-left:9%;"><b>prepare_metadata()</b>
[deprecated]</p>
<p style="margin-left:14%;">[version 0.36]</p>
<p style="margin-left:14%; margin-top: 1em">[Deprecated] As
of 0.36, authors should use "get_metadata"
instead. This method is preserved for backwards
compatibility only.</p>
<p style="margin-left:14%; margin-top: 1em">It takes three
positional arguments: a hashref (to which metadata will be
added), an optional arrayref (to which metadata keys will be
added in order if the arrayref exists), and a hashref of
arguments (as provided to get_metadata). The latter argument
is new as of 0.36. Earlier versions are always fatal on
errors.</p>
<p style="margin-left:14%; margin-top: 1em">Prior to
version 0.36, this method took a YAML::Node as an argument
to hold assembled metadata.</p>
<p style="margin-left:9%;"><b>prereq_failures()</b></p>
<p style="margin-left:14%;">[version 0.11]</p>
<p style="margin-left:14%; margin-top: 1em">Returns a data
structure containing information about any failed
prerequisites (of any of the types described above), or
"undef" if all prerequisites are met.</p>
<p style="margin-left:14%; margin-top: 1em">The data
structure returned is a hash reference. The top level keys
are the type of prerequisite failed, one of
"requires", "build_requires",
"conflicts", or "recommends". The
associated values are hash references whose keys are the
names of required (or conflicting) modules. The associated
values of those are hash references indicating some
information about the failure. For example:</p>
<p style="margin-left:14%; margin-top: 1em">{ <br/>
have =&gt; '0.42', <br/>
need =&gt; '0.59', <br/>
message =&gt; 'Version 0.42 is installed, but we need
version 0.59', <br/>
}</p>
<p style="margin-left:14%; margin-top: 1em">or</p>
<p style="margin-left:14%; margin-top: 1em">{ <br/>
have =&gt; '&lt;none&gt;', <br/>
need =&gt; '0.59', <br/>
message =&gt; 'Prerequisite Foo isn't installed', <br/>
}</p>
<p style="margin-left:14%; margin-top: 1em">This hash has
the same structure as the hash returned by the
check_installed_status() method, except that in the case of
"conflicts" dependencies we change the
"need" key to "conflicts" and construct
a proper message.</p>
<p style="margin-left:14%; margin-top: 1em">Examples:</p>
<p style="margin-left:14%; margin-top: 1em"># Check a
required dependency on Foo::Bar <br/>
if (
$build−&gt;prereq_failures−&gt;{requires}{Foo::Bar}
) { ... <br/>
# Check whether there were any failures <br/>
if ( $build−&gt;prereq_failures ) { ... <br/>
# Show messages for all failures <br/>
my $failures = $build−&gt;prereq_failures; <br/>
while (my ($type, $list) = each %$failures) { <br/>
while (my ($name, $hash) = each %$list) { <br/>
print "Failure for $name:
$hash−&gt;{message}\n"; <br/>
} <br/>
}</p>
<p style="margin-left:9%;"><b>prereq_data()</b></p>
<p style="margin-left:14%;">[version 0.32]</p>
<p style="margin-left:14%; margin-top: 1em">Returns a
reference to a hash describing all prerequisites. The keys
of the hash will be the various prerequisite types
('requires', 'build_requires', 'test_requires',
'configure_requires', 'recommends', or 'conflicts') and the
values will be references to hashes of module names and
version numbers. Only prerequisites types that are defined
will be included. The "prereq_data" action is just
a thin wrapper around the prereq_data() method and dumps the
hash as a string that can be loaded using eval().</p>
<p style="margin-left:9%;"><b>prereq_report()</b></p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Returns a
human−readable (table−form) string showing all
prerequisites, the versions required, and the versions
actually installed. This can be useful for reviewing the
configuration of your system prior to a build, or when
compiling data to send for a bug report. The
"prereq_report" action is just a thin wrapper
around the prereq_report() method.</p>
<p style="margin-left:9%;">prompt($message, $default)</p>
<p style="margin-left:14%;">[version 0.12]</p>
<p style="margin-left:14%; margin-top: 1em">Asks the user a
question and returns their response as a string. The first
argument specifies the message to display to the user (for
example, "Where do you keep your money?"). The
second argument, which is optional, specifies a default
answer (for example, "wallet"). The user will be
asked the question once.</p>
<p style="margin-left:14%; margin-top: 1em">If prompt()
detects that it is not running interactively and there is
nothing on STDIN or if the PERL_MM_USE_DEFAULT environment
variable is set to true, the $default will be used without
prompting.</p>
<p style="margin-left:14%; margin-top: 1em">To prevent
automated processes from blocking, the user must either set
PERL_MM_USE_DEFAULT or attach something to STDIN (this can
be a pipe/file containing a scripted set of answers or
/dev/null.)</p>
<p style="margin-left:14%; margin-top: 1em">If no $default
is provided an empty string will be used instead. In
non−interactive mode, the absence of $default is an
error (though explicitly passing undef() as the default is
valid as of 0.27.)</p>
<p style="margin-left:14%; margin-top: 1em">This method may
be called as a class or object method.</p>
<p style="margin-left:9%;"><b>recommends()</b></p>
<p style="margin-left:14%;">[version 0.21]</p>
<p style="margin-left:14%; margin-top: 1em">Returns a hash
reference indicating the "recommends"
prerequisites that were passed to the new() method.</p>
<p style="margin-left:9%;"><b>requires()</b></p>
<p style="margin-left:14%;">[version 0.21]</p>
<p style="margin-left:14%; margin-top: 1em">Returns a hash
reference indicating the "requires" prerequisites
that were passed to the new() method.</p>
<p style="margin-left:9%;">rscan_dir($dir, $pattern)</p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">Uses
"File::Find" to traverse the directory $dir,
returning a reference to an array of entries matching
$pattern. $pattern may either be a regular expression (using
"qr//" or just a plain string), or a reference to
a subroutine that will return true for wanted entries. If
$pattern is not given, all entries will be returned.</p>
<p style="margin-left:14%; margin-top: 1em">Examples:</p>
<p style="margin-left:14%; margin-top: 1em"># All the *.pm
files in lib/ <br/>
$m−&gt;rscan_dir('lib', qr/\.pm$/) <br/>
# All the files in blib/ that aren't *.html files <br/>
$m−&gt;rscan_dir('blib', sub {−f $_ and not
/\.html$/}); <br/>
# All the files in t/ <br/>
$m−&gt;rscan_dir('t');</p>
<p style="margin-left:9%;"><b>runtime_params()</b> <br/>
runtime_params($key)</p>
<p style="margin-left:14%;">[version 0.28]</p>
<p style="margin-left:14%; margin-top: 1em">The
runtime_params() method stores the values passed on the
command line for valid properties (that is, any command line
options for which valid_property() returns a true value).
The value on the command line may override the default value
for a property, as well as any value specified in a call to
new(). This allows you to programmatically tell if
"perl Build.PL" or any execution of
"./Build" had command line options specified that
override valid properties.</p>
<p style="margin-left:14%; margin-top: 1em">The
runtime_params() method is essentially a glorified
read−only hash. With no arguments, runtime_params()
returns the entire hash of properties specified on the
command line. With one argument, runtime_params($key)
returns the value associated with the given key.</p>
<p style="margin-left:14%; margin-top: 1em">The lifetime of
the "runtime_params" data is for "a
build" − that is, the "runtime_params"
hash is created when "perl Build.PL" is run (or
when the new() method is called, if the Module::Build Perl
API is being used instead of called from a shell), and lasts
until "perl Build.PL" is run again or the
"clean" action is run.</p>
<p style="margin-left:9%;"><b>script_files()</b></p>
<p style="margin-left:14%;">[version 0.18]</p>
<p style="margin-left:14%; margin-top: 1em">Returns a hash
reference whose keys are the perl script files to be
installed, if any. This corresponds to the
"script_files" parameter to the new() method. With
an optional argument, this parameter may be set
dynamically.</p>
<p style="margin-left:14%; margin-top: 1em">For backward
compatibility, the scripts() method does exactly the same
thing as script_files(). scripts() is deprecated, but it
will stay around for several versions to give people time to
transition.</p>
<p style="margin-left:9%;">up_to_date($source_file,
$derived_file) <br/>
up_to_date(\@source_files, \@derived_files)</p>
<p style="margin-left:14%;">[version 0.20]</p>
<p style="margin-left:14%; margin-top: 1em">This method can
be used to compare a set of source files to a set of derived
files. If any of the source files are newer than any of the
derived files, it returns false. Additionally, if any of the
derived files do not exist, it returns false. Otherwise it
returns true.</p>
<p style="margin-left:14%; margin-top: 1em">The arguments
may be either a scalar or an array reference of file
names.</p>
<p style="margin-left:9%;">y_n($message, $default)</p>
<p style="margin-left:14%;">[version 0.12]</p>
<p style="margin-left:14%; margin-top: 1em">Asks the user a
yes/no question using prompt() and returns true or false
accordingly. The user will be asked the question repeatedly
until they give an answer that looks like "yes" or
"no".</p>
<p style="margin-left:14%; margin-top: 1em">The first
argument specifies the message to display to the user (for
example, "Shall I invest your money for you?"),
and the second argument specifies the default answer (for
example, "y").</p>
<p style="margin-left:14%; margin-top: 1em">Note that the
default is specified as a string like "y" or
"n", and the return value is a Perl boolean value
like 1 or 0. I thought about this for a while and this
seemed like the most useful way to do it.</p>
<p style="margin-left:14%; margin-top: 1em">This method may
be called as a class or object method.</p>
<h3>Autogenerated Accessors
<a name="Autogenerated Accessors"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">In addition to
the aforementioned methods, there are also some get/set
accessor methods for the following properties: <b><br/>
PL_files() <br/>
allow_mb_mismatch() <br/>
allow_pureperl() <br/>
auto_configure_requires() <br/>
autosplit() <br/>
base_dir() <br/>
bindoc_dirs() <br/>
blib() <br/>
build_bat() <br/>
build_class() <br/>
build_elements() <br/>
build_requires() <br/>
build_script() <br/>
bundle_inc() <br/>
bundle_inc_preload() <br/>
c_source() <br/>
config_dir() <br/>
configure_requires() <br/>
conflicts() <br/>
cover() <br/>
cpan_client() <br/>
create_license() <br/>
create_makefile_pl() <br/>
create_packlist() <br/>
create_readme() <br/>
debug() <br/>
debugger() <br/>
destdir() <br/>
dynamic_config() <br/>
extra_manify_args() <br/>
get_options() <br/>
html_css() <br/>
include_dirs() <br/>
install_base() <br/>
installdirs() <br/>
libdoc_dirs() <br/>
license() <br/>
magic_number() <br/>
mb_version() <br/>
meta_add() <br/>
meta_merge() <br/>
metafile() <br/>
metafile2() <br/>
module_name() <br/>
mymetafile() <br/>
mymetafile2() <br/>
needs_compiler() <br/>
orig_dir() <br/>
perl() <br/>
pm_files() <br/>
pod_files() <br/>
pollute() <br/>
prefix() <br/>
prereq_action_types() <br/>
program_name() <br/>
pureperl_only() <br/>
quiet() <br/>
recommends() <br/>
recurse_into() <br/>
recursive_test_files() <br/>
requires() <br/>
scripts() <br/>
sign() <br/>
tap_harness_args() <br/>
test_file_exts() <br/>
test_requires() <br/>
use_rcfile() <br/>
use_tap_harness() <br/>
verbose() <br/>
xs_files()</b></p>
<h2>MODULE METADATA
<a name="MODULE METADATA"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">If you would
like to add other useful metadata, "Module::Build"
supports this with the "meta_add" and
"meta_merge" arguments to
"<b>new()</b>". The authoritative list of
supported metadata can be found at CPAN::Meta::Spec but for
convenience − here are a few of the more useful ones:
<br/>
keywords</p>
<p style="margin-left:14%;">For describing the distribution
using keyword (or "tags") in order to make
CPAN.org indexing and search more efficient and useful.</p>
<p style="margin-left:9%;">resources</p>
<p style="margin-left:14%;">A list of additional resources
available for users of the distribution. This can include
links to a homepage on the web, a bug tracker, the
repository location, and even a subscription page for the
distribution mailing list.</p>
<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Ken Williams
&lt;kwilliams@cpan.org&gt;</p>
<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Copyright (c)
2001−2006 Ken Williams. All rights reserved.</p>
<p style="margin-left:9%; margin-top: 1em">This library is
free software; you can redistribute it and/or modify it
under the same terms as Perl itself.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>perl</b>(1),
Module::Build(3), Module::Build::Authoring(3),
Module::Build::Cookbook(3), ExtUtils::MakeMaker(3)</p>
<p style="margin-left:9%; margin-top: 1em"><i>META.yml</i>
Specification: CPAN::Meta::Spec</p>
<hr/>
</body>
</html>
