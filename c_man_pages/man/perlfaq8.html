<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:47:39 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>perlfaq8</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">perlfaq8</h1>
<a href="#NAME">NAME</a><br/>
<a href="#VERSION">VERSION</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#How do I find out which operating system I'm running under?">How do I find out which operating system I'm running under?</a><br/>
<a href="#Why does exec() not return?">Why does exec() not return?</a><br/>
<a href="#How do I do fancy stuff with the keyboard/screen/mouse?">How do I do fancy stuff with the keyboard/screen/mouse?</a><br/>
<a href="#How do I print something out in color?">How do I print something out in color?</a><br/>
<a href="#How do I read just one key without waiting for a return key?">How do I read just one key without waiting for a return key?</a><br/>
<a href="#How do I check whether input is ready on the keyboard?">How do I check whether input is ready on the keyboard?</a><br/>
<a href="#How do I clear the screen?">How do I clear the screen?</a><br/>
<a href="#How do I get the screen size?">How do I get the screen size?</a><br/>
<a href="#How do I ask the user for a password?">How do I ask the user for a password?</a><br/>
<a href="#How do I read and write the serial port?">How do I read and write the serial port?</a><br/>
<a href="#How do I decode encrypted password files?">How do I decode encrypted password files?</a><br/>
<a href="#How do I start a process in the background?">How do I start a process in the background?</a><br/>
<a href="#How do I trap control characters/signals?">How do I trap control characters/signals?</a><br/>
<a href="#How do I modify the shadow password file on a Unix system?">How do I modify the shadow password file on a Unix system?</a><br/>
<a href="#How do I set the time and date?">How do I set the time and date?</a><br/>
<a href="#How can I sleep() or alarm() for under a second?">How can I sleep() or alarm() for under a second?</a><br/>
<a href="#How can I measure time under a second?">How can I measure time under a second?</a><br/>
<a href="#How can I do an atexit() or setjmp()/longjmp()? (Exception handling)">How can I do an atexit() or setjmp()/longjmp()? (Exception handling)</a><br/>
<a href="#Why doesn't my sockets program work under System V (Solaris)? What does theerror message &quot;Protocol not supported&quot; mean?">Why doesn't my sockets program work under System V (Solaris)? What does theerror message "Protocol not supported" mean?</a><br/>
<a href="#How can I call my system's unique C functions from Perl?">How can I call my system's unique C functions from Perl?</a><br/>
<a href="#Where do I get the include files to do ioctl() or syscall()?">Where do I get the include files to do ioctl() or syscall()?</a><br/>
<a href="#Why do setuid perl scripts complain about kernel problems?">Why do setuid perl scripts complain about kernel problems?</a><br/>
<a href="#How can I open a pipe both to and from a command?">How can I open a pipe both to and from a command?</a><br/>
<a href="#Why can't I get the output of a command with system()?">Why can't I get the output of a command with system()?</a><br/>
<a href="#How can I capture STDERR from an external command?">How can I capture STDERR from an external command?</a><br/>
<a href="#Why doesn't open() return an error when a pipe open fails?">Why doesn't open() return an error when a pipe open fails?</a><br/>
<a href="#What's wrong with using backticks in a void context?">What's wrong with using backticks in a void context?</a><br/>
<a href="#How can I call backticks without shell processing?">How can I call backticks without shell processing?</a><br/>
<a href="#Why can't my script read from STDIN after I gave it EOF (ˆD on Unix, ˆZ onMS−DOS)?">Why can't my script read from STDIN after I gave it EOF (ˆD on Unix, ˆZ onMS−DOS)?</a><br/>
<a href="#How can I convert my shell script to perl?">How can I convert my shell script to perl?</a><br/>
<a href="#Can I use perl to run a telnet or ftp session?">Can I use perl to run a telnet or ftp session?</a><br/>
<a href="#How can I write expect in Perl?">How can I write expect in Perl?</a><br/>
<a href="#Is there a way to hide perl's command line from programs such as &quot;ps&quot;?">Is there a way to hide perl's command line from programs such as "ps"?</a><br/>
<a href="#I {changed directory, modified my environment} in a perl script. How comethe change disappeared when I exited the script? How do I get mychanges to be visible?">I {changed directory, modified my environment} in a perl script. How comethe change disappeared when I exited the script? How do I get mychanges to be visible?</a><br/>
<a href="#How do I close a process's filehandle without waiting for it to complete?">How do I close a process's filehandle without waiting for it to complete?</a><br/>
<a href="#How do I fork a daemon process?">How do I fork a daemon process?</a><br/>
<a href="#How do I find out if I'm running interactively or not?">How do I find out if I'm running interactively or not?</a><br/>
<a href="#How do I timeout a slow event?">How do I timeout a slow event?</a><br/>
<a href="#How do I set CPU limits?">How do I set CPU limits?</a><br/>
<a href="#How do I avoid zombies on a Unix system?">How do I avoid zombies on a Unix system?</a><br/>
<a href="#How do I use an SQL database?">How do I use an SQL database?</a><br/>
<a href="#How do I make a system() exit on control−C?">How do I make a system() exit on control−C?</a><br/>
<a href="#How do I open a file without blocking?">How do I open a file without blocking?</a><br/>
<a href="#How do I tell the difference between errors from the shell and perl?">How do I tell the difference between errors from the shell and perl?</a><br/>
<a href="#How do I install a module from CPAN?">How do I install a module from CPAN?</a><br/>
<a href="#What's the difference between require and use?">What's the difference between require and use?</a><br/>
<a href="#How do I keep my own module/library directory?">How do I keep my own module/library directory?</a><br/>
<a href="#How do I add the directory my program lives in to the module/library searchpath?">How do I add the directory my program lives in to the module/library searchpath?</a><br/>
<a href="#How do I add a directory to my include path (@INC) at runtime?">How do I add a directory to my include path (@INC) at runtime?</a><br/>
<a href="#Where are modules installed?">Where are modules installed?</a><br/>
<a href="#What is socket.ph and where do I get it?">What is socket.ph and where do I get it?</a><br/>
<a href="#AUTHOR AND COPYRIGHT">AUTHOR AND COPYRIGHT</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">perlfaq8 −
System Interaction</p>
<h2>VERSION
<a name="VERSION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">version
5.20240218</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">This section of
the Perl FAQ covers questions involving operating system
interaction. Topics include interprocess communication
(IPC), control over the user−interface (keyboard,
screen and pointing devices), and most anything else not
related to data manipulation.</p>
<p style="margin-left:9%; margin-top: 1em">Read the FAQs
and documentation specific to the port of perl to your
operating system (eg, perlvms, perlplan9, ...). These should
contain more detailed information on the vagaries of your
perl.</p>
<h3>How do I find out which operating system I'm running under?
<a name="How do I find out which operating system I'm running under?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">The $ˆO
variable ($OSNAME if you use "English") contains
an indication of the name of the operating system (not its
release number) that your perl binary was built for.</p>
<h3>Why does exec() not return?
<a name="Why does exec() not return?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">(contributed by
brian d foy)</p>
<p style="margin-left:9%; margin-top: 1em">The
"exec" function's job is to turn your process into
another command and never to return. If that's not what you
want to do, don't use "exec". :)</p>
<p style="margin-left:9%; margin-top: 1em">If you want to
run an external command and still keep your Perl process
going, look at a piped "open", "fork",
or "system".</p>
<h3>How do I do fancy stuff with the keyboard/screen/mouse?
<a name="How do I do fancy stuff with the keyboard/screen/mouse?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">How you
access/control keyboards, screens, and pointing devices
("mice") is system−dependent. Try the
following modules: <br/>
Keyboard</p>
<p style="margin-left:14%;">Term::Cap Standard perl
distribution <br/>
Term::ReadKey CPAN <br/>
Term::ReadLine::Gnu CPAN <br/>
Term::ReadLine::Perl CPAN <br/>
Term::Screen CPAN</p>
<p style="margin-left:9%;">Screen</p>
<p style="margin-left:14%;">Term::Cap Standard perl
distribution <br/>
Curses CPAN <br/>
Term::ANSIColor CPAN</p>
<p style="margin-left:9%;">Mouse</p>
<p style="margin-left:14%;">Tk CPAN <br/>
Wx CPAN <br/>
Gtk2 CPAN <br/>
Qt4 kdebindings4 package</p>
<p style="margin-left:9%; margin-top: 1em">Some of these
specific cases are shown as examples in other answers in
this section of the perlfaq.</p>
<h3>How do I print something out in color?
<a name="How do I print something out in color?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">In general, you
don't, because you don't know whether the recipient has a
color−aware display device. If you know that they have
an ANSI terminal that understands color, you can use the
Term::ANSIColor module from CPAN:</p>
<p style="margin-left:9%; margin-top: 1em">use
Term::ANSIColor; <br/>
print color("red"), "Stop!\n",
color("reset"); <br/>
print color("green"), "Go!\n",
color("reset");</p>
<p style="margin-left:9%; margin-top: 1em">Or like
this:</p>
<p style="margin-left:9%; margin-top: 1em">use
Term::ANSIColor qw(:constants); <br/>
print RED, "Stop!\n", RESET; <br/>
print GREEN, "Go!\n", RESET;</p>
<h3>How do I read just one key without waiting for a return key?
<a name="How do I read just one key without waiting for a return key?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Controlling
input buffering is a remarkably system−dependent
matter. On many systems, you can just use the <b>stty</b>
command as shown in "getc" in perlfunc, but as you
see, that's already getting you into portability snags.</p>
<p style="margin-left:9%; margin-top: 1em">open(TTY,
"+&lt;/dev/tty") or die "no tty: $!";
<br/>
system "stty cbreak &lt;/dev/tty &gt;/dev/tty
2&gt;&amp;1"; <br/>
$key = getc(TTY); # perhaps this works <br/>
# OR ELSE <br/>
sysread(TTY, $key, 1); # probably this does <br/>
system "stty −cbreak &lt;/dev/tty &gt;/dev/tty
2&gt;&amp;1";</p>
<p style="margin-left:9%; margin-top: 1em">The
Term::ReadKey module from CPAN offers an
easy−to−use interface that should be more
efficient than shelling out to <b>stty</b> for each key. It
even includes limited support for Windows.</p>
<p style="margin-left:9%; margin-top: 1em">use
Term::ReadKey; <br/>
ReadMode('cbreak'); <br/>
$key = ReadKey(0); <br/>
ReadMode('normal');</p>
<p style="margin-left:9%; margin-top: 1em">However, using
the code requires that you have a working C compiler and can
use it to build and install a CPAN module. Here's a solution
using the standard POSIX module, which is already on your
system (assuming your system supports POSIX).</p>
<p style="margin-left:9%; margin-top: 1em">use HotKey; <br/>
$key = readkey();</p>
<p style="margin-left:9%; margin-top: 1em">And here's the
"HotKey" module, which hides the somewhat
mystifying calls to manipulate the POSIX termios
structures.</p>
<p style="margin-left:9%; margin-top: 1em"># HotKey.pm <br/>
package HotKey; <br/>
use strict; <br/>
use warnings; <br/>
use parent 'Exporter'; <br/>
our @EXPORT = qw(cbreak cooked readkey); <br/>
use POSIX qw(:termios_h); <br/>
my ($term, $oterm, $echo, $noecho, $fd_stdin); <br/>
$fd_stdin = fileno(STDIN); <br/>
$term = POSIX::Termios−&gt;new(); <br/>
$term−&gt;getattr($fd_stdin); <br/>
$oterm = $term−&gt;getlflag(); <br/>
$echo = ECHO | ECHOK | ICANON; <br/>
$noecho = $oterm &amp; ˜$echo; <br/>
sub cbreak { <br/>
$term−&gt;setlflag($noecho); # ok, so i don't want
echo either <br/>
$term−&gt;setcc(VTIME, 1); <br/>
$term−&gt;setattr($fd_stdin, TCSANOW); <br/>
} <br/>
sub cooked { <br/>
$term−&gt;setlflag($oterm); <br/>
$term−&gt;setcc(VTIME, 0); <br/>
$term−&gt;setattr($fd_stdin, TCSANOW); <br/>
} <br/>
sub readkey { <br/>
my $key = ''; <br/>
cbreak(); <br/>
sysread(STDIN, $key, 1); <br/>
cooked(); <br/>
return $key; <br/>
} <br/>
END { cooked() } <br/>
1;</p>
<h3>How do I check whether input is ready on the keyboard?
<a name="How do I check whether input is ready on the keyboard?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">The easiest way
to do this is to read a key in nonblocking mode with the
Term::ReadKey module from CPAN, passing it an argument of
−1 to indicate not to block:</p>
<p style="margin-left:9%; margin-top: 1em">use
Term::ReadKey; <br/>
ReadMode('cbreak'); <br/>
if (defined (my $char = ReadKey(−1)) ) { <br/>
# input was waiting and it was $char <br/>
} else { <br/>
# no input was waiting <br/>
} <br/>
ReadMode('normal'); # restore normal tty settings</p>
<h3>How do I clear the screen?
<a name="How do I clear the screen?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">(contributed by
brian d foy)</p>
<p style="margin-left:9%; margin-top: 1em">To clear the
screen, you just have to print the special sequence that
tells the terminal to clear the screen. Once you have that
sequence, output it when you want to clear the screen.</p>
<p style="margin-left:9%; margin-top: 1em">You can use the
Term::ANSIScreen module to get the special sequence. Import
the "cls" function (or the ":screen"
tag):</p>
<p style="margin-left:9%; margin-top: 1em">use
Term::ANSIScreen qw(cls); <br/>
my $clear_screen = cls(); <br/>
print $clear_screen;</p>
<p style="margin-left:9%; margin-top: 1em">The Term::Cap
module can also get the special sequence if you want to deal
with the low−level details of terminal control. The
"Tputs" method returns the string for the given
capability:</p>
<p style="margin-left:9%; margin-top: 1em">use Term::Cap;
<br/>
my $terminal = Term::Cap−&gt;Tgetent( { OSPEED =&gt;
9600 } ); <br/>
my $clear_screen = $terminal−&gt;Tputs('cl'); <br/>
print $clear_screen;</p>
<p style="margin-left:9%; margin-top: 1em">On Windows, you
can use the Win32::Console module. After creating an object
for the output filehandle you want to affect, call the
"Cls" method:</p>
<p style="margin-left:9%; margin-top: 1em">Win32::Console;
<br/>
my $OUT = Win32::Console−&gt;new(STD_OUTPUT_HANDLE);
<br/>
my $clear_string = $OUT−&gt;Cls; <br/>
print $clear_screen;</p>
<p style="margin-left:9%; margin-top: 1em">If you have a
command−line program that does the job, you can call
it in backticks to capture whatever it outputs so you can
use it later:</p>
<p style="margin-left:9%; margin-top: 1em">my $clear_string
= `clear`; <br/>
print $clear_string;</p>
<h3>How do I get the screen size?
<a name="How do I get the screen size?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">If you have
Term::ReadKey module installed from CPAN, you can use it to
fetch the width and height in characters and in pixels:</p>
<p style="margin-left:9%; margin-top: 1em">use
Term::ReadKey; <br/>
my ($wchar, $hchar, $wpixels, $hpixels) =
GetTerminalSize();</p>
<p style="margin-left:9%; margin-top: 1em">This is more
portable than the raw "ioctl", but not as
illustrative:</p>
<p style="margin-left:9%; margin-top: 1em">require
'./sys/ioctl.ph'; <br/>
die "no TIOCGWINSZ " unless defined
&amp;TIOCGWINSZ; <br/>
open(my $tty_fh, "+&lt;/dev/tty") or die "No
tty: $!"; <br/>
unless (ioctl($tty_fh, &amp;TIOCGWINSZ, $winsize='')) { <br/>
die sprintf "$0: ioctl TIOCGWINSZ (%08x: $!)\n",
&amp;TIOCGWINSZ; <br/>
} <br/>
my ($row, $col, $xpixel, $ypixel) = unpack('S4', $winsize);
<br/>
print "(row,col) = ($row,$col)"; <br/>
print " (xpixel,ypixel) = ($xpixel,$ypixel)" if
$xpixel || $ypixel; <br/>
print "\n";</p>
<h3>How do I ask the user for a password?
<a name="How do I ask the user for a password?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">(This question
has nothing to do with the web. See a different FAQ for
that.)</p>
<p style="margin-left:9%; margin-top: 1em">There's an
example of this in "crypt" in perlfunc. First, you
put the terminal into "no echo" mode, then just
read the password normally. You may do this with an
old−style ioctl() function, POSIX terminal control
(see POSIX or its documentation the Camel Book), or a call
to the <b>stty</b> program, with varying degrees of
portability.</p>
<p style="margin-left:9%; margin-top: 1em">You can also do
this for most systems using the Term::ReadKey module from
CPAN, which is easier to use and in theory more
portable.</p>
<p style="margin-left:9%; margin-top: 1em">use
Term::ReadKey; <br/>
ReadMode('noecho'); <br/>
my $password = ReadLine(0);</p>
<h3>How do I read and write the serial port?
<a name="How do I read and write the serial port?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">This depends on
which operating system your program is running on. In the
case of Unix, the serial ports will be accessible through
files in "/dev"; on other systems, device names
will doubtless differ. Several problem areas common to all
device interaction are the following: <br/>
lockfiles</p>
<p style="margin-left:14%;">Your system may use lockfiles
to control multiple access. Make sure you follow the correct
protocol. Unpredictable behavior can result from multiple
processes reading from one device.</p>
<p style="margin-left:9%;">open mode</p>
<p style="margin-left:14%;">If you expect to use both read
and write operations on the device, you'll have to open it
for update (see "open" in perlfunc for details).
You may wish to open it without running the risk of blocking
by using sysopen() and "O_RDWR|O_NDELAY|O_NOCTTY"
from the Fcntl module (part of the standard perl
distribution). See "sysopen" in perlfunc for more
on this approach.</p>
<p style="margin-left:9%;">end of line</p>
<p style="margin-left:14%;">Some devices will be expecting
a "\r" at the end of each line rather than a
"\n". In some ports of perl, "\r" and
"\n" are different from their usual (Unix) ASCII
values of "\015" and "\012". You may
have to give the numeric values you want directly, using
octal ("\015"), hex ("0x0D"), or as a
control−character specification ("\cM").</p>
<p style="margin-left:14%; margin-top: 1em">print DEV
"atv1\012"; # wrong, for some devices <br/>
print DEV "atv1\015"; # right, for some
devices</p>
<p style="margin-left:14%; margin-top: 1em">Even though
with normal text files a "\n" will do the trick,
there is still no unified scheme for terminating a line that
is portable between Unix, DOS/Win, and Macintosh, except to
terminate <i>ALL</i> line ends with "\015\012",
and strip what you don't need from the output. This applies
especially to socket I/O and autoflushing, discussed
next.</p>
<p style="margin-left:9%;">flushing output</p>
<p style="margin-left:14%;">If you expect characters to get
to your device when you print() them, you'll want to
autoflush that filehandle. You can use select() and the $|
variable to control autoflushing (see "$|" in
perlvar and "select" in perlfunc, or perlfaq5,
"How do I flush/unbuffer an output filehandle? Why must
I do this?"):</p>
<p style="margin-left:14%; margin-top: 1em">my $old_handle
= select($dev_fh); <br/>
$| = 1; <br/>
select($old_handle);</p>
<p style="margin-left:14%; margin-top: 1em">You'll also see
code that does this without a temporary variable, as in</p>
<p style="margin-left:14%; margin-top: 1em">select((select($deb_handle),
$| = 1)[0]);</p>
<p style="margin-left:14%; margin-top: 1em">Or if you don't
mind pulling in a few thousand lines of code just because
you're afraid of a little $| variable:</p>
<p style="margin-left:14%; margin-top: 1em">use IO::Handle;
<br/>
$dev_fh−&gt;autoflush(1);</p>
<p style="margin-left:14%; margin-top: 1em">As mentioned in
the previous item, this still doesn't work when using socket
I/O between Unix and Macintosh. You'll need to hard code
your line terminators, in that case.</p>
<p style="margin-left:9%;">non−blocking input</p>
<p style="margin-left:14%;">If you are doing a blocking
read() or sysread(), you'll have to arrange for an alarm
handler to provide a timeout (see "alarm" in
perlfunc). If you have a non−blocking open, you'll
likely have a non−blocking read, which means you may
have to use a 4−arg select() to determine whether I/O
is ready on that device (see "select" in
perlfunc.</p>
<p style="margin-left:9%; margin-top: 1em">While trying to
read from his caller−id box, the notorious Jamie
Zawinski "&lt;jwz@netscape.com&gt;", after much
gnashing of teeth and fighting with "sysread",
"sysopen", POSIX's "tcgetattr" business,
and various other functions that go bump in the night,
finally came up with this:</p>
<p style="margin-left:9%; margin-top: 1em">sub open_modem {
<br/>
use IPC::Open2; <br/>
my $stty = `/bin/stty −g`; <br/>
open2( \*MODEM_IN, \*MODEM_OUT, "cu
−l$modem_device −s2400 2&gt;&amp;1"); <br/>
# starting cu hoses /dev/tty's stty settings, even when it
has <br/>
# been opened on a pipe... <br/>
system("/bin/stty $stty"); <br/>
$_ = &lt;MODEM_IN&gt;; <br/>
chomp; <br/>
if ( !m/ˆConnected/ ) { <br/>
print STDERR "$0: cu printed `$_' instead of
`Connected'\n"; <br/>
} <br/>
}</p>
<h3>How do I decode encrypted password files?
<a name="How do I decode encrypted password files?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">You spend lots
and lots of money on dedicated hardware, but this is bound
to get you talked about.</p>
<p style="margin-left:9%; margin-top: 1em">Seriously, you
can't if they are Unix password files−−the Unix
password system employs one−way encryption. It's more
like hashing than encryption. The best you can do is check
whether something else hashes to the same string. You can't
turn a hash back into the original string. Programs like
Crack can forcibly (and intelligently) try to guess
passwords, but don't (can't) guarantee quick success.</p>
<p style="margin-left:9%; margin-top: 1em">If you're
worried about users selecting bad passwords, you should
proactively check when they try to change their password (by
modifying <b>passwd</b>(1), for example).</p>
<h3>How do I start a process in the background?
<a name="How do I start a process in the background?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">(contributed by
brian d foy)</p>
<p style="margin-left:9%; margin-top: 1em">There's not a
single way to run code in the background so you don't have
to wait for it to finish before your program moves on to
other tasks. Process management depends on your particular
operating system, and many of the techniques are covered in
perlipc.</p>
<p style="margin-left:9%; margin-top: 1em">Several CPAN
modules may be able to help, including IPC::Open2 or
IPC::Open3, IPC::Run, Parallel::Jobs, Parallel::ForkManager,
POE, Proc::Background, and Win32::Process. There are many
other modules you might use, so check those namespaces for
other options too.</p>
<p style="margin-left:9%; margin-top: 1em">If you are on a
Unix−like system, you might be able to get away with a
system call where you put an "&amp;" on the end of
the command:</p>
<p style="margin-left:9%; margin-top: 1em">system("cmd
&amp;")</p>
<p style="margin-left:9%; margin-top: 1em">You can also try
using "fork", as described in perlfunc (although
this is the same thing that many of the modules will do for
you). <br/>
STDIN, STDOUT, and STDERR are shared</p>
<p style="margin-left:14%;">Both the main process and the
backgrounded one (the "child" process) share the
same STDIN, STDOUT and STDERR filehandles. If both try to
access them at once, strange things can happen. You may want
to close or reopen these for the child. You can get around
this with "open"ing a pipe (see "open"
in perlfunc) but on some systems this means that the child
process cannot outlive the parent.</p>
<p style="margin-left:9%;">Signals</p>
<p style="margin-left:14%;">You'll have to catch the
SIGCHLD signal, and possibly SIGPIPE too. SIGCHLD is sent
when the backgrounded process finishes. SIGPIPE is sent when
you write to a filehandle whose child process has closed (an
untrapped SIGPIPE can cause your program to silently die).
This is not an issue with system("cmd&amp;").</p>
<p style="margin-left:9%;">Zombies</p>
<p style="margin-left:14%;">You have to be prepared to
"reap" the child process when it finishes.</p>
<p style="margin-left:14%; margin-top: 1em">$SIG{CHLD} =
sub { wait }; <br/>
$SIG{CHLD} = 'IGNORE';</p>
<p style="margin-left:14%; margin-top: 1em">You can also
use a double fork. You immediately wait() for your first
child, and the init daemon will wait() for your grandchild
once it exits.</p>
<p style="margin-left:14%; margin-top: 1em">unless ($pid =
fork) { <br/>
unless (fork) { <br/>
exec "what you really wanna do"; <br/>
die "exec failed!"; <br/>
} <br/>
exit 0; <br/>
} <br/>
waitpid($pid, 0);</p>
<p style="margin-left:14%; margin-top: 1em">See
"Signals" in perlipc for other examples of code to
do this. Zombies are not an issue with
"system("prog &amp;")".</p>
<h3>How do I trap control characters/signals?
<a name="How do I trap control characters/signals?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">You don't
actually "trap" a control character. Instead, that
character generates a signal which is sent to your
terminal's currently foregrounded process group, which you
then trap in your process. Signals are documented in
"Signals" in perlipc and the section on
"Signals" in the Camel.</p>
<p style="margin-left:9%; margin-top: 1em">You can set the
values of the %SIG hash to be the functions you want to
handle the signal. After perl catches the signal, it looks
in %SIG for a key with the same name as the signal, then
calls the subroutine value for that key.</p>
<p style="margin-left:9%; margin-top: 1em"># as an
anonymous subroutine <br/>
$SIG{INT} = sub { syswrite(STDERR, "ouch\n", 5 )
}; <br/>
# or a reference to a function <br/>
$SIG{INT} = \&amp;ouch; <br/>
# or the name of the function as a string <br/>
$SIG{INT} = "ouch";</p>
<p style="margin-left:9%; margin-top: 1em">Perl versions
before 5.8 had in its C source code signal handlers which
would catch the signal and possibly run a Perl function that
you had set in %SIG. This violated the rules of signal
handling at that level causing perl to dump core. Since
version 5.8.0, perl looks at %SIG <b>after</b> the signal
has been caught, rather than while it is being caught.
Previous versions of this answer were incorrect.</p>
<h3>How do I modify the shadow password file on a Unix system?
<a name="How do I modify the shadow password file on a Unix system?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">If perl was
installed correctly and your shadow library was written
properly, the "getpw*()" functions described in
perlfunc should in theory provide (read−only) access
to entries in the shadow password file. To change the file,
make a new shadow password file (the format varies from
system to system−−see <b>passwd</b>(1) for
specifics) and use pwd_mkdb(8) to install it (see
<b>pwd_mkdb</b>(8) for more details).</p>
<h3>How do I set the time and date?
<a name="How do I set the time and date?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Assuming you're
running under sufficient permissions, you should be able to
set the system−wide date and time by running the
date(1) program. (There is no way to set the time and date
on a per−process basis.) This mechanism will work for
Unix, MS−DOS, Windows, and NT; the VMS equivalent is
"set time".</p>
<p style="margin-left:9%; margin-top: 1em">However, if all
you want to do is change your time zone, you can probably
get away with setting an environment variable:</p>
<p style="margin-left:9%; margin-top: 1em">$ENV{TZ} =
"MST7MDT"; # Unixish <br/>
$ENV{'SYS$TIMEZONE_DIFFERENTIAL'}="−5" # vms
<br/>
system('trn', 'comp.lang.perl.misc');</p>
<h3>How can I sleep() or alarm() for under a second?
<a name="How can I sleep() or alarm() for under a second?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">If you want
finer granularity than the 1 second that the sleep()
function provides, the easiest way is to use the select()
function as documented in "select" in perlfunc.
Try the Time::HiRes and the BSD::Itimer modules (available
from CPAN, and starting from Perl 5.8 Time::HiRes is part of
the standard distribution).</p>
<h3>How can I measure time under a second?
<a name="How can I measure time under a second?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">(contributed by
brian d foy)</p>
<p style="margin-left:9%; margin-top: 1em">The Time::HiRes
module (part of the standard distribution as of Perl 5.8)
measures time with the gettimeofday() system call, which
returns the time in microseconds since the epoch. If you
can't install Time::HiRes for older Perls and you are on a
Unixish system, you may be able to call gettimeofday(2)
directly. See "syscall" in perlfunc.</p>
<h3>How can I do an atexit() or setjmp()/longjmp()? (Exception handling)
<a name="How can I do an atexit() or setjmp()/longjmp()? (Exception handling)"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">You can use the
"END" block to simulate atexit(). Each package's
"END" block is called when the program or thread
ends. See the perlmod manpage for more details about
"END" blocks.</p>
<p style="margin-left:9%; margin-top: 1em">For example, you
can use this to make sure your filter program managed to
finish its output without filling up the disk:</p>
<p style="margin-left:9%; margin-top: 1em">END { <br/>
close(STDOUT) || die "stdout close failed: $!";
<br/>
}</p>
<p style="margin-left:9%; margin-top: 1em">The
"END" block isn't called when untrapped signals
kill the program, though, so if you use "END"
blocks you should also use</p>
<p style="margin-left:9%; margin-top: 1em">use sigtrap
qw(die normal−signals);</p>
<p style="margin-left:9%; margin-top: 1em">Perl's
exception−handling mechanism is its eval() operator.
You can use eval() as "setjmp" and die() as
"longjmp". For details of this, see the section on
signals, especially the time−out handler for a
blocking flock() in "Signals" in perlipc or the
section on "Signals" in <i>Programming
Perl</i>.</p>
<p style="margin-left:9%; margin-top: 1em">If exception
handling is all you're interested in, use one of the many
CPAN modules that handle exceptions, such as Try::Tiny.</p>
<p style="margin-left:9%; margin-top: 1em">If you want the
atexit() syntax (and an rmexit() as well), try the
"AtExit" module available from CPAN.</p>
<h3>Why doesn't my sockets program work under System V (Solaris)? What does theerror message "Protocol not supported" mean?
<a name="Why doesn't my sockets program work under System V (Solaris)? What does theerror message &quot;Protocol not supported&quot; mean?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Some Sys−V
based systems, notably Solaris 2.X, redefined some of the
standard socket constants. Since these were constant across
all architectures, they were often hardwired into perl code.
The proper way to deal with this is to "use
Socket" to get the correct values.</p>
<p style="margin-left:9%; margin-top: 1em">Note that even
though SunOS and Solaris are binary compatible, these values
are different. Go figure.</p>
<h3>How can I call my system's unique C functions from Perl?
<a name="How can I call my system's unique C functions from Perl?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">In most cases,
you write an external module to do it−−see the
answer to "Where can I learn about linking C with Perl?
[h2xs, xsubpp]". However, if the function is a system
call, and your system supports syscall(), you can use the
"syscall" function (documented in perlfunc).</p>
<p style="margin-left:9%; margin-top: 1em">Remember to
check the modules that came with your distribution, and CPAN
as well−−someone may already have written a
module to do it. On Windows, try Win32::API. On Macs, try
Mac::Carbon. If no module has an interface to the C
function, you can inline a bit of C in your Perl source with
Inline::C.</p>
<h3>Where do I get the include files to do ioctl() or syscall()?
<a name="Where do I get the include files to do ioctl() or syscall()?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Historically,
these would be generated by the h2ph tool, part of the
standard perl distribution. This program converts cpp(1)
directives in C header files to files containing subroutine
definitions, like SYS_getitimer(), which you can use as
arguments to your functions. It doesn't work perfectly, but
it usually gets most of the job done. Simple files like
<i>errno.h</i>, <i>syscall.h</i>, and <i>socket.h</i> were
fine, but the hard ones like <i>ioctl.h</i> nearly always
need to be hand−edited. Here's how to install the *.ph
files:</p>
<p style="margin-left:9%; margin-top: 1em">1. Become the
super−user <br/>
2. cd /usr/include <br/>
3. h2ph *.h */*.h</p>
<p style="margin-left:9%; margin-top: 1em">If your system
supports dynamic loading, for reasons of portability and
sanity you probably ought to use h2xs (also part of the
standard perl distribution). This tool converts C header
files to Perl extensions. See perlxstut for how to get
started with h2xs.</p>
<p style="margin-left:9%; margin-top: 1em">If your system
doesn't support dynamic loading, you still probably ought to
use h2xs. See perlxstut and ExtUtils::MakeMaker for more
information (in brief, just use <b>make perl</b> instead of
a plain <b>make</b> to rebuild perl with a new static
extension).</p>
<h3>Why do setuid perl scripts complain about kernel problems?
<a name="Why do setuid perl scripts complain about kernel problems?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Some operating
systems have bugs in the kernel that make setuid scripts
inherently insecure. Perl gives you a number of options
(described in perlsec) to work around such systems.</p>
<h3>How can I open a pipe both to and from a command?
<a name="How can I open a pipe both to and from a command?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">The IPC::Open2
module (part of the standard perl distribution) is an
easy−to−use approach that internally uses
pipe(), fork(), and exec() to do the job. Make sure you read
the deadlock warnings in its documentation, though (see
IPC::Open2). See "Bidirectional Communication with
Another Process" in perlipc and "Bidirectional
Communication with Yourself" in perlipc</p>
<p style="margin-left:9%; margin-top: 1em">You may also use
the IPC::Open3 module (part of the standard perl
distribution), but be warned that it has a different order
of arguments from IPC::Open2 (see IPC::Open3).</p>
<h3>Why can't I get the output of a command with system()?
<a name="Why can't I get the output of a command with system()?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">You're confusing
the purpose of system() and backticks (``). system() runs a
command and returns exit status information (as a 16 bit
value: the low 7 bits are the signal the process died from,
if any, and the high 8 bits are the actual exit value).
Backticks (``) run a command and return what it sent to
STDOUT.</p>
<p style="margin-left:9%; margin-top: 1em">my $exit_status
= system("mail−users"); <br/>
my $output_string = `ls`;</p>
<h3>How can I capture STDERR from an external command?
<a name="How can I capture STDERR from an external command?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">There are three
basic ways of running external commands:</p>
<p style="margin-left:9%; margin-top: 1em">system $cmd; #
using system() <br/>
my $output = `$cmd`; # using backticks (``) <br/>
open (my $pipe_fh, "$cmd |"); # using open()</p>
<p style="margin-left:9%; margin-top: 1em">With system(),
both STDOUT and STDERR will go the same place as the
script's STDOUT and STDERR, unless the system() command
redirects them. Backticks and open() read <b>only</b> the
STDOUT of your command.</p>
<p style="margin-left:9%; margin-top: 1em">You can also use
the open3() function from IPC::Open3. Benjamin Goldberg
provides some sample code:</p>
<p style="margin-left:9%; margin-top: 1em">To capture a
program's STDOUT, but discard its STDERR:</p>
<p style="margin-left:9%; margin-top: 1em">use IPC::Open3;
<br/>
use File::Spec; <br/>
my $in = ''; <br/>
open(NULL, "&gt;", File::Spec−&gt;devnull);
<br/>
my $pid = open3($in, \*PH, "&gt;&amp;NULL",
"cmd"); <br/>
while( &lt;PH&gt; ) { } <br/>
waitpid($pid, 0);</p>
<p style="margin-left:9%; margin-top: 1em">To capture a
program's STDERR, but discard its STDOUT:</p>
<p style="margin-left:9%; margin-top: 1em">use IPC::Open3;
<br/>
use File::Spec; <br/>
my $in = ''; <br/>
open(NULL, "&gt;", File::Spec−&gt;devnull);
<br/>
my $pid = open3($in, "&gt;&amp;NULL", \*PH,
"cmd"); <br/>
while( &lt;PH&gt; ) { } <br/>
waitpid($pid, 0);</p>
<p style="margin-left:9%; margin-top: 1em">To capture a
program's STDERR, and let its STDOUT go to our own
STDERR:</p>
<p style="margin-left:9%; margin-top: 1em">use IPC::Open3;
<br/>
my $in = ''; <br/>
my $pid = open3($in, "&gt;&amp;STDERR", \*PH,
"cmd"); <br/>
while( &lt;PH&gt; ) { } <br/>
waitpid($pid, 0);</p>
<p style="margin-left:9%; margin-top: 1em">To read both a
command's STDOUT and its STDERR separately, you can redirect
them to temp files, let the command run, then read the temp
files:</p>
<p style="margin-left:9%; margin-top: 1em">use IPC::Open3;
<br/>
use IO::File; <br/>
my $in = ''; <br/>
local *CATCHOUT = IO::File−&gt;new_tmpfile; <br/>
local *CATCHERR = IO::File−&gt;new_tmpfile; <br/>
my $pid = open3($in, "&gt;&amp;CATCHOUT",
"&gt;&amp;CATCHERR", "cmd"); <br/>
waitpid($pid, 0); <br/>
seek $_, 0, 0 for \*CATCHOUT, \*CATCHERR; <br/>
while( &lt;CATCHOUT&gt; ) {} <br/>
while( &lt;CATCHERR&gt; ) {}</p>
<p style="margin-left:9%; margin-top: 1em">But there's no
real need for <b>both</b> to be tempfiles... the following
should work just as well, without deadlocking:</p>
<p style="margin-left:9%; margin-top: 1em">use IPC::Open3;
<br/>
my $in = ''; <br/>
use IO::File; <br/>
local *CATCHERR = IO::File−&gt;new_tmpfile; <br/>
my $pid = open3($in, \*CATCHOUT,
"&gt;&amp;CATCHERR", "cmd"); <br/>
while( &lt;CATCHOUT&gt; ) {} <br/>
waitpid($pid, 0); <br/>
seek CATCHERR, 0, 0; <br/>
while( &lt;CATCHERR&gt; ) {}</p>
<p style="margin-left:9%; margin-top: 1em">And it'll be
faster, too, since we can begin processing the program's
stdout immediately, rather than waiting for the program to
finish.</p>
<p style="margin-left:9%; margin-top: 1em">With any of
these, you can change file descriptors before the call:</p>
<p style="margin-left:9%; margin-top: 1em">open(STDOUT,
"&gt;logfile"); <br/>
system("ls");</p>
<p style="margin-left:9%; margin-top: 1em">or you can use
Bourne shell file−descriptor redirection:</p>
<p style="margin-left:9%; margin-top: 1em">$output = `$cmd
2&gt;some_file`; <br/>
open (PIPE, "cmd 2&gt;some_file |");</p>
<p style="margin-left:9%; margin-top: 1em">You can also use
file−descriptor redirection to make STDERR a duplicate
of STDOUT:</p>
<p style="margin-left:9%; margin-top: 1em">$output = `$cmd
2&gt;&amp;1`; <br/>
open (PIPE, "cmd 2&gt;&amp;1 |");</p>
<p style="margin-left:9%; margin-top: 1em">Note that you
<i>cannot</i> simply open STDERR to be a dup of STDOUT in
your Perl program and avoid calling the shell to do the
redirection. This doesn't work:</p>
<p style="margin-left:9%; margin-top: 1em">open(STDERR,
"&gt;&amp;STDOUT"); <br/>
$alloutput = `cmd args`; # stderr still escapes</p>
<p style="margin-left:9%; margin-top: 1em">This fails
because the open() makes STDERR go to where STDOUT was going
at the time of the open(). The backticks then make STDOUT go
to a string, but don't change STDERR (which still goes to
the old STDOUT).</p>
<p style="margin-left:9%; margin-top: 1em">Note that you
<i>must</i> use Bourne shell (sh(1)) redirection syntax in
backticks, not csh(1)! Details on why Perl's system() and
backtick and pipe opens all use the Bourne shell are in the
<i>versus/csh.whynot</i> article in the "Far More Than
You Ever Wanted To Know" collection in
&lt;http://www.cpan.org/misc/olddoc/FMTEYEWTK.tgz&gt; . To
capture a command's STDERR and STDOUT together:</p>
<p style="margin-left:9%; margin-top: 1em">$output = `cmd
2&gt;&amp;1`; # either with backticks <br/>
$pid = open(PH, "cmd 2&gt;&amp;1 |"); # or with an
open pipe <br/>
while (&lt;PH&gt;) { } # plus a read</p>
<p style="margin-left:9%; margin-top: 1em">To capture a
command's STDOUT but discard its STDERR:</p>
<p style="margin-left:9%; margin-top: 1em">$output = `cmd
2&gt;/dev/null`; # either with backticks <br/>
$pid = open(PH, "cmd 2&gt;/dev/null |"); # or with
an open pipe <br/>
while (&lt;PH&gt;) { } # plus a read</p>
<p style="margin-left:9%; margin-top: 1em">To capture a
command's STDERR but discard its STDOUT:</p>
<p style="margin-left:9%; margin-top: 1em">$output = `cmd
2&gt;&amp;1 1&gt;/dev/null`; # either with backticks <br/>
$pid = open(PH, "cmd 2&gt;&amp;1 1&gt;/dev/null
|"); # or with an open pipe <br/>
while (&lt;PH&gt;) { } # plus a read</p>
<p style="margin-left:9%; margin-top: 1em">To exchange a
command's STDOUT and STDERR in order to capture the STDERR
but leave its STDOUT to come out our old STDERR:</p>
<p style="margin-left:9%; margin-top: 1em">$output = `cmd
3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3 3&gt;&amp;−`; #
either with backticks <br/>
$pid = open(PH, "cmd 3&gt;&amp;1 1&gt;&amp;2
2&gt;&amp;3 3&gt;&amp;−|");# or with an open pipe
<br/>
while (&lt;PH&gt;) { } # plus a read</p>
<p style="margin-left:9%; margin-top: 1em">To read both a
command's STDOUT and its STDERR separately, it's easiest to
redirect them separately to files, and then read from those
files when the program is done:</p>
<p style="margin-left:9%; margin-top: 1em">system("program
args 1&gt;program.stdout 2&gt;program.stderr");</p>
<p style="margin-left:9%; margin-top: 1em">Ordering is
important in all these examples. That's because the shell
processes file descriptor redirections in strictly left to
right order.</p>
<p style="margin-left:9%; margin-top: 1em">system("prog
args 1&gt;tmpfile 2&gt;&amp;1"); <br/>
system("prog args 2&gt;&amp;1 1&gt;tmpfile");</p>
<p style="margin-left:9%; margin-top: 1em">The first
command sends both standard out and standard error to the
temporary file. The second command sends only the old
standard output there, and the old standard error shows up
on the old standard out.</p>
<h3>Why doesn't open() return an error when a pipe open fails?
<a name="Why doesn't open() return an error when a pipe open fails?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">If the second
argument to a piped open() contains shell metacharacters,
perl fork()s, then exec()s a shell to decode the
metacharacters and eventually run the desired program. If
the program couldn't be run, it's the shell that gets the
message, not Perl. All your Perl program can find out is
whether the shell itself could be successfully started. You
can still capture the shell's STDERR and check it for error
messages. See "How can I capture STDERR from an
external command?" elsewhere in this document, or use
the IPC::Open3 module.</p>
<p style="margin-left:9%; margin-top: 1em">If there are no
shell metacharacters in the argument of open(), Perl runs
the command directly, without using the shell, and can
correctly report whether the command started.</p>
<h3>What's wrong with using backticks in a void context?
<a name="What's wrong with using backticks in a void context?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Strictly
speaking, nothing. Stylistically speaking, it's not a good
way to write maintainable code. Perl has several operators
for running external commands. Backticks are one; they
collect the output from the command for use in your program.
The "system" function is another; it doesn't do
this.</p>
<p style="margin-left:9%; margin-top: 1em">Writing
backticks in your program sends a clear message to the
readers of your code that you wanted to collect the output
of the command. Why send a clear message that isn't
true?</p>
<p style="margin-left:9%; margin-top: 1em">Consider this
line:</p>
<p style="margin-left:9%; margin-top: 1em">`cat
/etc/termcap`;</p>
<p style="margin-left:9%; margin-top: 1em">You forgot to
check $? to see whether the program even ran correctly. Even
if you wrote</p>
<p style="margin-left:9%; margin-top: 1em">print `cat
/etc/termcap`;</p>
<p style="margin-left:9%; margin-top: 1em">this code could
and probably should be written as</p>
<p style="margin-left:9%; margin-top: 1em">system("cat
/etc/termcap") == 0 <br/>
or die "cat program failed!";</p>
<p style="margin-left:9%; margin-top: 1em">which will echo
the cat command's output as it is generated, instead of
waiting until the program has completed to print it out. It
also checks the return value.</p>
<p style="margin-left:9%; margin-top: 1em">"system"
also provides direct control over whether shell wildcard
processing may take place, whereas backticks do not.</p>
<h3>How can I call backticks without shell processing?
<a name="How can I call backticks without shell processing?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">This is a bit
tricky. You can't simply write the command like this:</p>
<p style="margin-left:9%; margin-top: 1em">@ok = `grep
@opts '$search_string' @filenames`;</p>
<p style="margin-left:9%; margin-top: 1em">As of Perl
5.8.0, you can use open() with multiple arguments. Just like
the list forms of system() and exec(), no shell escapes
happen.</p>
<p style="margin-left:9%; margin-top: 1em">open( GREP,
"−|", 'grep', @opts, $search_string,
@filenames ); <br/>
chomp(@ok = &lt;GREP&gt;); <br/>
close GREP;</p>
<p style="margin-left:9%; margin-top: 1em">You can
also:</p>
<p style="margin-left:9%; margin-top: 1em">my @ok = ();
<br/>
if (open(GREP, "−|")) { <br/>
while (&lt;GREP&gt;) { <br/>
chomp; <br/>
push(@ok, $_); <br/>
} <br/>
close GREP; <br/>
} else { <br/>
exec 'grep', @opts, $search_string, @filenames; <br/>
}</p>
<p style="margin-left:9%; margin-top: 1em">Just as with
system(), no shell escapes happen when you exec() a list.
Further examples of this can be found in "Safe Pipe
Opens" in perlipc.</p>
<p style="margin-left:9%; margin-top: 1em">Note that if
you're using Windows, no solution to this vexing issue is
even possible. Even though Perl emulates fork(), you'll
still be stuck, because Windows does not have an
argc/argv−style API.</p>
<h3>Why can't my script read from STDIN after I gave it EOF (ˆD on Unix, ˆZ onMS−DOS)?
<a name="Why can't my script read from STDIN after I gave it EOF (ˆD on Unix, ˆZ onMS−DOS)?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">This happens
only if your perl is compiled to use stdio instead of
perlio, which is the default. Some (maybe all?) stdios set
error and eof flags that you may need to clear. The POSIX
module defines clearerr() that you can use. That is the
technically correct way to do it. Here are some less
reliable workarounds:</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>1.</p></td>
<td width="2%"></td>
<td width="76%">
<p>Try keeping around the seekpointer and go there, like
this:</p> </td>
<td width="10%">
</td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">my $where =
tell($log_fh); <br/>
seek($log_fh, $where, 0);</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p style="margin-top: 1em">2.</p></td>
<td width="2%"></td>
<td width="85%">
<p style="margin-top: 1em">If that doesn't work, try
seeking to a different part of the file and then back.</p></td>
<td width="1%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>3.</p></td>
<td width="2%"></td>
<td width="85%">
<p>If that doesn't work, try seeking to a different part of
the file, reading something, and then seeking back.</p></td>
<td width="1%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="3%">
<p>4.</p></td>
<td width="2%"></td>
<td width="85%">
<p>If that doesn't work, give up on your stdio package and
use sysread.</p></td>
<td width="1%">
</td></tr>
</table>
<h3>How can I convert my shell script to perl?
<a name="How can I convert my shell script to perl?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Learn Perl and
rewrite it. Seriously, there's no simple converter. Things
that are awkward to do in the shell are easy to do in Perl,
and this very awkwardness is what would make a
shell−&gt;perl converter nigh−on impossible to
write. By rewriting it, you'll think about what you're
really trying to do, and hopefully will escape the shell's
pipeline datastream paradigm, which while convenient for
some matters, causes many inefficiencies.</p>
<h3>Can I use perl to run a telnet or ftp session?
<a name="Can I use perl to run a telnet or ftp session?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Try the
Net::FTP, TCP::Client, and Net::Telnet modules (available
from CPAN).
&lt;http://www.cpan.org/scripts/netstuff/telnet.emul.shar&gt;
will also help for emulating the telnet protocol, but
Net::Telnet is quite probably easier to use.</p>
<p style="margin-left:9%; margin-top: 1em">If all you want
to do is pretend to be telnet but don't need the initial
telnet handshaking, then the standard dual−process
approach will suffice:</p>
<p style="margin-left:9%; margin-top: 1em">use IO::Socket;
# new in 5.004 <br/>
my $handle =
IO::Socket::INET−&gt;new('www.perl.com:80') <br/>
or die "can't connect to port 80 on www.perl.com
$!"; <br/>
$handle−&gt;autoflush(1); <br/>
if (fork()) { # XXX: undef means failure <br/>
select($handle); <br/>
print while &lt;STDIN&gt;; # everything from stdin to socket
<br/>
} else { <br/>
print while &lt;$handle&gt;; # everything from socket to
stdout <br/>
} <br/>
close $handle; <br/>
exit;</p>
<h3>How can I write expect in Perl?
<a name="How can I write expect in Perl?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Once upon a
time, there was a library called <i>chat2.pl</i> (part of
the standard perl distribution), which never really got
finished. If you find it somewhere, <i>don't use it</i>.
These days, your best bet is to look at the Expect module
available from CPAN, which also requires two other modules
from CPAN, IO::Pty and IO::Stty.</p>
<h3>Is there a way to hide perl's command line from programs such as "ps"?
<a name="Is there a way to hide perl's command line from programs such as &quot;ps&quot;?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">First of all
note that if you're doing this for security reasons (to
avoid people seeing passwords, for example) then you should
rewrite your program so that critical information is never
given as an argument. Hiding the arguments won't make your
program completely secure.</p>
<p style="margin-left:9%; margin-top: 1em">To actually
alter the visible command line, you can assign to the
variable $0 as documented in perlvar. This won't work on all
operating systems, though. Daemon programs like sendmail
place their state there, as in:</p>
<p style="margin-left:9%; margin-top: 1em">$0 = "orcus
[accepting connections]";</p>
<h3>I {changed directory, modified my environment} in a perl script. How comethe change disappeared when I exited the script? How do I get mychanges to be visible?
<a name="I {changed directory, modified my environment} in a perl script. How comethe change disappeared when I exited the script? How do I get mychanges to be visible?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Unix</p>
<p style="margin-left:14%;">In the strictest sense, it
can't be done−−the script executes as a
different process from the shell it was started from.
Changes to a process are not reflected in its
parent−−only in any children created after the
change. There is shell magic that may allow you to fake it
by eval()ing the script's output in your shell; check out
the comp.unix.questions FAQ for details.</p>
<h3>How do I close a process's filehandle without waiting for it to complete?
<a name="How do I close a process's filehandle without waiting for it to complete?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Assuming your
system supports such things, just send an appropriate signal
to the process (see "kill" in perlfunc). It's
common to first send a TERM signal, wait a little bit, and
then send a KILL signal to finish it off.</p>
<h3>How do I fork a daemon process?
<a name="How do I fork a daemon process?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">If by daemon
process you mean one that's detached (disassociated from its
tty), then the following process is reported to work on most
Unixish systems. Non−Unix users should check their
Your_OS::Process module for other solutions.</p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="82%">
<p>Open /dev/tty and use the TIOCNOTTY ioctl on it. See
<b>tty</b>(1) for details. Or better yet, you can just use
the POSIX::setsid() function, so you don't have to worry
about process groups.</p></td>
<td width="4%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="82%">
<p>Change directory to /</p></td>
<td width="4%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="82%">
<p>Reopen STDIN, STDOUT, and STDERR so they're not
connected to the old tty.</p></td>
<td width="4%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="1%">
<p>•</p></td>
<td width="4%"></td>
<td width="82%">
<p>Background yourself like this:</p></td>
<td width="4%">
</td></tr>
</table>
<p style="margin-left:14%; margin-top: 1em">fork &amp;&amp;
exit;</p>
<p style="margin-left:9%; margin-top: 1em">The Proc::Daemon
module, available from CPAN, provides a function to perform
these actions for you.</p>
<h3>How do I find out if I'm running interactively or not?
<a name="How do I find out if I'm running interactively or not?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">(contributed by
brian d foy)</p>
<p style="margin-left:9%; margin-top: 1em">This is a
difficult question to answer, and the best answer is only a
guess.</p>
<p style="margin-left:9%; margin-top: 1em">What do you
really want to know? If you merely want to know if one of
your filehandles is connected to a terminal, you can try the
"−t" file test:</p>
<p style="margin-left:9%; margin-top: 1em">if( −t
STDOUT ) { <br/>
print "I'm connected to a terminal!\n"; <br/>
}</p>
<p style="margin-left:9%; margin-top: 1em">However, you
might be out of luck if you expect that means there is a
real person on the other side. With the Expect module,
another program can pretend to be a person. The program
might even come close to passing the Turing test.</p>
<p style="margin-left:9%; margin-top: 1em">The
IO::Interactive module does the best it can to give you an
answer. Its "is_interactive" function returns an
output filehandle; that filehandle points to standard output
if the module thinks the session is interactive. Otherwise,
the filehandle is a null handle that simply discards the
output:</p>
<p style="margin-left:9%; margin-top: 1em">use
IO::Interactive; <br/>
print { is_interactive } "I might go to standard
output!\n";</p>
<p style="margin-left:9%; margin-top: 1em">This still
doesn't guarantee that a real person is answering your
prompts or reading your output.</p>
<p style="margin-left:9%; margin-top: 1em">If you want to
know how to handle automated testing for your distribution,
you can check the environment. The CPAN Testers, for
instance, set the value of
"AUTOMATED_TESTING":</p>
<p style="margin-left:9%; margin-top: 1em">unless(
$ENV{AUTOMATED_TESTING} ) { <br/>
print "Hello interactive tester!\n"; <br/>
}</p>
<h3>How do I timeout a slow event?
<a name="How do I timeout a slow event?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Use the alarm()
function, probably in conjunction with a signal handler, as
documented in "Signals" in perlipc and the section
on "Signals" in the Camel. You may instead use the
more flexible Sys::AlarmCall module available from CPAN.</p>
<p style="margin-left:9%; margin-top: 1em">The alarm()
function is not implemented on all versions of Windows.
Check the documentation for your specific version of
Perl.</p>
<h3>How do I set CPU limits?
<a name="How do I set CPU limits?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">(contributed by
Xho)</p>
<p style="margin-left:9%; margin-top: 1em">Use the
BSD::Resource module from CPAN. As an example:</p>
<p style="margin-left:9%; margin-top: 1em">use
BSD::Resource; <br/>
setrlimit(RLIMIT_CPU,10,20) or die $!;</p>
<p style="margin-left:9%; margin-top: 1em">This sets the
soft and hard limits to 10 and 20 seconds, respectively.
After 10 seconds of time spent running on the CPU (not
"wall" time), the process will be sent a signal
(XCPU on some systems) which, if not trapped, will cause the
process to terminate. If that signal is trapped, then after
10 more seconds (20 seconds in total) the process will be
killed with a non−trappable signal.</p>
<p style="margin-left:9%; margin-top: 1em">See the
BSD::Resource and your systems documentation for the gory
details.</p>
<h3>How do I avoid zombies on a Unix system?
<a name="How do I avoid zombies on a Unix system?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Use the reaper
code from "Signals" in perlipc to call wait() when
a SIGCHLD is received, or else use the double−fork
technique described in "How do I start a process in the
background?" in perlfaq8.</p>
<h3>How do I use an SQL database?
<a name="How do I use an SQL database?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">The DBI module
provides an abstract interface to most database servers and
types, including Oracle, DB2, Sybase, mysql, Postgresql,
ODBC, and flat files. The DBI module accesses each database
type through a database driver, or DBD. You can see a
complete list of available drivers on CPAN:
&lt;http://www.cpan.org/modules/by−module/DBD/&gt; .
You can read more about DBI on &lt;http://dbi.perl.org/&gt;
.</p>
<p style="margin-left:9%; margin-top: 1em">Other modules
provide more specific access: Win32::ODBC, Alzabo,
"iodbc", and others found on CPAN Search:
&lt;https://metacpan.org/&gt; .</p>
<h3>How do I make a system() exit on control−C?
<a name="How do I make a system() exit on control−C?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">You can't. You
need to imitate the system() call (see perlipc for sample
code) and then have a signal handler for the INT signal that
passes the signal on to the subprocess. Or you can check for
it:</p>
<p style="margin-left:9%; margin-top: 1em">$rc =
system($cmd); <br/>
if ($rc &amp; 127) { die "signal death" }</p>
<h3>How do I open a file without blocking?
<a name="How do I open a file without blocking?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">If you're lucky
enough to be using a system that supports non−blocking
reads (most Unixish systems do), you need only to use the
"O_NDELAY" or "O_NONBLOCK" flag from the
"Fcntl" module in conjunction with sysopen():</p>
<p style="margin-left:9%; margin-top: 1em">use Fcntl; <br/>
sysopen(my $fh, "/foo/somefile",
O_WRONLY|O_NDELAY|O_CREAT, 0644) <br/>
or die "can't open /foo/somefile: $!":</p>
<h3>How do I tell the difference between errors from the shell and perl?
<a name="How do I tell the difference between errors from the shell and perl?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">(answer
contributed by brian d foy)</p>
<p style="margin-left:9%; margin-top: 1em">When you run a
Perl script, something else is running the script for you,
and that something else may output error messages. The
script might emit its own warnings and error messages. Most
of the time you cannot tell who said what.</p>
<p style="margin-left:9%; margin-top: 1em">You probably
cannot fix the thing that runs perl, but you can change how
perl outputs its warnings by defining a custom warning and
die functions.</p>
<p style="margin-left:9%; margin-top: 1em">Consider this
script, which has an error you may not notice
immediately.</p>
<p style="margin-left:9%; margin-top: 1em">#!/usr/locl/bin/perl
<br/>
print "Hello World\n";</p>
<p style="margin-left:9%; margin-top: 1em">I get an error
when I run this from my shell (which happens to be bash).
That may look like perl forgot it has a print() function,
but my shebang line is not the path to perl, so the shell
runs the script, and I get the error.</p>
<p style="margin-left:9%; margin-top: 1em">$ ./test <br/>
./test: line 3: print: command not found</p>
<p style="margin-left:9%; margin-top: 1em">A quick and
dirty fix involves a little bit of code, but this may be all
you need to figure out the problem.</p>
<p style="margin-left:9%; margin-top: 1em">#!/usr/bin/perl
−w <br/>
BEGIN { <br/>
$SIG{__WARN__} = sub{ print STDERR "Perl: ", @_;
}; <br/>
$SIG{__DIE__} = sub{ print STDERR "Perl: ", @_;
exit 1}; <br/>
} <br/>
$a = 1 + undef; <br/>
$x / 0; <br/>
__END__</p>
<p style="margin-left:9%; margin-top: 1em">The perl message
comes out with "Perl" in front. The
"BEGIN" block works at compile time so all of the
compilation errors and warnings get the "Perl:"
prefix too.</p>
<p style="margin-left:9%; margin-top: 1em">Perl: Useless
use of division (/) in void context at ./test line 9. <br/>
Perl: Name "main::a" used only once: possible typo
at ./test line 8. <br/>
Perl: Name "main::x" used only once: possible typo
at ./test line 9. <br/>
Perl: Use of uninitialized value in addition (+) at ./test
line 8. <br/>
Perl: Use of uninitialized value in division (/) at ./test
line 9. <br/>
Perl: Illegal division by zero at ./test line 9. <br/>
Perl: Illegal division by zero at −e line 3.</p>
<p style="margin-left:9%; margin-top: 1em">If I don't see
that "Perl:", it's not from perl.</p>
<p style="margin-left:9%; margin-top: 1em">You could also
just know all the perl errors, and although there are some
people who may know all of them, you probably don't.
However, they all should be in the perldiag manpage. If you
don't find the error in there, it probably isn't a perl
error.</p>
<p style="margin-left:9%; margin-top: 1em">Looking up every
message is not the easiest way, so let perl to do it for
you. Use the diagnostics pragma with turns perl's normal
messages into longer discussions on the topic.</p>
<p style="margin-left:9%; margin-top: 1em">use
diagnostics;</p>
<p style="margin-left:9%; margin-top: 1em">If you don't get
a paragraph or two of expanded discussion, it might not be
perl's message.</p>
<h3>How do I install a module from CPAN?
<a name="How do I install a module from CPAN?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">(contributed by
brian d foy)</p>
<p style="margin-left:9%; margin-top: 1em">The easiest way
is to have a module also named CPAN do it for you by using
the "cpan" command that comes with Perl. You can
give it a list of modules to install:</p>
<p style="margin-left:9%; margin-top: 1em">$ cpan
IO::Interactive Getopt::Whatever</p>
<p style="margin-left:9%; margin-top: 1em">If you prefer
"CPANPLUS", it's just as easy:</p>
<p style="margin-left:9%; margin-top: 1em">$ cpanp i
IO::Interactive Getopt::Whatever</p>
<p style="margin-left:9%; margin-top: 1em">If you want to
install a distribution from the current directory, you can
tell "CPAN.pm" to install "." (the full
stop):</p>
<p style="margin-left:9%; margin-top: 1em">$ cpan .</p>
<p style="margin-left:9%; margin-top: 1em">See the
documentation for either of those commands to see what else
you can do.</p>
<p style="margin-left:9%; margin-top: 1em">If you want to
try to install a distribution by yourself, resolving all
dependencies on your own, you follow one of two possible
build paths.</p>
<p style="margin-left:9%; margin-top: 1em">For
distributions that use <i>Makefile.PL</i>:</p>
<p style="margin-left:9%; margin-top: 1em">$ perl
Makefile.PL <br/>
$ make test install</p>
<p style="margin-left:9%; margin-top: 1em">For
distributions that use <i>Build.PL</i>:</p>
<p style="margin-left:9%; margin-top: 1em">$ perl Build.PL
<br/>
$ ./Build test <br/>
$ ./Build install</p>
<p style="margin-left:9%; margin-top: 1em">Some
distributions may need to link to libraries or other
third−party code and their build and installation
sequences may be more complicated. Check any <i>README</i>
or <i>INSTALL</i> files that you may find.</p>
<h3>What's the difference between require and use?
<a name="What's the difference between require and use?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">(contributed by
brian d foy)</p>
<p style="margin-left:9%; margin-top: 1em">Perl runs
"require" statement at run−time. Once Perl
loads, compiles, and runs the file, it doesn't do anything
else. The "use" statement is the same as a
"require" run at compile−time, but Perl also
calls the "import" method for the loaded package.
These two are the same:</p>
<p style="margin-left:9%; margin-top: 1em">use MODULE
qw(import list); <br/>
BEGIN { <br/>
require MODULE; <br/>
MODULE−&gt;import(import list); <br/>
}</p>
<p style="margin-left:9%; margin-top: 1em">However, you can
suppress the "import" by using an explicit, empty
import list. Both of these still happen at
compile−time:</p>
<p style="margin-left:9%; margin-top: 1em">use MODULE ();
<br/>
BEGIN { <br/>
require MODULE; <br/>
}</p>
<p style="margin-left:9%; margin-top: 1em">Since
"use" will also call the "import"
method, the actual value for "MODULE" must be a
bareword. That is, "use" cannot load files by
name, although "require" can:</p>
<p style="margin-left:9%; margin-top: 1em">require
"$ENV{HOME}/lib/Foo.pm"; # no @INC searching!</p>
<p style="margin-left:9%; margin-top: 1em">See the entry
for "use" in perlfunc for more details.</p>
<h3>How do I keep my own module/library directory?
<a name="How do I keep my own module/library directory?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">When you build
modules, tell Perl where to install the modules.</p>
<p style="margin-left:9%; margin-top: 1em">If you want to
install modules for your own use, the easiest way might be
local::lib, which you can download from CPAN. It sets
various installation settings for you, and uses those same
settings within your programs.</p>
<p style="margin-left:9%; margin-top: 1em">If you want more
flexibility, you need to configure your CPAN client for your
particular situation.</p>
<p style="margin-left:9%; margin-top: 1em">For
"Makefile.PL"−based distributions, use the
INSTALL_BASE option when generating Makefiles:</p>
<p style="margin-left:9%; margin-top: 1em">perl Makefile.PL
INSTALL_BASE=/mydir/perl</p>
<p style="margin-left:9%; margin-top: 1em">You can set this
in your "CPAN.pm" configuration so modules
automatically install in your private library directory when
you use the CPAN.pm shell:</p>
<p style="margin-left:9%; margin-top: 1em">% cpan <br/>
cpan&gt; o conf makepl_arg INSTALL_BASE=/mydir/perl <br/>
cpan&gt; o conf commit</p>
<p style="margin-left:9%; margin-top: 1em">For
"Build.PL"−based distributions, use the
−−install_base option:</p>
<p style="margin-left:9%; margin-top: 1em">perl Build.PL
−−install_base /mydir/perl</p>
<p style="margin-left:9%; margin-top: 1em">You can
configure "CPAN.pm" to automatically use this
option too:</p>
<p style="margin-left:9%; margin-top: 1em">% cpan <br/>
cpan&gt; o conf mbuild_arg "−−install_base
/mydir/perl" <br/>
cpan&gt; o conf commit</p>
<p style="margin-left:9%; margin-top: 1em">INSTALL_BASE
tells these tools to put your modules into
<i>/mydir/perl/lib/perl5</i>. See "How do I add a
directory to my include path (@INC) at runtime?" for
details on how to run your newly installed modules.</p>
<p style="margin-left:9%; margin-top: 1em">There is one
caveat with INSTALL_BASE, though, since it acts differently
from the PREFIX and LIB settings that older versions of
ExtUtils::MakeMaker advocated. INSTALL_BASE does not support
installing modules for multiple versions of Perl or
different architectures under the same directory. You should
consider whether you really want that and, if you do, use
the older PREFIX and LIB settings. See the
ExtUtils::Makemaker documentation for more details.</p>
<h3>How do I add the directory my program lives in to the module/library searchpath?
<a name="How do I add the directory my program lives in to the module/library searchpath?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">(contributed by
brian d foy)</p>
<p style="margin-left:9%; margin-top: 1em">If you know the
directory already, you can add it to @INC as you would for
any other directory. You might "use lib" if you
know the directory at compile time:</p>
<p style="margin-left:9%; margin-top: 1em">use lib
$directory;</p>
<p style="margin-left:9%; margin-top: 1em">The trick in
this task is to find the directory. Before your script does
anything else (such as a "chdir"), you can get the
current working directory with the "Cwd" module,
which comes with Perl:</p>
<p style="margin-left:9%; margin-top: 1em">BEGIN { <br/>
use Cwd; <br/>
our $directory = cwd; <br/>
} <br/>
use lib $directory;</p>
<p style="margin-left:9%; margin-top: 1em">You can do a
similar thing with the value of $0, which holds the script
name. That might hold a relative path, but
"rel2abs" can turn it into an absolute path. Once
you have the</p>
<p style="margin-left:9%; margin-top: 1em">BEGIN { <br/>
use File::Spec::Functions qw(rel2abs); <br/>
use File::Basename qw(dirname); <br/>
my $path = rel2abs( $0 ); <br/>
our $directory = dirname( $path ); <br/>
} <br/>
use lib $directory;</p>
<p style="margin-left:9%; margin-top: 1em">The FindBin
module, which comes with Perl, might work. It finds the
directory of the currently running script and puts it in
$Bin, which you can then use to construct the right library
path:</p>
<p style="margin-left:9%; margin-top: 1em">use FindBin
qw($Bin);</p>
<p style="margin-left:9%; margin-top: 1em">You can also use
local::lib to do much of the same thing. Install modules
using local::lib's settings then use the module in your
program:</p>
<p style="margin-left:9%; margin-top: 1em">use local::lib;
# sets up a local lib at ˜/perl5</p>
<p style="margin-left:9%; margin-top: 1em">See the
local::lib documentation for more details.</p>
<h3>How do I add a directory to my include path (@INC) at runtime?
<a name="How do I add a directory to my include path (@INC) at runtime?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Here are the
suggested ways of modifying your include path, including
environment variables, run−time switches, and
in−code statements: <br/>
the "PERLLIB" environment variable</p>
<p style="margin-left:14%;">$ export
PERLLIB=/path/to/my/dir <br/>
$ perl program.pl</p>
<p style="margin-left:9%;">the "PERL5LIB"
environment variable</p>
<p style="margin-left:14%;">$ export
PERL5LIB=/path/to/my/dir <br/>
$ perl program.pl</p>
<p style="margin-left:9%;">the "perl −Idir"
command line flag</p>
<p style="margin-left:14%;">$ perl −I/path/to/my/dir
program.pl</p>
<p style="margin-left:9%;">the "lib" pragma:</p>
<p style="margin-left:14%;">use lib
"$ENV{HOME}/myown_perllib";</p>
<p style="margin-left:9%;">the local::lib module:</p>
<p style="margin-left:14%;">use local::lib; <br/>
use local::lib "˜/myown_perllib";</p>
<h3>Where are modules installed?
<a name="Where are modules installed?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Modules are
installed on a case−by−case basis (as provided
by the methods described in the previous section), and in
the operating system. All of these paths are stored in @INC,
which you can display with the one−liner</p>
<p style="margin-left:9%; margin-top: 1em">perl −e
'print join("\n",@INC,"")'</p>
<p style="margin-left:9%; margin-top: 1em">The same
information is displayed at the end of the output from the
command</p>
<p style="margin-left:9%; margin-top: 1em">perl
−V</p>
<p style="margin-left:9%; margin-top: 1em">To find out
where a module's source code is located, use</p>
<p style="margin-left:9%; margin-top: 1em">perldoc −l
Encode</p>
<p style="margin-left:9%; margin-top: 1em">to display the
path to the module. In some cases (for example, the
"AutoLoader" module), this command will show the
path to a separate "pod" file; the module itself
should be in the same directory, with a 'pm' file
extension.</p>
<h3>What is socket.ph and where do I get it?
<a name="What is socket.ph and where do I get it?"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">It's a Perl 4
style file defining values for system networking constants.
Sometimes it is built using h2ph when Perl is installed, but
other times it is not. Modern programs should use "use
Socket;" instead.</p>
<h2>AUTHOR AND COPYRIGHT
<a name="AUTHOR AND COPYRIGHT"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Copyright (c)
1997−2010 Tom Christiansen, Nathan Torkington, and
other authors as noted. All rights reserved.</p>
<p style="margin-left:9%; margin-top: 1em">This
documentation is free; you can redistribute it and/or modify
it under the same terms as Perl itself.</p>
<p style="margin-left:9%; margin-top: 1em">Irrespective of
its distribution, all code examples in this file are hereby
placed into the public domain. You are permitted and
encouraged to use this code in your own programs for fun or
for profit as you see fit. A simple comment in the code
giving credit would be courteous but is not required.</p>
<hr/>
</body>
</html>
