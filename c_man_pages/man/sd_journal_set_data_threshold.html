<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:51:09 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SD_JOURNAL_GET_DATA</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">SD_JOURNAL_GET_DATA</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#Errors">Errors</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#EXAMPLES">EXAMPLES</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">sd_journal_get_data,
sd_journal_enumerate_data,
sd_journal_enumerate_available_data,
sd_journal_restart_data, SD_JOURNAL_FOREACH_DATA,
sd_journal_set_data_threshold, sd_journal_get_data_threshold
− Read data fields from the current journal entry</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;systemd/sd−journal.h&gt;</b></p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="81%">
<p style="margin-top: 1em"><b>int
sd_journal_get_data(sd_journal *</b><i>j</i><b>,
const char *</b><i>field</i><b>,
const void **</b><i>data</i><b>,
size_t *</b><i>length</i><b>);</b></p> </td>
<td width="10%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="81%">
<p style="margin-top: 1em"><b>int
sd_journal_enumerate_data(sd_journal *</b><i>j</i><b>,
const void **</b><i>data</i><b>,
size_t *</b><i>length</i><b>);</b></p> </td>
<td width="10%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="81%">
<p style="margin-top: 1em"><b>int
sd_journal_enumerate_available_data(sd_journal *</b><i>j</i><b>,
const void **</b><i>data</i><b>,
size_t *</b><i>length</i><b>);</b></p> </td>
<td width="10%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="81%">
<p style="margin-top: 1em"><b>void
sd_journal_restart_data(sd_journal *</b><i>j</i><b>);</b></p> </td>
<td width="10%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="81%">
<p style="margin-top: 1em"><b>SD_JOURNAL_FOREACH_DATA(sd_journal *</b><i>j</i><b>,
const void *</b><i>data</i><b>,
size_t </b><i>length</i><b>);</b></p> </td>
<td width="10%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="81%">
<p style="margin-top: 1em"><b>int
sd_journal_set_data_threshold(sd_journal *</b><i>j</i><b>,
size_t </b><i>sz</i><b>);</b></p> </td>
<td width="10%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="81%">
<p style="margin-top: 1em"><b>int
sd_journal_get_data_threshold(sd_journal *</b><i>j</i><b>,
size_t *</b><i>sz</i><b>);</b></p> </td>
<td width="10%">
</td></tr>
</table>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_get_data()</b>
gets the data object associated with a specific field from
the current journal entry. It takes four arguments: the
journal context object, a string with the field name to
request, plus a pair of pointers to pointer/size variables
where the data object and its size shall be stored in. The
field name should be an entry field name. Well−known
field names are listed in <b>systemd.journal-fields</b>(7),
but any field can be specified. The returned data is in a
read−only memory map and is only valid until the next
invocation of <b>sd_journal_get_data()</b>,
<b>sd_journal_enumerate_data()</b>,
<b>sd_journal_enumerate_available_data()</b>, or when the
read pointer is altered. Note that the data returned will be
prefixed with the field name and "=". Also note
that, by default, data fields larger than 64K might get
truncated to 64K. This threshold may be changed and turned
off with <b>sd_journal_set_data_threshold()</b> (see
below).</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_enumerate_data()</b>
may be used to iterate through all fields of the current
entry. On each invocation the data for the next field is
returned. The order of these fields is not defined. The data
returned is in the same format as with
<b>sd_journal_get_data()</b> and also follows the same
life−time semantics.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_enumerate_available_data()</b>
is similar to <b>sd_journal_enumerate_data()</b>, but
silently skips any fields which may be valid, but are too
large or not supported by current implementation.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_restart_data()</b>
resets the data enumeration index to the beginning of the
entry. The next invocation of
<b>sd_journal_enumerate_data()</b> will return the first
field of the entry again.</p>
<p style="margin-left:9%; margin-top: 1em">Note that the
<b>SD_JOURNAL_FOREACH_DATA()</b> macro may be used as a
handy wrapper around <b>sd_journal_restart_data()</b> and
<b>sd_journal_enumerate_available_data()</b>.</p>
<p style="margin-left:9%; margin-top: 1em">Note that these
functions will not work before <b>sd_journal_next</b>(3) (or
related call) has been called at least once, in order to
position the read pointer at a valid entry.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_set_data_threshold()</b>
may be used to change the data field size threshold for data
returned by <b>sd_journal_get_data()</b>,
<b>sd_journal_enumerate_data()</b> and
<b>sd_journal_enumerate_unique()</b>. This threshold is a
hint only: it indicates that the client program is
interested only in the initial parts of the data fields, up
to the threshold in size — but the library might still
return larger data objects. That means applications should
not rely exclusively on this setting to limit the size of
the data fields returned, but need to apply an explicit size
limit on the returned data as well. This threshold defaults
to 64K by default. To retrieve the complete data fields this
threshold should be turned off by setting it to 0, so that
the library always returns the complete data objects. It is
recommended to set this threshold as low as possible since
this relieves the library from having to decompress large
compressed data objects in full.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_get_data_threshold()</b>
returns the currently configured data field size
threshold.</p>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_get_data()</b>
returns 0 on success or a negative errno−style error
code. <b>sd_journal_enumerate_data()</b> and
<b>sd_journal_enumerate_available_data()</b> return a
positive integer if the next field has been read, 0 when no
more fields remain, or a negative errno−style error
code. <b>sd_journal_restart_data()</b> doesn't return
anything. <b>sd_journal_set_data_threshold()</b> and
<b>sd_journal_get_threshold()</b> return 0 on success or a
negative errno−style error code.</p>
<h3>Errors
<a name="Errors"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Returned errors
may indicate the following problems:</p>
<p style="margin-left:9%; margin-top: 1em"><b>−EINVAL</b></p>
<p style="margin-left:14%;">One of the required parameters
is <b>NULL</b> or invalid.</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 246.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−ECHILD</b></p>
<p style="margin-left:14%;">The journal object was created
in a different process, library or module instance.</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 246.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−EADDRNOTAVAIL</b></p>
<p style="margin-left:14%;">The read pointer is not
positioned at a valid entry; <b>sd_journal_next</b>(3) or a
related call has not been called at least once.</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 246.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−ENOENT</b></p>
<p style="margin-left:14%;">The current entry does not
include the specified field.</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 246.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−ENOMEM</b></p>
<p style="margin-left:14%;">Memory allocation failed.</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 246.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−ENOBUFS</b></p>
<p style="margin-left:14%;">A compressed entry is too
large.</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 246.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−E2BIG</b></p>
<p style="margin-left:14%;">The data field is too large for
this computer architecture (e.g. above 4 GB on a
32−bit architecture).</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 246.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−EPROTONOSUPPORT</b></p>
<p style="margin-left:14%;">The journal is compressed with
an unsupported method or the journal uses an unsupported
feature.</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 246.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−EBADMSG</b></p>
<p style="margin-left:14%;">The journal is corrupted
(possibly just the entry being iterated over).</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 246.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−EIO</b></p>
<p style="margin-left:14%;">An I/O error was reported by
the kernel.</p>
<p style="margin-left:14%; margin-top: 1em">Added in
version 246.</p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">All functions
listed here are thread−agnostic and only a single
specific thread may operate on a given object during its
entire lifetime. It's safe to allocate multiple independent
objects and use each from a specific thread in parallel.
However, it's not safe to allocate such an object in one
thread, and operate or free it from any other, even if
locking is used to ensure these threads don't operate on it
at the very same time.</p>
<p style="margin-left:9%; margin-top: 1em">Functions
described here are available as a shared library, which can
be compiled against and linked to with the
<b>libsystemd pkg-config</b>(1) file.</p>
<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">See
<b>sd_journal_next</b>(3) for a complete example how to use
<b>sd_journal_get_data()</b>.</p>
<p style="margin-left:9%; margin-top: 1em">Use the
<b>SD_JOURNAL_FOREACH_DATA()</b> macro to iterate through
all fields of the current journal entry:</p>
<p style="margin-left:14%; margin-top: 1em">... <br/>
int print_fields(sd_journal *j) { <br/>
const void *data; <br/>
size_t length; <br/>
SD_JOURNAL_FOREACH_DATA(j, data, length) <br/>
printf("%.*s\n", (int) length, data); <br/>
} <br/>
...</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_get_data()</b>,
<b>sd_journal_enumerate_data()</b>,
<b>sd_journal_restart_data()</b>, and
<b>SD_JOURNAL_FOREACH_DATA()</b> were added in version
187.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_set_data_threshold()</b>
and <b>sd_journal_get_data_threshold()</b> were added in
version 196.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_journal_enumerate_available_data()</b>
was added in version 246.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>systemd</b>(1),
<b>systemd.journal-fields</b>(7), <b>sd-journal</b>(3),
<b>sd_journal_open</b>(3), <b>sd_journal_next</b>(3),
<b>sd_journal_get_realtime_usec</b>(3),
<b>sd_journal_query_unique</b>(3)</p>
<hr/>
</body>
</html>
