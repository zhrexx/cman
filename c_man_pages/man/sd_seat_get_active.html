<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:48:59 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SD_SEAT_GET_ACTIVE</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">SD_SEAT_GET_ACTIVE</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#RETURN VALUE">RETURN VALUE</a><br/>
<a href="#Errors">Errors</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">sd_seat_get_active,
sd_seat_get_sessions, sd_seat_can_tty, sd_seat_can_graphical
− Determine state of a specific seat</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>#include
&lt;systemd/sd−login.h&gt;</b></p>
<table border="0" cellpadding="0" cellspacing="0" frame="void" rules="none" width="100%">
<tr align="left" valign="top">
<td width="9%"></td>
<td width="88%">
<p style="margin-top: 1em"><b>int
sd_seat_get_active(const char *</b><i>seat</i><b>,
char **</b><i>session</i><b>,
uid_t *</b><i>uid</i><b>);</b></p> </td>
<td width="3%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="88%">
<p style="margin-top: 1em"><b>int
sd_seat_get_sessions(const char *</b><i>seat</i><b>,
char ***</b><i>ret_sessions</i><b>,
uid_t **</b><i>ret_uids</i><b>,
unsigned int *</b><i>ret_n_uids</i><b>);</b></p> </td>
<td width="3%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="88%">
<p style="margin-top: 1em"><b>int
sd_seat_can_tty(const char *</b><i>seat</i><b>);</b></p> </td>
<td width="3%">
</td></tr>
<tr align="left" valign="top">
<td width="9%"></td>
<td width="88%">
<p style="margin-top: 1em"><b>int
sd_seat_can_graphical(const char *</b><i>seat</i><b>);</b></p> </td>
<td width="3%">
</td></tr>
</table>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_seat_get_active()</b>
may be used to determine which session is currently active
on a seat, if there is any. Returns the session identifier
and the user identifier of the Unix user the session is
belonging to. Either the session or the user identifier
parameter can be passed <b>NULL</b>, in case only one of the
parameters shall be queried. The returned string needs to be
freed with the libc <b>free</b>(3) call after use.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_seat_get_sessions()</b>
may be used to determine all sessions on the specified seat.
Returns two arrays, one (<b>NULL</b> terminated) with the
session identifiers of the sessions and one with the user
identifiers of the Unix users the sessions belong to. An
additional parameter may be used to return the number of
entries in the latter array. This value is the same as the
return value if the return value is nonnegative. The output
parameters may be passed as <b>NULL</b> in case these output
values are not needed. The arrays and the strings referenced
by them need to be freed with the libc <b>free</b>(3) call
after use. Note that instead of an empty array <b>NULL</b>
may be returned and should be considered equivalent to an
empty array.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_seat_can_tty()</b>
may be used to determine whether a specific seat provides
TTY functionality, i.e. is useful as a text console.</p>
<p style="margin-left:9%; margin-top: 1em"><b>sd_seat_can_graphical()</b>
may be used to determine whether a specific seat provides
graphics functionality, i.e. is useful as a graphics
display.</p>
<p style="margin-left:9%; margin-top: 1em">If the
<i>seat</i> parameter of any of these functions is passed as
<b>NULL</b>, the operation is executed for the seat of the
session of the calling process, if there is any.</p>
<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">On success,
<b>sd_seat_get_active()</b> returns 0 or a positive integer.
On success, <b>sd_seat_get_sessions()</b> returns the number
of entries in the session identifier array. If the test
succeeds, <b>sd_seat_can_tty()</b> and
<b>sd_seat_can_graphical()</b> return a positive integer, if
it fails 0. On failure, these calls return a negative
errno−style error code.</p>
<h3>Errors
<a name="Errors"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Returned errors
may indicate the following problems:</p>
<p style="margin-left:9%; margin-top: 1em"><b>−ENODATA</b></p>
<p style="margin-left:14%;">The given field is not
specified for the described seat.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−ENXIO</b></p>
<p style="margin-left:14%;">The specified seat is
unknown.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−EINVAL</b></p>
<p style="margin-left:14%;">An input parameter was invalid
(out of range, or <b>NULL</b>, where that is not
accepted).</p>
<p style="margin-left:9%; margin-top: 1em"><b>−ENOMEM</b></p>
<p style="margin-left:14%;">Memory allocation failed.</p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Functions
described here are available as a shared library, which can
be compiled against and linked to with the
<b>libsystemd pkg-config</b>(1) file.</p>
<p style="margin-left:9%; margin-top: 1em">The code
described here uses <b>getenv</b>(3), which is declared to
be not multi−thread−safe. This means that the
code calling the functions described here must not call
<b>setenv</b>(3) from a parallel thread. It is recommended
to only do calls to <b>setenv()</b> from an early phase of
the program when no other threads have been started.</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>sd_seat_can_tty()</b>
and <b>sd_seat_can_graphical()</b> were added in version
186.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>systemd</b>(1),
<b>sd-login</b>(3), <b>sd_session_get_seat</b>(3)</p>
<hr/>
</body>
</html>
