<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 19:53:47 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Sub::Util</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">Sub::Util</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#FUNCTIONS">FUNCTIONS</a><br/>
<a href="#prototype">prototype</a><br/>
<a href="#set_prototype">set_prototype</a><br/>
<a href="#subname">subname</a><br/>
<a href="#set_subname">set_subname</a><br/>
<a href="#AUTHOR">AUTHOR</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">Sub::Util
− A selection of utility subroutines for subs and CODE
references</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">use Sub::Util
qw( prototype set_prototype subname set_subname );</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">"Sub::Util"
contains a selection of utility subroutines that are useful
for operating on subs and CODE references.</p>
<p style="margin-left:9%; margin-top: 1em">The rationale
for inclusion in this module is that the function performs
some work for which an XS implementation is essential
because it cannot be implemented in Pure Perl, and which is
sufficiently−widely used across CPAN that its
popularity warrants inclusion in a core module, which this
is.</p>
<h2>FUNCTIONS
<a name="FUNCTIONS"></a>
</h2>
<h3>prototype
<a name="prototype"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">my $proto =
prototype( $code )</p>
<p style="margin-left:9%; margin-top: 1em"><i>Since version
1.40.</i></p>
<p style="margin-left:9%; margin-top: 1em">Returns the
prototype of the given $code reference, if it has one, as a
string. This is the same as the "CORE::prototype"
operator; it is included here simply for symmetry and
completeness with the other functions.</p>
<h3>set_prototype
<a name="set_prototype"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">my $code =
set_prototype $prototype, $code;</p>
<p style="margin-left:9%; margin-top: 1em"><i>Since version
1.40.</i></p>
<p style="margin-left:9%; margin-top: 1em">Sets the
prototype of the function given by the $code reference, or
deletes it if $prototype is "undef". Returns the
$code reference itself.</p>
<p style="margin-left:9%; margin-top: 1em"><i>Caution</i>:
This function takes arguments in a different order to the
previous copy of the code from "Scalar::Util".
This is to match the order of "set_subname", and
other potential additions in this file. This order has been
chosen as it allows a neat and simple chaining of other
"Sub::Util::set_*" functions as might become
available, such as:</p>
<p style="margin-left:9%; margin-top: 1em">my $code = <br/>
set_subname name_here =&gt; <br/>
set_prototype '&amp;@' =&gt; <br/>
set_attribute ':lvalue' =&gt; <br/>
sub { ...... };</p>
<h3>subname
<a name="subname"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">my $name =
subname( $code )</p>
<p style="margin-left:9%; margin-top: 1em"><i>Since version
1.40.</i></p>
<p style="margin-left:9%; margin-top: 1em">Returns the name
of the given $code reference, if it has one. Normal named
subs will give a fully−qualified name consisting of
the package and the localname separated by "::".
Anonymous code references will give "__ANON__" as
the localname. If the package the code was compiled in has
been deleted (e.g. using "delete_package" from
Symbol), "__ANON__" will be returned as the
package name. If a name has been set using
"set_subname", this name will be returned
instead.</p>
<p style="margin-left:9%; margin-top: 1em">This function
was inspired by "sub_fullname" from Sub::Identify.
The remaining functions that "Sub::Identify"
implements can easily be emulated using regexp operations,
such as</p>
<p style="margin-left:9%; margin-top: 1em">sub
get_code_info { return (subname $_[0]) =˜
m/ˆ(.+)::(.*?)$/ } <br/>
sub sub_name { return (get_code_info $_[0])[0] } <br/>
sub stash_name { return (get_code_info $_[0])[1] }</p>
<p style="margin-left:9%; margin-top: 1em"><i>Users of
Sub::Name beware</i>: This function is <b>not</b> the same
as "Sub::Name::subname"; it returns the existing
name of the sub rather than changing it. To set or change a
name, see instead "set_subname".</p>
<h3>set_subname
<a name="set_subname"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">my $code =
set_subname $name, $code;</p>
<p style="margin-left:9%; margin-top: 1em"><i>Since version
1.40.</i></p>
<p style="margin-left:9%; margin-top: 1em">Sets the name of
the function given by the $code reference. Returns the $code
reference itself. If the $name is unqualified, the package
of the caller is used to qualify it.</p>
<p style="margin-left:9%; margin-top: 1em">This is useful
for applying names to anonymous CODE references so that
stack traces and similar situations, to give a useful name
rather than having the default of "__ANON__". Note
that this name is only used for this situation; the
"set_subname" will not install it into the symbol
table; you will have to do that yourself if required.</p>
<p style="margin-left:9%; margin-top: 1em">However, since
the name is not used by perl except as the return value of
"caller", for stack traces or similar, there is no
actual requirement that the name be syntactically valid as a
perl function name. This could be used to attach extra
information that could be useful in debugging stack
traces.</p>
<p style="margin-left:9%; margin-top: 1em">This function
was copied from "Sub::Name::subname" and renamed
to the naming convention of this module.</p>
<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The general
structure of this module was written by Paul Evans
&lt;leonerd@leonerd.org.uk&gt;.</p>
<p style="margin-left:9%; margin-top: 1em">The XS
implementation of "set_subname" was copied from
Sub::Name by Matthijs van Duin &lt;xmath@cpan.org&gt;</p>
<hr/>
</body>
</html>
