<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sat Apr  5 20:39:02 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta content="groff -Thtml, see www.gnu.org" name="generator"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" name="Content-Style"/>
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SWAPON</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
            :root {
                --primary-color: #3498db;
                --background-color: #f9f9f9;
                --text-color: #333;
                --code-bg: #f0f0f0;
                --header-color: #2c3e50;
                --link-color: #2980b9;
            }
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: var(--text-color);
                background-color: var(--background-color);
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                color: var(--header-color);
            }
            h1 {
                border-bottom: 2px solid var(--primary-color);
                padding-bottom: 0.5rem;
            }
            pre {
                background-color: var(--code-bg);
                padding: 1rem;
                border-radius: 4px;
                overflow-x: auto;
            }
            a {
                color: var(--link-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            .man-navigation {
                background-color: #fff;
                border-bottom: 1px solid #ddd;
                padding: 0.5rem 0;
                position: sticky;
                top: 0;
                z-index: 100;
            }
            .section {
                margin-top: 2rem;
            }
            @media (prefers-color-scheme: dark) {
                :root {
                    --primary-color: #3498db;
                    --background-color: #222;
                    --text-color: #f0f0f0;
                    --code-bg: #333;
                    --header-color: #3498db;
                    --link-color: #5dade2;
                }
            }
            .back-to-index {
                display: inline-block;
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--primary-color);
                color: white;
                border-radius: 4px;
                text-decoration: none;
            }
            .back-to-index:hover {
                background-color: var(--link-color);
                text-decoration: none;
            }
        </style></head>
<body><div><a class="back-to-index" href="../index.html">← Back to Index</a></div>
<h1 align="center">SWAPON</h1>
<a href="#NAME">NAME</a><br/>
<a href="#SYNOPSIS">SYNOPSIS</a><br/>
<a href="#DESCRIPTION">DESCRIPTION</a><br/>
<a href="#OPTIONS">OPTIONS</a><br/>
<a href="#EXIT STATUS">EXIT STATUS</a><br/>
<a href="#ENVIRONMENT">ENVIRONMENT</a><br/>
<a href="#FILES">FILES</a><br/>
<a href="#NOTES">NOTES</a><br/>
<a href="#Files with holes">Files with holes</a><br/>
<a href="#Btrfs">Btrfs</a><br/>
<a href="#NFS">NFS</a><br/>
<a href="#Suspend">Suspend</a><br/>
<a href="#HISTORY">HISTORY</a><br/>
<a href="#SEE ALSO">SEE ALSO</a><br/>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br/>
<a href="#AVAILABILITY">AVAILABILITY</a><br/>
<hr/>
<h2>NAME
<a name="NAME"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">swapon, swapoff
− enable/disable devices and files for paging and
swapping</p>
<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>swapon</b>
[options] [<i>specialfile</i>...]</p>
<p style="margin-left:9%; margin-top: 1em"><b>swapoff</b>
[<b>−va</b>] [<i>specialfile</i>...]</p>
<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>swapon</b> is
used to specify devices on which paging and swapping are to
take place.</p>
<p style="margin-left:9%; margin-top: 1em">The device or
file used is given by the <i>specialfile</i> parameter. It
may be of the form <b>−L</b> <i>label</i> or
<b>−U</b> <i>uuid</i> to indicate a device by label or
uuid.</p>
<p style="margin-left:9%; margin-top: 1em">Calls to
<b>swapon</b> normally occur in the system boot scripts
making all swap devices available, so that the paging and
swapping activity is interleaved across several devices and
files.</p>
<p style="margin-left:9%; margin-top: 1em"><b>swapoff</b>
disables swapping on the specified devices and files. When
the <b>−a</b> flag is given, swapping is disabled on
all known swap devices and files (as found in
<i>/proc/swaps</i> or <i>/etc/fstab</i>).</p>
<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>−a</b>,
<b>−−all</b></p>
<p style="margin-left:14%;">All devices marked as
"swap" in <i>/etc/fstab</i> are made available,
except for those with the "noauto" option. Devices
that are already being used as swap are silently
skipped.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−T</b>,
<b>−−fstab</b> <i>path</i></p>
<p style="margin-left:14%;">Specifies an alternative fstab
file for compatibility with <b>mount</b>(8). If <i>path</i>
is a directory, then the files in the directory are sorted
by <b>strverscmp</b>(3); files that start with "."
or without an .fstab extension are ignored. The option can
be specified more than once. This option is mostly designed
for initramfs or chroot scripts where additional
configuration is specified beyond standard system
configuration.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−d</b>,
<b>−−discard</b>[<b>=</b><i>policy</i>]</p>
<p style="margin-left:14%;">Enable swap discards, if the
swap backing device supports the discard or trim operation.
This may improve performance on some Solid State Devices,
but often it does not. The option allows one to select
between two available swap discard policies:</p>
<p style="margin-left:14%; margin-top: 1em"><b>−−discard=once</b></p>
<p style="margin-left:19%;">to perform a single−time
discard operation for the whole swap area at swapon; or</p>
<p style="margin-left:14%; margin-top: 1em"><b>−−discard=pages</b></p>
<p style="margin-left:19%;">to asynchronously discard freed
swap pages before they are available for reuse.</p>
<p style="margin-left:14%; margin-top: 1em">If no policy is
selected, the default behavior is to enable both discard
types. The <i>/etc/fstab</i> mount options <b>discard</b>,
<b>discard=once</b>, or <b>discard=pages</b> may also be
used to enable discard flags.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−e</b>,
<b>−−ifexists</b></p>
<p style="margin-left:14%;">Silently skip devices that do
not exist. The <i>/etc/fstab</i> mount option <b>nofail</b>
may also be used to skip non−existing device.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−f</b>,
<b>−−fixpgsz</b></p>
<p style="margin-left:14%;">Reinitialize (exec mkswap) the
swap space if its page size does not match that of the
current running kernel. <b>mkswap</b>(8) initializes the
whole device and does not check for bad blocks.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−L</b>
<i>label</i></p>
<p style="margin-left:14%;">Use the partition that has the
specified <i>label</i>. (For this, access to
<i>/proc/partitions</i> is needed.)</p>
<p style="margin-left:9%; margin-top: 1em"><b>−o</b>,
<b>−−options</b> <i>opts</i></p>
<p style="margin-left:14%;">Specify swap options by an
<i>fstab</i>−compatible comma−separated string.
For example:</p>
<p style="margin-left:14%; margin-top: 1em"><b>swapon
−o pri=1,discard=pages,nofail /dev/sda2</b></p>
<p style="margin-left:14%; margin-top: 1em">The <i>opts</i>
string is evaluated last and overrides all other command
line options.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−p</b>,
<b>−−priority</b> <i>priority</i></p>
<p style="margin-left:14%;">Specify the priority of the
swap device. <i>priority</i> is a value between 0 and 32767.
Higher numbers indicate higher priority. See
<b>swapon</b>(2) for a full description of swap priorities.
Add <b>pri=</b><i>value</i> to the option field of
<i>/etc/fstab</i> for use with <b>swapon −a</b>. When
no priority is defined, Linux kernel defaults to negative
numbers.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−s</b>,
<b>−−summary</b></p>
<p style="margin-left:14%;">Display swap usage summary by
device. Equivalent to <b>cat /proc/swaps</b>. This output
format is DEPRECATED in favour of <b>−−show</b>
that provides better control on output data.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−−show</b>[<b>=</b><i>column</i>...]</p>
<p style="margin-left:14%;">Display a definable table of
swap areas. See the <b>−−help</b> output for a
list of available columns.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−−output−all</b></p>
<p style="margin-left:14%;">Output all available
columns.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−−noheadings</b></p>
<p style="margin-left:14%;">Do not print headings when
displaying <b>−−show</b> output.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−−raw</b></p>
<p style="margin-left:14%;">Display
<b>−−show</b> output without aligning table
columns.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−−bytes</b></p>
<p style="margin-left:14%;">Display swap size in bytes in
<b>−−show</b> output instead of in
user−friendly units.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−U</b>
<i>uuid</i></p>
<p style="margin-left:14%;">Use the partition that has the
specified <i>uuid</i>.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−v</b>,
<b>−−verbose</b></p>
<p style="margin-left:14%;">Be verbose.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−h</b>,
<b>−−help</b></p>
<p style="margin-left:14%;">Display help text and exit.</p>
<p style="margin-left:9%; margin-top: 1em"><b>−V</b>,
<b>−−version</b></p>
<p style="margin-left:14%;">Print version and exit.</p>
<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>swapoff</b>
has the following exit status values since v2.36:</p>
<p style="margin-left:9%; margin-top: 1em"><b>0</b></p>
<p style="margin-left:14%;">success</p>
<p style="margin-left:9%; margin-top: 1em"><b>2</b></p>
<p style="margin-left:14%;">system has insufficient memory
to stop swapping (OOM)</p>
<p style="margin-left:9%; margin-top: 1em"><b>4</b></p>
<p style="margin-left:14%;"><b>swapoff</b>(2) syscall
failed for another reason</p>
<p style="margin-left:9%; margin-top: 1em"><b>8</b></p>
<p style="margin-left:14%;">non−<b>swapoff</b>(2)
syscall system error (out of memory, ...)</p>
<p style="margin-left:9%; margin-top: 1em"><b>16</b></p>
<p style="margin-left:14%;">usage or syntax error</p>
<p style="margin-left:9%; margin-top: 1em"><b>32</b></p>
<p style="margin-left:14%;">all swapoff failed on
<b>−−all</b></p>
<p style="margin-left:9%; margin-top: 1em"><b>64</b></p>
<p style="margin-left:14%;">some swapoff succeeded on
<b>−−all</b></p>
<p style="margin-left:9%; margin-top: 1em">The command
<b>swapoff −−all</b> returns 0 (all succeeded),
32 (all failed), or 64 (some failed, some succeeded).</p>
<p style="margin-left:9%; margin-top: 1em">+ The old
versions before v2.36 has no documented exit status, 0 means
success in all versions.</p>
<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>LIBMOUNT_DEBUG</b>=all</p>
<p style="margin-left:14%;">enables <b>libmount</b> debug
output.</p>
<p style="margin-left:9%; margin-top: 1em"><b>LIBBLKID_DEBUG</b>=all</p>
<p style="margin-left:14%;">enables <b>libblkid</b> debug
output.</p>
<h2>FILES
<a name="FILES"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><i>/dev/sd??</i></p>
<p style="margin-left:14%;">standard paging devices</p>
<p style="margin-left:9%; margin-top: 1em"><i>/etc/fstab</i></p>
<p style="margin-left:14%;">ascii filesystem description
table</p>
<h2>NOTES
<a name="NOTES"></a>
</h2>
<h3>Files with holes
<a name="Files with holes"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">The swap file
implementation in the kernel expects to be able to write to
the file directly, without the assistance of the filesystem.
This is a problem on files with holes or on
copy−on−write files on filesystems like
Btrfs.</p>
<p style="margin-left:9%; margin-top: 1em">Commands like
<b>cp</b>(1) or <b>truncate</b>(1) create files with holes.
These files will be rejected by <b>swapon</b>.</p>
<p style="margin-left:9%; margin-top: 1em">Preallocated
files created by <b>fallocate</b>(1) may be interpreted as
files with holes too depending of the filesystem.
Preallocated swap files are supported on XFS since Linux
4.18.</p>
<p style="margin-left:9%; margin-top: 1em">The most
portable solution to create a swap file is to use
<b>dd</b>(1) and <i>/dev/zero</i>.</p>
<h3>Btrfs
<a name="Btrfs"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Swap files on
Btrfs are supported since Linux 5.0 on files with
<b>nocow</b> attribute. See the <b>btrfs</b>(5) manual page
for more details.</p>
<h3>NFS
<a name="NFS"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em">Swap over
<b>NFS</b> may not work.</p>
<h3>Suspend
<a name="Suspend"></a>
</h3>
<p style="margin-left:9%; margin-top: 1em"><b>swapon</b>
automatically detects and rewrites a swap space signature
with old software suspend data (e.g., <b>S1SUSPEND</b>,
<b>S2SUSPEND</b>, ...). The problem is that if we
don’t do it, then we get data corruption the next time
an attempt at unsuspending is made.</p>
<h2>HISTORY
<a name="HISTORY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
<b>swapon</b> command appeared in 4.0BSD.</p>
<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em"><b>swapoff</b>(2),
<b>swapon</b>(2), <b>fstab</b>(5), <b>init</b>(8),
<b>fallocate</b>(1), <b>mkswap</b>(8), <b>mount</b>(8),
<b>rc</b>(8)</p>
<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">For bug reports,
use the issue tracker at
&lt;https://github.com/util−linux/util−linux/issues&gt;.</p>
<h2>AVAILABILITY
<a name="AVAILABILITY"></a>
</h2>
<p style="margin-left:9%; margin-top: 1em">The
<b>swapon</b> command is part of the util−linux
package which can be downloaded from <i>Linux Kernel
Archive</i>
&lt;https://www.kernel.org/pub/linux/utils/util−linux/&gt;.</p>
<hr/>
</body>
</html>
